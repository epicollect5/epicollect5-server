/*! jQuery UI - v1.11.4 - 2016-01-19
 * http://jqueryui.com
 * Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, sortable.js
 * Copyright 2016 jQuery Foundation and other contributors; Licensed MIT */

(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var s=0,n=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,a=n.call(arguments,1),o=0,r=a.length;r>o;o++)for(i in a[o])s=a[o][i],a[o].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(a){var o="string"==typeof a,r=n.call(arguments,1),h=this;return o?this.each(function(){var i,n=e.data(this,s);return"instance"===a?(h=n,!1):n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,r),i!==n&&void 0!==i?(h=i&&i.jquery?h.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+a+"'")}):(r.length&&(a=e.widget.extend.apply(null,[a].concat(r))),this.each(function(){var t=e.data(this,s);t?(t.option(a||{}),t._init&&t._init()):e.data(this,s,new i(a,this))})),h}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var a=!1;e(document).mouseup(function(){a=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!a){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),a=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),a=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,N=e.extend({},y),M=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?N.left-=d:"center"===n.my[0]&&(N.left-=d/2),"bottom"===n.my[1]?N.top-=c:"center"===n.my[1]&&(N.top-=c/2),N.left+=M[0],N.top+=M[1],a||(N.left=h(N.left),N.top=h(N.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](N,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+M[0],p[1]+M[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-N.left,i=t+m-d,s=v.top-N.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:N.left,top:N.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(N,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n
})),n?(a.isOver||(a.isOver=1,s._parent=i.helper.parent(),a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable,e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i],this.document[0]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===s?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===s?t._createTrPlaceholder(t.currentItem,n):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var s=this;t.children().each(function(){e("<td>&#160;</td>",s.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);
    return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})});
/*! (C) WebReflection Mit Style License */
var CircularJSON=function(e,t){function l(e,t,o){var u=[],f=[e],l=[e],c=[o?n:"[Circular]"],h=e,p=1,d;return function(e,v){return t&&(v=t.call(this,e,v)),e!==""&&(h!==this&&(d=p-a.call(f,this)-1,p-=d,f.splice(p,f.length),u.splice(p-1,u.length),h=this),typeof v=="object"&&v?(a.call(f,v)<0&&f.push(h=v),p=f.length,d=a.call(l,v),d<0?(d=l.push(v)-1,o?(u.push((""+e).replace(s,r)),c[d]=n+u.join(n)):c[d]=c[0]):v=c[d]):typeof v=="string"&&o&&(v=v.replace(r,i).replace(n,r))),v}}function c(e,t){for(var r=0,i=t.length;r<i;e=e[t[r++].replace(o,n)]);return e}function h(e){return function(t,s){var o=typeof s=="string";return o&&s.charAt(0)===n?new f(s.slice(1)):(t===""&&(s=v(s,s,{})),o&&(s=s.replace(u,"$1"+n).replace(i,r)),e?e.call(this,t,s):s)}}function p(e,t,n){for(var r=0,i=t.length;r<i;r++)t[r]=v(e,t[r],n);return t}function d(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(t[r]=v(e,t[r],n));return t}function v(e,t,r){return t instanceof Array?p(e,t,r):t instanceof f?t.length?r.hasOwnProperty(t)?r[t]:r[t]=c(e,t.split(n)):e:t instanceof Object?d(e,t,r):t}function m(t,n,r,i){return e.stringify(t,l(t,n,!i),r)}function g(t,n){return e.parse(t,h(n))}var n="~",r="\\x"+("0"+n.charCodeAt(0).toString(16)).slice(-2),i="\\"+r,s=new t(r,"g"),o=new t(i,"g"),u=new t("(?:^|([^\\\\]))"+i),a=[].indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},f=String;return{stringify:m,parse:g}}(JSON,RegExp);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||function(e){"use strict";if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s="application/octet-stream",d=1e3*40,c=function(e){var t=function(){if(typeof e==="string"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,d)},l=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e["on"+t[r]];if(typeof o==="function"){try{o.call(e,n||e)}catch(a){u(a)}}}},p=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},v=function(t,u,d){if(!d){t=p(t)}var v=this,w=t.type,m=w===s,y,h=function(){l(v,"writestart progress write writeend".split(" "))},S=function(){if((f||m&&i)&&e.FileReader){var r=new FileReader;r.onloadend=function(){var t=f?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");var n=e.open(t,"_blank");if(!n)e.location.href=t;t=undefined;v.readyState=v.DONE;h()};r.readAsDataURL(t);v.readyState=v.INIT;return}if(!y){y=n().createObjectURL(t)}if(m){e.location.href=y}else{var o=e.open(y,"_blank");if(!o){e.location.href=y}}v.readyState=v.DONE;h();c(y)};v.readyState=v.INIT;if(o){y=n().createObjectURL(t);setTimeout(function(){r.href=y;r.download=u;a(r);h();c(y);v.readyState=v.DONE});return}S()},w=v.prototype,m=function(e,t,n){return new v(e,t||e.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||"download";if(!n){e=p(e)}return navigator.msSaveOrOpenBlob(e,t)}}w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return m}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!==null){define("FileSaver.js",function(){return saveAs})}

/*! (c) 2018, Andrea Giammarchi, (ISC) */
var Flatted=function(a,l){return{parse:function(n,t){var e=JSON.parse(n,i).map(f),r=e[0],u=t||s,c="object"==typeof r&&r?function u(c,f,n,i){return Object.keys(n).reduce(function(n,t){var e=n[t];if(e instanceof a){var r=c[e];"object"!=typeof r||f.has(r)?n[t]=i.call(n,t,r):(f.add(r),n[t]=i.call(n,t,u(c,f,r,i)))}else n[t]=i.call(n,t,e);return n},n)}(e,new Set,r,u):r;return u.call({"":c},"",c)},stringify:function(n,e,t){for(var r,u=new Map,c=[],f=[],i=e&&typeof e==typeof c?function(n,t){if(""===n||-1<e.indexOf(n))return t}:e||s,a=+p(u,c,i.call({"":n},"",n)),o=function(n,t){if(r)return r=!r,t;var e=i.call(this,n,t);switch(typeof e){case"object":if(null===e)return e;case l:return u.get(e)||p(u,c,e)}return e};a<c.length;a++)r=!0,f[a]=JSON.stringify(c[a],o,t);return"["+f.join(",")+"]"}};function s(n,t){return t}function p(n,t,e){var r=a(t.push(e)-1);return n.set(e,r),r}function f(n){return n instanceof a?a(n):n}function i(n,t){return typeof t===l?new a(t):t}}(String,"string");

/*
 *
 * Copyright (c) 2006-2014 Sam Collett (http://www.texotela.co.uk)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version 1.4.1
 * Demo: http://www.texotela.co.uk/code/jquery/numeric/
 *
 */
(function(factory){if(typeof define === 'function' && define.amd){define(['jquery'], factory);}else{factory(window.jQuery);}}(function($){$.fn.numeric=function(config,callback){if(typeof config==="boolean"){config={decimal:config,negative:true,decimalPlaces:-1}}config=config||{};if(typeof config.negative=="undefined"){config.negative=true}var decimal=config.decimal===false?"":config.decimal||".";var negative=config.negative===true?true:false;var decimalPlaces=typeof config.decimalPlaces=="undefined"?-1:config.decimalPlaces;callback=typeof callback=="function"?callback:function(){};return this.data("numeric.decimal",decimal).data("numeric.negative",negative).data("numeric.callback",callback).data("numeric.decimalPlaces",decimalPlaces).keypress($.fn.numeric.keypress).keyup($.fn.numeric.keyup).blur($.fn.numeric.blur)};$.fn.numeric.keypress=function(e){var decimal=$.data(this,"numeric.decimal");var negative=$.data(this,"numeric.negative");var decimalPlaces=$.data(this,"numeric.decimalPlaces");var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(key==13&&this.nodeName.toLowerCase()=="input"){return true}else if(key==13){return false}var allow=false;if(e.ctrlKey&&key==97||e.ctrlKey&&key==65){return true}if(e.ctrlKey&&key==120||e.ctrlKey&&key==88){return true}if(e.ctrlKey&&key==99||e.ctrlKey&&key==67){return true}if(e.ctrlKey&&key==122||e.ctrlKey&&key==90){return true}if(e.ctrlKey&&key==118||e.ctrlKey&&key==86||e.shiftKey&&key==45){return true}if(key<48||key>57){var value=$(this).val();if($.inArray("-",value.split(""))!==0&&negative&&key==45&&(value.length===0||parseInt($.fn.getSelectionStart(this),10)===0)){return true}if(decimal&&key==decimal.charCodeAt(0)&&$.inArray(decimal,value.split(""))!=-1){allow=false}if(key!=8&&key!=9&&key!=13&&key!=35&&key!=36&&key!=37&&key!=39&&key!=46){allow=false}else{if(typeof e.charCode!="undefined"){if(e.keyCode==e.which&&e.which!==0){allow=true;if(e.which==46){allow=false}}else if(e.keyCode!==0&&e.charCode===0&&e.which===0){allow=true}}}if(decimal&&key==decimal.charCodeAt(0)){if($.inArray(decimal,value.split(""))==-1){allow=true}else{allow=false}}}else{allow=true;if(decimal&&decimalPlaces>0){var dot=$.inArray(decimal,$(this).val().split(""));if(dot>=0&&$(this).val().length>dot+decimalPlaces){allow=false}}}return allow};$.fn.numeric.keyup=function(e){var val=$(this).val();if(val&&val.length>0){var carat=$.fn.getSelectionStart(this);var selectionEnd=$.fn.getSelectionEnd(this);var decimal=$.data(this,"numeric.decimal");var negative=$.data(this,"numeric.negative");var decimalPlaces=$.data(this,"numeric.decimalPlaces");if(decimal!==""&&decimal!==null){var dot=$.inArray(decimal,val.split(""));if(dot===0){this.value="0"+val;carat++;selectionEnd++}if(dot==1&&val.charAt(0)=="-"){this.value="-0"+val.substring(1);carat++;selectionEnd++}val=this.value}var validChars=[0,1,2,3,4,5,6,7,8,9,"-",decimal];var length=val.length;for(var i=length-1;i>=0;i--){var ch=val.charAt(i);if(i!==0&&ch=="-"){val=val.substring(0,i)+val.substring(i+1)}else if(i===0&&!negative&&ch=="-"){val=val.substring(1)}var validChar=false;for(var j=0;j<validChars.length;j++){if(ch==validChars[j]){validChar=true;break}}if(!validChar||ch==" "){val=val.substring(0,i)+val.substring(i+1)}}var firstDecimal=$.inArray(decimal,val.split(""));if(firstDecimal>0){for(var k=length-1;k>firstDecimal;k--){var chch=val.charAt(k);if(chch==decimal){val=val.substring(0,k)+val.substring(k+1)}}}if(decimal&&decimalPlaces>0){var dot=$.inArray(decimal,val.split(""));if(dot>=0){val=val.substring(0,dot+decimalPlaces+1);selectionEnd=Math.min(val.length,selectionEnd)}}this.value=val;$.fn.setSelection(this,[carat,selectionEnd])}};$.fn.numeric.blur=function(){var decimal=$.data(this,"numeric.decimal");var callback=$.data(this,"numeric.callback");var negative=$.data(this,"numeric.negative");var val=this.value;if(val!==""){var re=new RegExp("^" + (negative?"-?":"") + "\\d+$|^" + (negative?"-?":"") + "\\d*" + decimal + "\\d+$");if(!re.exec(val)){callback.apply(this)}}};$.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).data("numeric.decimalPlaces",null).unbind("keypress",$.fn.numeric.keypress).unbind("keyup",$.fn.numeric.keyup).unbind("blur",$.fn.numeric.blur)};$.fn.getSelectionStart=function(o){if(o.type==="number"){return undefined}else if(o.createTextRange&&document.selection){var r=document.selection.createRange().duplicate();r.moveEnd("character",o.value.length);if(r.text=="")return o.value.length;return Math.max(0,o.value.lastIndexOf(r.text))}else{try{return o.selectionStart}catch(e){return 0}}};$.fn.getSelectionEnd=function(o){if(o.type==="number"){return undefined}else if(o.createTextRange&&document.selection){var r=document.selection.createRange().duplicate();r.moveStart("character",-o.value.length);return r.text.length}else return o.selectionEnd};$.fn.setSelection=function(o,p){if(typeof p=="number"){p=[p,p]}if(p&&p.constructor==Array&&p.length==2){if(o.type==="number"){o.focus()}else if(o.createTextRange){var r=o.createTextRange();r.collapse(true);r.moveStart("character",p[0]);r.moveEnd("character",p[1]-p[0]);r.select()}else{o.focus();try{if(o.setSelectionRange){o.setSelectionRange(p[0],p[1])}}catch(e){}}}}}));
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=t()}}(function(){return function r(s,o,l){function h(e,t){if(!o[e]){if(!s[e]){var a="function"==typeof require&&require;if(!t&&a)return a(e,!0);if(d)return d(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var n=o[e]={exports:{}};s[e][0].call(n.exports,function(t){return h(s[e][1][t]||t)},n,n.exports,r,s,o,l)}return o[e].exports}for(var d="function"==typeof require&&require,t=0;t<l.length;t++)h(l[t]);return h}({1:[function(t,e,a){"use strict";var s=t("./zlib/deflate"),o=t("./utils/common"),l=t("./utils/strings"),n=t("./zlib/messages"),r=t("./zlib/zstream"),h=Object.prototype.toString,d=0,f=-1,_=0,u=8;function c(t){if(!(this instanceof c))return new c(t);this.options=o.assign({level:f,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==d)throw new Error(n[a]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(a=s.deflateSetDictionary(this.strm,i))!==d)throw new Error(n[a]);this._dict_set=!0}}function i(t,e){var a=new c(e);if(a.push(t,!0),a.err)throw a.msg||n[a.err];return a.result}c.prototype.push=function(t,e){var a,i,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?n.input=l.string2buf(t):"[object ArrayBuffer]"===h.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(r),n.next_out=0,n.avail_out=r),1!==(a=s.deflate(n,i))&&a!==d)return this.onEnd(a),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(l.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==a);return 4===i?(a=s.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===d):2!==i||(this.onEnd(d),!(n.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=c,a.deflate=i,a.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},a.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,a){"use strict";var f=t("./zlib/inflate"),_=t("./utils/common"),u=t("./utils/strings"),c=t("./zlib/constants"),i=t("./zlib/messages"),n=t("./zlib/zstream"),r=t("./zlib/gzheader"),b=Object.prototype.toString;function s(t){if(!(this instanceof s))return new s(t);this.options=_.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var a=f.inflateInit2(this.strm,e.windowBits);if(a!==c.Z_OK)throw new Error(i[a]);if(this.header=new r,f.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=u.string2buf(e.dictionary):"[object ArrayBuffer]"===b.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=f.inflateSetDictionary(this.strm,e.dictionary))!==c.Z_OK))throw new Error(i[a])}function o(t,e){var a=new s(e);if(a.push(t,!0),a.err)throw a.msg||i[a.err];return a.result}s.prototype.push=function(t,e){var a,i,n,r,s,o=this.strm,l=this.options.chunkSize,h=this.options.dictionary,d=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?o.input=u.binstring2buf(t):"[object ArrayBuffer]"===b.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new _.Buf8(l),o.next_out=0,o.avail_out=l),(a=f.inflate(o,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&h&&(a=f.inflateSetDictionary(this.strm,h)),a===c.Z_BUF_ERROR&&!0===d&&(a=c.Z_OK,d=!1),a!==c.Z_STREAM_END&&a!==c.Z_OK)return this.onEnd(a),!(this.ended=!0);o.next_out&&(0!==o.avail_out&&a!==c.Z_STREAM_END&&(0!==o.avail_in||i!==c.Z_FINISH&&i!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(n=u.utf8border(o.output,o.next_out),r=o.next_out-n,s=u.buf2string(o.output,n),o.next_out=r,o.avail_out=l-r,r&&_.arraySet(o.output,o.output,n,r,0),this.onData(s)):this.onData(_.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(d=!0)}while((0<o.avail_in||0===o.avail_out)&&a!==c.Z_STREAM_END);return a===c.Z_STREAM_END&&(i=c.Z_FINISH),i===c.Z_FINISH?(a=f.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===c.Z_OK):i!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(o.avail_out=0))},s.prototype.onData=function(t){this.chunks.push(t)},s.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=_.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Inflate=s,a.inflate=o,a.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},a.ungzip=o},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,a){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(t){for(var e,a,i=Array.prototype.slice.call(arguments,1);i.length;){var n=i.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)e=n,a=r,Object.prototype.hasOwnProperty.call(e,a)&&(t[r]=n[r])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(a,a+i),n);else for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){var e,a,i,n,r,s;for(e=i=0,a=t.length;e<a;e++)i+=t[e].length;for(s=new Uint8Array(i),e=n=0,a=t.length;e<a;e++)r=t[e],s.set(r,n),n+=r.length;return s}},r={arraySet:function(t,e,a,i,n){for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,n)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(i)},{}],4:[function(t,e,a){"use strict";var l=t("./common"),n=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var h=new l.Buf8(256),i=0;i<256;i++)h[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function d(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&n))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var a="",i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a}h[254]=h[254]=1,a.string2buf=function(t){var e,a,i,n,r,s=t.length,o=0;for(n=0;n<s;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new l.Buf8(o),n=r=0;r<o;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<s&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),a<128?e[r++]=a:(a<2048?e[r++]=192|a>>>6:(a<65536?e[r++]=224|a>>>12:(e[r++]=240|a>>>18,e[r++]=128|a>>>12&63),e[r++]=128|a>>>6&63),e[r++]=128|63&a);return e},a.buf2binstring=function(t){return d(t,t.length)},a.binstring2buf=function(t){for(var e=new l.Buf8(t.length),a=0,i=e.length;a<i;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,i,n,r,s=e||t.length,o=new Array(2*s);for(a=i=0;a<s;)if((n=t[a++])<128)o[i++]=n;else if(4<(r=h[n]))o[i++]=65533,a+=r-1;else{for(n&=2===r?31:3===r?15:7;1<r&&a<s;)n=n<<6|63&t[a++],r--;1<r?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return d(o,i)},a.utf8border=function(t,e){var a;for((e=e||t.length)>t.length&&(e=t.length),a=e-1;0<=a&&128==(192&t[a]);)a--;return a<0?e:0===a?e:a+h[t[a]]>e?a:e}},{"./common":3}],5:[function(t,e,a){"use strict";e.exports=function(t,e,a,i){for(var n=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){for(a-=s=2e3<a?2e3:a;r=r+(n=n+e[i++]|0)|0,--s;);n%=65521,r%=65521}return n|r<<16|0}},{}],6:[function(t,e,a){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,a){"use strict";var o=function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}();e.exports=function(t,e,a,i){var n=o,r=i+a;t^=-1;for(var s=i;s<r;s++)t=t>>>8^n[255&(t^e[s])];return-1^t}},{}],8:[function(t,e,a){"use strict";var l,_=t("../utils/common"),h=t("./trees"),u=t("./adler32"),c=t("./crc32"),i=t("./messages"),d=0,f=4,b=0,g=-2,m=-1,w=4,n=2,p=8,v=9,r=286,s=30,o=19,k=2*r+1,y=15,x=3,z=258,B=z+x+1,S=42,E=113,A=1,Z=2,R=3,C=4;function N(t,e){return t.msg=i[e],e}function O(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function I(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(_.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function U(t,e){h._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,I(t.strm)}function T(t,e){t.pending_buf[t.pending++]=e}function F(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var a,i,n=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-B?t.strstart-(t.w_size-B):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+z,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(a=e)+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do{}while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(i=z-(_-r),r=_-z,s<i){if(t.match_start=e,o<=(s=i))break;u=h[r+s-1],c=h[r+s]}}}while((e=f[e&d])>l&&0!=--n);return s<=t.lookahead?s:t.lookahead}function H(t){var e,a,i,n,r,s,o,l,h,d,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-B)){for(_.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=a=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--a;);for(e=a=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--a;);n+=f}if(0===t.strm.avail_in)break;if(s=t.strm,o=t.window,l=t.strstart+t.lookahead,h=n,d=void 0,d=s.avail_in,h<d&&(d=h),a=0===d?0:(s.avail_in-=d,_.arraySet(o,s.input,s.next_in,d,l),1===s.state.wrap?s.adler=u(s.adler,o,d,l):2===s.state.wrap&&(s.adler=c(s.adler,o,d,l)),s.next_in+=d,s.total_in+=d,d),t.lookahead+=a,t.lookahead+t.insert>=x)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+x-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<B&&0!==t.strm.avail_in)}function j(t,e){for(var a,i;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a)),t.match_length>=x)if(i=h._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function K(t,e){for(var a,i,n;;){if(t.lookahead<B){if(H(t),t.lookahead<B&&e===d)return A;if(0===t.lookahead)break}if(a=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-B&&(t.match_length=L(t,a),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-x,i=h._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(U(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((i=h._tr_tally(t,0,t.window[t.strstart-1]))&&U(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=h._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}function M(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}function P(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new _.Buf16(2*k),this.dyn_dtree=new _.Buf16(2*(2*s+1)),this.bl_tree=new _.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new _.Buf16(y+1),this.heap=new _.Buf16(2*r+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new _.Buf16(2*r+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?S:E,t.adler=2===e.wrap?0:1,e.last_flush=d,h._tr_init(e),b):N(t,g)}function q(t){var e,a=Y(t);return a===b&&((e=t.state).window_size=2*e.w_size,D(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0),a}function G(t,e,a,i,n,r){if(!t)return g;var s=1;if(e===m&&(e=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),n<1||v<n||a!==p||i<8||15<i||e<0||9<e||r<0||w<r)return N(t,g);8===i&&(i=9);var o=new P;return(t.state=o).strm=t,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new _.Buf8(2*o.w_size),o.head=new _.Buf16(o.hash_size),o.prev=new _.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new _.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=a,q(t)}l=[new M(0,0,0,0,function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(H(t),0===t.lookahead&&e===d)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,U(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-B&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):(t.strstart>t.block_start&&(U(t,!1),t.strm.avail_out),A)}),new M(4,4,8,4,j),new M(4,5,16,8,j),new M(4,6,32,32,j),new M(4,4,16,16,K),new M(8,16,32,32,K),new M(8,16,128,128,K),new M(8,32,128,256,K),new M(32,128,258,1024,K),new M(32,258,258,4096,K)],a.deflateInit=function(t,e){return G(t,e,p,15,8,0)},a.deflateInit2=G,a.deflateReset=q,a.deflateResetKeep=Y,a.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,b):g},a.deflate=function(t,e){var a,i,n,r;if(!t||!t.state||5<e||e<0)return t?N(t,g):g;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==f)return N(t,0===t.avail_out?-5:g);if(i.strm=t,a=i.last_flush,i.last_flush=e,i.status===S)if(2===i.wrap)t.adler=0,T(i,31),T(i,139),T(i,8),i.gzhead?(T(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),T(i,255&i.gzhead.time),T(i,i.gzhead.time>>8&255),T(i,i.gzhead.time>>16&255),T(i,i.gzhead.time>>24&255),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(T(i,255&i.gzhead.extra.length),T(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=c(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(T(i,0),T(i,0),T(i,0),T(i,0),T(i,0),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,3),i.status=E);else{var s=p+(i.w_bits-8<<4)<<8;s|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=E,F(i,s),0!==i.strstart&&(F(i,t.adler>>>16),F(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending!==i.pending_buf_size));)T(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),I(t),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}T(i,r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(t.adler=c(t.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&I(t),i.pending+2<=i.pending_buf_size&&(T(i,255&t.adler),T(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(I(t),0===t.avail_out)return i.last_flush=-1,b}else if(0===t.avail_in&&O(e)<=O(a)&&e!==f)return N(t,-5);if(666===i.status&&0!==t.avail_in)return N(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==d&&666!==i.status){var o=2===i.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(H(t),0===t.lookahead)){if(e===d)return A;break}if(t.match_length=0,a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):3===i.strategy?function(t,e){for(var a,i,n,r,s=t.window;;){if(t.lookahead<=z){if(H(t),t.lookahead<=z&&e===d)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=s[n=t.strstart-1])===s[++n]&&i===s[++n]&&i===s[++n]){r=t.strstart+z;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<r);t.match_length=z-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(a=h._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=h._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(U(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(U(t,!0),0===t.strm.avail_out?R:C):t.last_lit&&(U(t,!1),0===t.strm.avail_out)?A:Z}(i,e):l[i.level].func(i,e);if(o!==R&&o!==C||(i.status=666),o===A||o===R)return 0===t.avail_out&&(i.last_flush=-1),b;if(o===Z&&(1===e?h._tr_align(i):5!==e&&(h._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),I(t),0===t.avail_out))return i.last_flush=-1,b}return e!==f?b:i.wrap<=0?1:(2===i.wrap?(T(i,255&t.adler),T(i,t.adler>>8&255),T(i,t.adler>>16&255),T(i,t.adler>>24&255),T(i,255&t.total_in),T(i,t.total_in>>8&255),T(i,t.total_in>>16&255),T(i,t.total_in>>24&255)):(F(i,t.adler>>>16),F(i,65535&t.adler)),I(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?b:1)},a.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==S&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?N(t,g):(t.state=null,e===E?N(t,-3):b):g},a.deflateSetDictionary=function(t,e){var a,i,n,r,s,o,l,h,d=e.length;if(!t||!t.state)return g;if(2===(r=(a=t.state).wrap)||1===r&&a.status!==S||a.lookahead)return g;for(1===r&&(t.adler=u(t.adler,e,d,0)),a.wrap=0,d>=a.w_size&&(0===r&&(D(a.head),a.strstart=0,a.block_start=0,a.insert=0),h=new _.Buf8(a.w_size),_.arraySet(h,e,d-a.w_size,a.w_size,0),e=h,d=a.w_size),s=t.avail_in,o=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,H(a);a.lookahead>=x;){for(i=a.strstart,n=a.lookahead-(x-1);a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+x-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++,--n;);a.strstart=i,a.lookahead=x-1,H(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=x-1,a.match_available=0,t.next_in=o,t.input=l,t.avail_in=s,a.wrap=r,b},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,a){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,a){"use strict";e.exports=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S;a=t.state,i=t.next_in,B=t.input,n=i+(t.avail_in-5),r=t.next_out,S=t.output,s=r-(e-t.avail_out),o=r+(t.avail_out-257),l=a.dmax,h=a.wsize,d=a.whave,f=a.wnext,_=a.window,u=a.hold,c=a.bits,b=a.lencode,g=a.distcode,m=(1<<a.lenbits)-1,w=(1<<a.distbits)-1;t:do{c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=b[u&m];e:for(;;){if(u>>>=v=p>>>24,c-=v,0===(v=p>>>16&255))S[r++]=65535&p;else{if(!(16&v)){if(0==(64&v)){p=b[(65535&p)+(u&(1<<v)-1)];continue e}if(32&v){a.mode=12;break t}t.msg="invalid literal/length code",a.mode=30;break t}k=65535&p,(v&=15)&&(c<v&&(u+=B[i++]<<c,c+=8),k+=u&(1<<v)-1,u>>>=v,c-=v),c<15&&(u+=B[i++]<<c,c+=8,u+=B[i++]<<c,c+=8),p=g[u&w];a:for(;;){if(u>>>=v=p>>>24,c-=v,!(16&(v=p>>>16&255))){if(0==(64&v)){p=g[(65535&p)+(u&(1<<v)-1)];continue a}t.msg="invalid distance code",a.mode=30;break t}if(y=65535&p,c<(v&=15)&&(u+=B[i++]<<c,(c+=8)<v&&(u+=B[i++]<<c,c+=8)),l<(y+=u&(1<<v)-1)){t.msg="invalid distance too far back",a.mode=30;break t}if(u>>>=v,c-=v,(v=r-s)<y){if(d<(v=y-v)&&a.sane){t.msg="invalid distance too far back",a.mode=30;break t}if(z=_,(x=0)===f){if(x+=h-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}}else if(f<v){if(x+=h+f-v,(v-=f)<k){for(k-=v;S[r++]=_[x++],--v;);if(x=0,f<k){for(k-=v=f;S[r++]=_[x++],--v;);x=r-y,z=S}}}else if(x+=f-v,v<k){for(k-=v;S[r++]=_[x++],--v;);x=r-y,z=S}for(;2<k;)S[r++]=z[x++],S[r++]=z[x++],S[r++]=z[x++],k-=3;k&&(S[r++]=z[x++],1<k&&(S[r++]=z[x++]))}else{for(x=r-y;S[r++]=S[x++],S[r++]=S[x++],S[r++]=S[x++],2<(k-=3););k&&(S[r++]=S[x++],1<k&&(S[r++]=S[x++]))}break}}break}}while(i<n&&r<o);i-=k=c>>3,u&=(1<<(c-=k<<3))-1,t.next_in=i,t.next_out=r,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=r<o?o-r+257:257-(r-o),a.hold=u,a.bits=c}},{}],11:[function(t,e,a){"use strict";var Z=t("../utils/common"),R=t("./adler32"),C=t("./crc32"),N=t("./inffast"),O=t("./inftrees"),D=1,I=2,U=0,T=-2,F=1,i=852,n=592;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Z.Buf16(320),this.work=new Z.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=F,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Z.Buf32(i),e.distcode=e.distdyn=new Z.Buf32(n),e.sane=1,e.back=-1,U):T}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):T}function l(t,e){var a,i;return t&&t.state?(i=t.state,e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?T:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,o(t))):T}function h(t,e){var a,i;return t?(i=new r,(t.state=i).window=null,(a=l(t,e))!==U&&(t.state=null),a):T}var d,f,_=!0;function H(t){if(_){var e;for(d=new Z.Buf32(512),f=new Z.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(O(D,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;O(I,t.lens,0,32,f,0,t.work,{bits:5}),_=!1}t.lencode=d,t.lenbits=9,t.distcode=f,t.distbits=5}function j(t,e,a,i){var n,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Z.Buf8(r.wsize)),i>=r.wsize?(Z.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(i<(n=r.wsize-r.wnext)&&(n=i),Z.arraySet(r.window,e,a-i,n,r.wnext),(i-=n)?(Z.arraySet(r.window,e,a-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}a.inflateReset=o,a.inflateReset2=l,a.inflateResetKeep=s,a.inflateInit=function(t){return h(t,15)},a.inflateInit2=h,a.inflate=function(t,e){var a,i,n,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S=0,E=new Z.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;12===(a=t.state).mode&&(a.mode=13),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,f=o,_=l,x=U;t:for(;;)switch(a.mode){case F:if(0===a.wrap){a.mode=13;break}for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(2&a.wrap&&35615===h){E[a.check=0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0),d=h=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=30;break}if(8!=(15&h)){t.msg="unknown compression method",a.mode=30;break}if(d-=4,y=8+(15&(h>>>=4)),0===a.wbits)a.wbits=y;else if(y>a.wbits){t.msg="invalid window size",a.mode=30;break}a.dmax=1<<y,t.adler=a.check=1,a.mode=512&h?10:12,d=h=0;break;case 2:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.flags=h,8!=(255&a.flags)){t.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=3;case 3:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,E[2]=h>>>16&255,E[3]=h>>>24&255,a.check=C(a.check,E,4,0)),d=h=0,a.mode=4;case 4:for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0,a.mode=5;case 5:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&(E[0]=255&h,E[1]=h>>>8&255,a.check=C(a.check,E,2,0)),d=h=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(o<(u=a.length)&&(u=o),u&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),Z.arraySet(a.head.extra,i,r,u,y)),512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,a.length-=u),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===o)break t;for(u=0;y=i[r+u++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y)),y&&u<o;);if(512&a.flags&&(a.check=C(a.check,i,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=30;break}d=h=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=12;break;case 10:for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}t.adler=a.check=L(h),d=h=0,a.mode=11;case 11:if(0===a.havedict)return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,2;t.adler=a.check=1,a.mode=12;case 12:if(5===e||6===e)break t;case 13:if(a.last){h>>>=7&d,d-=7&d,a.mode=27;break}for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}switch(a.last=1&h,d-=1,3&(h>>>=1)){case 0:a.mode=14;break;case 1:if(H(a),a.mode=20,6!==e)break;h>>>=2,d-=2;break t;case 2:a.mode=17;break;case 3:t.msg="invalid block type",a.mode=30}h>>>=2,d-=2;break;case 14:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&h,d=h=0,a.mode=15,6===e)break t;case 15:a.mode=16;case 16:if(u=a.length){if(o<u&&(u=o),l<u&&(u=l),0===u)break t;Z.arraySet(n,i,r,u,s),o-=u,r+=u,l-=u,s+=u,a.length-=u;break}a.mode=12;break;case 17:for(;d<14;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,286<a.nlen||30<a.ndist){t.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.lens[A[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[A[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,z={bits:a.lenbits},x=O(0,a.lens,0,19,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(w<16)h>>>=g,d-=g,a.lens[a.have++]=w;else{if(16===w){for(B=g+2;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h>>>=g,d-=g,0===a.have){t.msg="invalid bit length repeat",a.mode=30;break}y=a.lens[a.have-1],u=3+(3&h),h>>>=2,d-=2}else if(17===w){for(B=g+3;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=3+(7&(h>>>=g)),h>>>=3,d-=3}else{for(B=g+7;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}d-=g,y=0,u=11+(127&(h>>>=g)),h>>>=7,d-=7}if(a.have+u>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=30;break}for(;u--;)a.lens[a.have++]=y}}if(30===a.mode)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,z={bits:a.lenbits},x=O(D,a.lens,0,a.nlen,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,z={bits:a.distbits},x=O(I,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,z),a.distbits=z.bits,x){t.msg="invalid distances set",a.mode=30;break}if(a.mode=20,6===e)break t;case 20:a.mode=21;case 21:if(6<=o&&258<=l){t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,N(t,_),s=t.next_out,n=t.output,l=t.avail_out,r=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;m=(S=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(m&&0==(240&m)){for(p=g,v=m,k=w;m=(S=a.lencode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,a.length=w,0===m){a.mode=26;break}if(32&m){a.back=-1,a.mode=12;break}if(64&m){t.msg="invalid literal/length code",a.mode=30;break}a.extra=15&m,a.mode=22;case 22:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;m=(S=a.distcode[h&(1<<a.distbits)-1])>>>16&255,w=65535&S,!((g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(0==(240&m)){for(p=g,v=m,k=w;m=(S=a.distcode[k+((h&(1<<p+v)-1)>>p)])>>>16&255,w=65535&S,!(p+(g=S>>>24)<=d);){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=g,d-=g,a.back+=g,64&m){t.msg="invalid distance code",a.mode=30;break}a.offset=w,a.extra=15&m,a.mode=24;case 24:if(a.extra){for(B=a.extra;d<B;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(0===l)break t;if(u=_-l,a.offset>u){if((u=a.offset-u)>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=30;break}u>a.wnext?(u-=a.wnext,c=a.wsize-u):c=a.wnext-u,u>a.length&&(u=a.length),b=a.window}else b=n,c=s-a.offset,u=a.length;for(l<u&&(u=l),l-=u,a.length-=u;n[s++]=b[c++],--u;);0===a.length&&(a.mode=21);break;case 26:if(0===l)break t;n[s++]=a.length,l--,a.mode=21;break;case 27:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[r++]<<d,d+=8}if(_-=l,t.total_out+=_,a.total+=_,_&&(t.adler=a.check=a.flags?C(a.check,n,_,s-_):R(a.check,n,_,s-_)),_=l,(a.flags?h:L(h))!==a.check){t.msg="incorrect data check",a.mode=30;break}d=h=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[r++]<<d,d+=8}if(h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=30;break}d=h=0}a.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return T}return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||_!==t.avail_out&&a.mode<30&&(a.mode<27||4!==e))&&j(t,t.output,t.next_out,_-t.avail_out)?(a.mode=31,-4):(f-=t.avail_in,_-=t.avail_out,t.total_in+=f,t.total_out+=_,a.total+=_,a.wrap&&_&&(t.adler=a.check=a.flags?C(a.check,n,_,t.next_out-_):R(a.check,n,_,t.next_out-_)),t.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===f&&0===_||4===e)&&x===U&&(x=-5),x)},a.inflateEnd=function(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,U},a.inflateGetHeader=function(t,e){var a;return t&&t.state?0==(2&(a=t.state).wrap)?T:((a.head=e).done=!1,U):T},a.inflateSetDictionary=function(t,e){var a,i=e.length;return t&&t.state?0!==(a=t.state).wrap&&11!==a.mode?T:11===a.mode&&R(1,e,i,0)!==a.check?-3:j(t,e,i,i)?(a.mode=31,-4):(a.havedict=1,U):T},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,a){"use strict";var D=t("../utils/common"),I=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],F=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,a,i,n,r,s,o){var l,h,d,f,_,u,c,b,g,m=o.bits,w=0,p=0,v=0,k=0,y=0,x=0,z=0,B=0,S=0,E=0,A=null,Z=0,R=new D.Buf16(16),C=new D.Buf16(16),N=null,O=0;for(w=0;w<=15;w++)R[w]=0;for(p=0;p<i;p++)R[e[a+p]]++;for(y=m,k=15;1<=k&&0===R[k];k--);if(k<y&&(y=k),0===k)return n[r++]=20971520,n[r++]=20971520,o.bits=1,0;for(v=1;v<k&&0===R[v];v++);for(y<v&&(y=v),w=B=1;w<=15;w++)if(B<<=1,(B-=R[w])<0)return-1;if(0<B&&(0===t||1!==k))return-1;for(C[1]=0,w=1;w<15;w++)C[w+1]=C[w]+R[w];for(p=0;p<i;p++)0!==e[a+p]&&(s[C[e[a+p]]++]=p);if(0===t?(A=N=s,u=19):1===t?(A=I,Z-=257,N=U,O-=257,u=256):(A=T,N=F,u=-1),w=v,_=r,z=p=E=0,d=-1,f=(S=1<<(x=y))-1,1===t&&852<S||2===t&&592<S)return 1;for(;;){for(c=w-z,s[p]<u?(b=0,g=s[p]):s[p]>u?(b=N[O+s[p]],g=A[Z+s[p]]):(b=96,g=0),l=1<<w-z,v=h=1<<x;n[_+(E>>z)+(h-=l)]=c<<24|b<<16|g|0,0!==h;);for(l=1<<w-1;E&l;)l>>=1;if(0!==l?(E&=l-1,E+=l):E=0,p++,0==--R[w]){if(w===k)break;w=e[a+s[p]]}if(y<w&&(E&f)!==d){for(0===z&&(z=y),_+=v,B=1<<(x=w-z);x+z<k&&!((B-=R[x+z])<=0);)x++,B<<=1;if(S+=1<<x,1===t&&852<S||2===t&&592<S)return 1;n[d=E&f]=y<<24|x<<16|_-r|0}}return 0!==E&&(n[_+E]=w-z<<24|64<<16|0),o.bits=y,0}},{"../utils/common":3}],13:[function(t,e,a){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,a){"use strict";var l=t("../utils/common"),o=0,h=1;function i(t){for(var e=t.length;0<=--e;)t[e]=0}var d=0,s=29,f=256,_=f+1+s,u=30,c=19,g=2*_+1,m=15,n=16,b=7,w=256,p=16,v=17,k=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(_+2));i(S);var E=new Array(2*u);i(E);var A=new Array(512);i(A);var Z=new Array(256);i(Z);var R=new Array(s);i(R);var C,N,O,D=new Array(u);function I(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function U(t){return t<256?A[t]:A[256+(t>>>7)]}function T(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,a){t.bi_valid>n-a?(t.bi_buf|=e<<t.bi_valid&65535,T(t,t.bi_buf),t.bi_buf=e>>n-t.bi_valid,t.bi_valid+=a-n):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function L(t,e,a){F(t,a[2*e],a[2*e+1])}function H(t,e){for(var a=0;a|=1&t,t>>>=1,a<<=1,0<--e;);return a>>>1}function j(t,e,a){var i,n,r=new Array(m+1),s=0;for(i=1;i<=m;i++)r[i]=s=s+a[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=H(r[o]++,o))}}function K(t){var e;for(e=0;e<_;e++)t.dyn_ltree[2*e]=0;for(e=0;e<u;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?T(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,e,a,i){var n=2*e,r=2*a;return t[n]<t[r]||t[n]===t[r]&&i[e]<=i[a]}function Y(t,e,a){for(var i=t.heap[a],n=a<<1;n<=t.heap_len&&(n<t.heap_len&&P(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!P(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i}function q(t,e,a){var i,n,r,s,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(r=Z[n])+f+1,e),0!==(s=y[r])&&F(t,n-=R[r],s),L(t,r=U(--i),a),0!==(s=x[r])&&F(t,i-=D[r],s)),o<t.last_lit;);L(t,w,e)}function G(t,e){var a,i,n,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=g,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)r[2*(n=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=h,a=t.heap_len>>1;1<=a;a--)Y(t,r,a);for(n=l;a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Y(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,r[2*n]=r[2*a]+r[2*i],t.depth[n]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,r[2*a+1]=r[2*i+1]=n,t.heap[1]=n++,Y(t,r,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,i,n,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,b=0;for(r=0;r<=m;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<g;a++)c<(r=l[2*l[2*(i=t.heap[a])+1]+1]+1)&&(r=c,b++),l[2*i+1]=r,h<i||(t.bl_count[r]++,s=0,u<=i&&(s=_[i-u]),o=l[2*i],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==b){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,b-=2}while(0<b);for(r=c;0!==r;r--)for(i=t.bl_count[r];0!==i;)h<(n=t.heap[--a])||(l[2*n+1]!==r&&(t.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),i--)}}(t,e),j(r,h,t.bl_count)}function X(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=s,s=e[2*(i+1)+1],++o<l&&n===s||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[2*p]++):o<=10?t.bl_tree[2*v]++:t.bl_tree[2*k]++,r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4))}function W(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),i=0;i<=a;i++)if(n=s,s=e[2*(i+1)+1],!(++o<l&&n===s)){if(o<h)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==r&&(L(t,n,t.bl_tree),o--),L(t,p,t.bl_tree),F(t,o-3,2)):o<=10?(L(t,v,t.bl_tree),F(t,o-3,3)):(L(t,k,t.bl_tree),F(t,o-11,7));r=n,(o=0)===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4)}}i(D);var J=!1;function Q(t,e,a,i){var n,r,s,o;F(t,(d<<1)+(i?1:0),3),r=e,s=a,o=!0,M(n=t),o&&(T(n,s),T(n,~s)),l.arraySet(n.pending_buf,n.window,r,s,n.pending),n.pending+=s}a._tr_init=function(t){J||(function(){var t,e,a,i,n,r=new Array(m+1);for(i=a=0;i<s-1;i++)for(R[i]=a,t=0;t<1<<y[i];t++)Z[a++]=i;for(Z[a-1]=i,i=n=0;i<16;i++)for(D[i]=n,t=0;t<1<<x[i];t++)A[n++]=i;for(n>>=7;i<u;i++)for(D[i]=n<<7,t=0;t<1<<x[i]-7;t++)A[256+n++]=i;for(e=0;e<=m;e++)r[e]=0;for(t=0;t<=143;)S[2*t+1]=8,t++,r[8]++;for(;t<=255;)S[2*t+1]=9,t++,r[9]++;for(;t<=279;)S[2*t+1]=7,t++,r[7]++;for(;t<=287;)S[2*t+1]=8,t++,r[8]++;for(j(S,_+1,r),t=0;t<u;t++)E[2*t+1]=5,E[2*t]=H(t,5);C=new I(S,y,f+1,_,m),N=new I(E,x,0,u,m),O=new I(new Array(0),z,0,c,b)}(),J=!0),t.l_desc=new r(t.dyn_ltree,C),t.d_desc=new r(t.dyn_dtree,N),t.bl_desc=new r(t.bl_tree,O),t.bi_buf=0,t.bi_valid=0,K(t)},a._tr_stored_block=Q,a._tr_flush_block=function(t,e,a,i){var n,r,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return h;for(e=32;e<f;e++)if(0!==t.dyn_ltree[2*e])return h;return o}(t)),G(t,t.l_desc),G(t,t.d_desc),s=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),G(t,t.bl_desc),e=c-1;3<=e&&0===t.bl_tree[2*B[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=n&&(n=r)):n=r=a+5,a+4<=n&&-1!==e?Q(t,e,a,i):4===t.strategy||r===n?(F(t,2+(i?1:0),3),q(t,S,E)):(F(t,4+(i?1:0),3),function(t,e,a,i){var n;for(F(t,e-257,5),F(t,a-1,5),F(t,i-4,4),n=0;n<i;n++)F(t,t.bl_tree[2*B[n]+1],3);W(t,t.dyn_ltree,e-1),W(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),q(t,t.dyn_ltree,t.dyn_dtree)),K(t),i&&M(t)},a._tr_tally=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(Z[a]+f+1)]++,t.dyn_dtree[2*U(e)]++),t.last_lit===t.lit_bufsize-1},a._tr_align=function(t){var e;F(t,2,3),L(t,w,S),16===(e=t).bi_valid?(T(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":3}],15:[function(t,e,a){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(t,e,a){"use strict";var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});

/*!
	Papa Parse
	v4.3.2
	https://github.com/mholt/PapaParse
*/
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.Papa=b()}(this,function(){"use strict";function a(a,b){b=b||{};var c=b.dynamicTyping||!1;if(r(c)&&(b.dynamicTypingFunction=c,c={}),b.dynamicTyping=c,b.worker&&z.WORKERS_SUPPORTED){var h=k();return h.userStep=b.step,h.userChunk=b.chunk,h.userComplete=b.complete,h.userError=b.error,b.step=r(b.step),b.chunk=r(b.chunk),b.complete=r(b.complete),b.error=r(b.error),delete b.worker,void h.postMessage({input:a,config:b,workerId:h.id})}var i=null;return"string"==typeof a?i=b.download?new d(b):new f(b):a.readable===!0&&r(a.read)&&r(a.on)?i=new g(b):(t.File&&a instanceof File||a instanceof Object)&&(i=new e(b)),i.stream(a)}function b(a,b){function c(){"object"==typeof b&&("string"==typeof b.delimiter&&1===b.delimiter.length&&z.BAD_DELIMITERS.indexOf(b.delimiter)===-1&&(j=b.delimiter),("boolean"==typeof b.quotes||b.quotes instanceof Array)&&(h=b.quotes),"string"==typeof b.newline&&(k=b.newline),"string"==typeof b.quoteChar&&(l=b.quoteChar),"boolean"==typeof b.header&&(i=b.header))}function d(a){if("object"!=typeof a)return[];var b=[];for(var c in a)b.push(c);return b}function e(a,b){var c="";"string"==typeof a&&(a=JSON.parse(a)),"string"==typeof b&&(b=JSON.parse(b));var d=a instanceof Array&&a.length>0,e=!(b[0]instanceof Array);if(d&&i){for(var g=0;g<a.length;g++)g>0&&(c+=j),c+=f(a[g],g);b.length>0&&(c+=k)}for(var h=0;h<b.length;h++){for(var l=d?a.length:b[h].length,m=0;m<l;m++){m>0&&(c+=j);var n=d&&e?a[m]:m;c+=f(b[h][n],m)}h<b.length-1&&(c+=k)}return c}function f(a,b){if("undefined"==typeof a||null===a)return"";a=a.toString().replace(m,l+l);var c="boolean"==typeof h&&h||h instanceof Array&&h[b]||g(a,z.BAD_DELIMITERS)||a.indexOf(j)>-1||" "===a.charAt(0)||" "===a.charAt(a.length-1);return c?l+a+l:a}function g(a,b){for(var c=0;c<b.length;c++)if(a.indexOf(b[c])>-1)return!0;return!1}var h=!1,i=!0,j=",",k="\r\n",l='"';c();var m=new RegExp(l,"g");if("string"==typeof a&&(a=JSON.parse(a)),a instanceof Array){if(!a.length||a[0]instanceof Array)return e(null,a);if("object"==typeof a[0])return e(d(a[0]),a)}else if("object"==typeof a)return"string"==typeof a.data&&(a.data=JSON.parse(a.data)),a.data instanceof Array&&(a.fields||(a.fields=a.meta&&a.meta.fields),a.fields||(a.fields=a.data[0]instanceof Array?a.fields:d(a.data[0])),a.data[0]instanceof Array||"object"==typeof a.data[0]||(a.data=[a.data])),e(a.fields||[],a.data||[]);throw"exception: Unable to serialize unrecognized input"}function c(a){function b(a){var b=p(a);b.chunkSize=parseInt(b.chunkSize),a.step||a.chunk||(b.chunkSize=null),this._handle=new h(b),this._handle.streamer=this,this._config=b}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},b.call(this,a),this.parseChunk=function(a){if(this.isFirstChunk&&r(this._config.beforeFirstChunk)){var b=this._config.beforeFirstChunk(a);void 0!==b&&(a=b)}this.isFirstChunk=!1;var c=this._partialLine+a;this._partialLine="";var d=this._handle.parse(c,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var e=d.meta.cursor;this._finished||(this._partialLine=c.substring(e-this._baseIndex),this._baseIndex=e),d&&d.data&&(this._rowCount+=d.data.length);var f=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(v)t.postMessage({results:d,workerId:z.WORKER_ID,finished:f});else if(r(this._config.chunk)){if(this._config.chunk(d,this._handle),this._paused)return;d=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(d.data),this._completeResults.errors=this._completeResults.errors.concat(d.errors),this._completeResults.meta=d.meta),!f||!r(this._config.complete)||d&&d.meta.aborted||this._config.complete(this._completeResults,this._input),f||d&&d.meta.paused||this._nextChunk(),d}},this._sendError=function(a){r(this._config.error)?this._config.error(a):v&&this._config.error&&t.postMessage({workerId:z.WORKER_ID,error:a,finished:!1})}}function d(a){function b(a){var b=a.getResponseHeader("Content-Range");return null===b?-1:parseInt(b.substr(b.lastIndexOf("/")+1))}a=a||{},a.chunkSize||(a.chunkSize=z.RemoteChunkSize),c.call(this,a);var d;u?this._nextChunk=function(){this._readChunk(),this._chunkLoaded()}:this._nextChunk=function(){this._readChunk()},this.stream=function(a){this._input=a,this._nextChunk()},this._readChunk=function(){if(this._finished)return void this._chunkLoaded();if(d=new XMLHttpRequest,this._config.withCredentials&&(d.withCredentials=this._config.withCredentials),u||(d.onload=q(this._chunkLoaded,this),d.onerror=q(this._chunkError,this)),d.open("GET",this._input,!u),this._config.downloadRequestHeaders){var a=this._config.downloadRequestHeaders;for(var b in a)d.setRequestHeader(b,a[b])}if(this._config.chunkSize){var c=this._start+this._config.chunkSize-1;d.setRequestHeader("Range","bytes="+this._start+"-"+c),d.setRequestHeader("If-None-Match","webkit-no-cache")}try{d.send()}catch(a){this._chunkError(a.message)}u&&0===d.status?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){if(4==d.readyState){if(d.status<200||d.status>=400)return void this._chunkError();this._finished=!this._config.chunkSize||this._start>b(d),this.parseChunk(d.responseText)}},this._chunkError=function(a){var b=d.statusText||a;this._sendError(b)}}function e(a){a=a||{},a.chunkSize||(a.chunkSize=z.LocalChunkSize),c.call(this,a);var b,d,e="undefined"!=typeof FileReader;this.stream=function(a){this._input=a,d=a.slice||a.webkitSlice||a.mozSlice,e?(b=new FileReader,b.onload=q(this._chunkLoaded,this),b.onerror=q(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var a=this._input;if(this._config.chunkSize){var c=Math.min(this._start+this._config.chunkSize,this._input.size);a=d.call(a,this._start,c)}var f=b.readAsText(a,this._config.encoding);e||this._chunkLoaded({target:{result:f}})},this._chunkLoaded=function(a){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(a.target.result)},this._chunkError=function(){this._sendError(b.error)}}function f(a){a=a||{},c.call(this,a);var b,d;this.stream=function(a){return b=a,d=a,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var a=this._config.chunkSize,b=a?d.substr(0,a):d;return d=a?d.substr(a):"",this._finished=!d,this.parseChunk(b)}}}function g(a){a=a||{},c.call(this,a);var b=[],d=!0;this.stream=function(a){this._input=a,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._nextChunk=function(){b.length?this.parseChunk(b.shift()):d=!0},this._streamData=q(function(a){try{b.push("string"==typeof a?a:a.toString(this._config.encoding)),d&&(d=!1,this.parseChunk(b.shift()))}catch(a){this._streamError(a)}},this),this._streamError=q(function(a){this._streamCleanUp(),this._sendError(a.message)},this),this._streamEnd=q(function(){this._streamCleanUp(),this._finished=!0,this._streamData("")},this),this._streamCleanUp=q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function h(a){function b(){if(x&&o&&(l("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+z.DefaultDelimiter+"'"),o=!1),a.skipEmptyLines)for(var b=0;b<x.data.length;b++)1===x.data[b].length&&""===x.data[b][0]&&x.data.splice(b--,1);return c()&&d(),g()}function c(){return a.header&&0===w.length}function d(){if(x){for(var a=0;c()&&a<x.data.length;a++)for(var b=0;b<x.data[a].length;b++)w.push(x.data[a][b]);x.data.splice(0,1)}}function e(b){return a.dynamicTypingFunction&&void 0===a.dynamicTyping[b]&&(a.dynamicTyping[b]=a.dynamicTypingFunction(b)),(a.dynamicTyping[b]||a.dynamicTyping)===!0}function f(a,b){return e(a)?"true"===b||"TRUE"===b||"false"!==b&&"FALSE"!==b&&k(b):b}function g(){if(!x||!a.header&&!a.dynamicTyping)return x;for(var b=0;b<x.data.length;b++){for(var c=a.header?{}:[],d=0;d<x.data[b].length;d++){var e=d,g=x.data[b][d];a.header&&(e=d>=w.length?"__parsed_extra":w[d]),g=f(e,g),"__parsed_extra"===e?(c[e]=c[e]||[],c[e].push(g)):c[e]=g}x.data[b]=c,a.header&&(d>w.length?l("FieldMismatch","TooManyFields","Too many fields: expected "+w.length+" fields but parsed "+d,b):d<w.length&&l("FieldMismatch","TooFewFields","Too few fields: expected "+w.length+" fields but parsed "+d,b))}return a.header&&x.meta&&(x.meta.fields=w),x}function h(b,c){for(var d,e,f,g=[",","\t","|",";",z.RECORD_SEP,z.UNIT_SEP],h=0;h<g.length;h++){var j=g[h],k=0,l=0;f=void 0;for(var m=new i({delimiter:j,newline:c,preview:10}).parse(b),n=0;n<m.data.length;n++){var o=m.data[n].length;l+=o,"undefined"!=typeof f?o>1&&(k+=Math.abs(o-f),f=o):f=o}m.data.length>0&&(l/=m.data.length),("undefined"==typeof e||k<e)&&l>1.99&&(e=k,d=j)}return a.delimiter=d,{successful:!!d,bestDelimiter:d}}function j(a){a=a.substr(0,1048576);var b=a.split("\r"),c=a.split("\n"),d=c.length>1&&c[0].length<b[0].length;if(1===b.length||d)return"\n";for(var e=0,f=0;f<b.length;f++)"\n"===b[f][0]&&e++;return e>=b.length/2?"\r\n":"\r"}function k(a){var b=q.test(a);return b?parseFloat(a):a}function l(a,b,c,d){x.errors.push({type:a,code:b,message:c,row:d})}var m,n,o,q=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,s=this,t=0,u=!1,v=!1,w=[],x={data:[],errors:[],meta:{}};if(r(a.step)){var y=a.step;a.step=function(d){if(x=d,c())b();else{if(b(),0===x.data.length)return;t+=d.data.length,a.preview&&t>a.preview?n.abort():y(x,s)}}}this.parse=function(c,d,e){if(a.newline||(a.newline=j(c)),o=!1,a.delimiter)r(a.delimiter)&&(a.delimiter=a.delimiter(c),x.meta.delimiter=a.delimiter);else{var f=h(c,a.newline);f.successful?a.delimiter=f.bestDelimiter:(o=!0,a.delimiter=z.DefaultDelimiter),x.meta.delimiter=a.delimiter}var g=p(a);return a.preview&&a.header&&g.preview++,m=c,n=new i(g),x=n.parse(m,d,e),b(),u?{meta:{paused:!0}}:x||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,n.abort(),m=m.substr(n.getCharIndex())},this.resume=function(){u=!1,s.streamer.parseChunk(m)},this.aborted=function(){return v},this.abort=function(){v=!0,n.abort(),x.meta.aborted=!0,r(a.complete)&&a.complete(x),m=""}}function i(a){a=a||{};var b=a.delimiter,c=a.newline,d=a.comments,e=a.step,f=a.preview,g=a.fastMode,h=a.quoteChar||'"';if(("string"!=typeof b||z.BAD_DELIMITERS.indexOf(b)>-1)&&(b=","),d===b)throw"Comment character same as delimiter";d===!0?d="#":("string"!=typeof d||z.BAD_DELIMITERS.indexOf(d)>-1)&&(d=!1),"\n"!=c&&"\r"!=c&&"\r\n"!=c&&(c="\n");var i=0,j=!1;this.parse=function(a,k,l){function m(a){x.push(a),A=i}function n(b){return l?p():("undefined"==typeof b&&(b=a.substr(i)),z.push(b),i=s,m(z),w&&q(),p())}function o(b){i=b,m(z),z=[],E=a.indexOf(c,i)}function p(a){return{data:x,errors:y,meta:{delimiter:b,linebreak:c,aborted:j,truncated:!!a,cursor:A+(k||0)}}}function q(){e(p()),x=[],y=[]}if("string"!=typeof a)throw"Input must be a string";var s=a.length,t=b.length,u=c.length,v=d.length,w=r(e);i=0;var x=[],y=[],z=[],A=0;if(!a)return p();if(g||g!==!1&&a.indexOf(h)===-1){for(var B=a.split(c),C=0;C<B.length;C++){var z=B[C];if(i+=z.length,C!==B.length-1)i+=c.length;else if(l)return p();if(!d||z.substr(0,v)!==d){if(w){if(x=[],m(z.split(b)),q(),j)return p()}else m(z.split(b));if(f&&C>=f)return x=x.slice(0,f),p(!0)}}return p()}for(var D=a.indexOf(b,i),E=a.indexOf(c,i),F=new RegExp(h+h,"g");;)if(a[i]!==h)if(d&&0===z.length&&a.substr(i,v)===d){if(E===-1)return p();i=E+u,E=a.indexOf(c,i),D=a.indexOf(b,i)}else if(D!==-1&&(D<E||E===-1))z.push(a.substring(i,D)),i=D+t,D=a.indexOf(b,i);else{if(E===-1)break;if(z.push(a.substring(i,E)),o(E+u),w&&(q(),j))return p();if(f&&x.length>=f)return p(!0)}else{var G=i;for(i++;;){var G=a.indexOf(h,G+1);if(G===-1)return l||y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:i}),n();if(G===s-1){var H=a.substring(i,G).replace(F,h);return n(H)}if(a[G+1]!==h){if(a[G+1]===b){z.push(a.substring(i,G).replace(F,h)),i=G+1+t,D=a.indexOf(b,i),E=a.indexOf(c,i);break}if(a.substr(G+1,u)===c){if(z.push(a.substring(i,G).replace(F,h)),o(G+1+u),D=a.indexOf(b,i),w&&(q(),j))return p();if(f&&x.length>=f)return p(!0);break}}else G++}}return n()},this.abort=function(){j=!0},this.getCharIndex=function(){return i}}function j(){var a=document.getElementsByTagName("script");return a.length?a[a.length-1].src:""}function k(){if(!z.WORKERS_SUPPORTED)return!1;if(!w&&null===z.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var a=z.SCRIPT_PATH||s;a+=(a.indexOf("?")!==-1?"&":"?")+"papaworker";var b=new t.Worker(a);return b.onmessage=l,b.id=y++,x[b.id]=b,b}function l(a){var b=a.data,c=x[b.workerId],d=!1;if(b.error)c.userError(b.error,b.file);else if(b.results&&b.results.data){var e=function(){d=!0,m(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},f={abort:e,pause:n,resume:n};if(r(c.userStep)){for(var g=0;g<b.results.data.length&&(c.userStep({data:[b.results.data[g]],errors:b.results.errors,meta:b.results.meta},f),!d);g++);delete b.results}else r(c.userChunk)&&(c.userChunk(b.results,f,b.file),delete b.results)}b.finished&&!d&&m(b.workerId,b.results)}function m(a,b){var c=x[a];r(c.userComplete)&&c.userComplete(b),c.terminate(),delete x[a]}function n(){throw"Not implemented."}function o(a){var b=a.data;if("undefined"==typeof z.WORKER_ID&&b&&(z.WORKER_ID=b.workerId),"string"==typeof b.input)t.postMessage({workerId:z.WORKER_ID,results:z.parse(b.input,b.config),finished:!0});else if(t.File&&b.input instanceof File||b.input instanceof Object){var c=z.parse(b.input,b.config);c&&t.postMessage({workerId:z.WORKER_ID,results:c,finished:!0})}}function p(a){if("object"!=typeof a)return a;var b=a instanceof Array?[]:{};for(var c in a)b[c]=p(a[c]);return b}function q(a,b){return function(){a.apply(b,arguments)}}function r(a){return"function"==typeof a}var s,t=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:{}}(),u=!t.document&&!!t.postMessage,v=u&&/(\?|&)papaworker(=|&|$)/.test(t.location.search),w=!1,x={},y=0,z={};if(z.parse=a,z.unparse=b,z.RECORD_SEP=String.fromCharCode(30),z.UNIT_SEP=String.fromCharCode(31),z.BYTE_ORDER_MARK="\ufeff",z.BAD_DELIMITERS=["\r","\n",'"',z.BYTE_ORDER_MARK],z.WORKERS_SUPPORTED=!u&&!!t.Worker,z.SCRIPT_PATH=null,z.LocalChunkSize=10485760,z.RemoteChunkSize=5242880,z.DefaultDelimiter=",",z.Parser=i,z.ParserHandle=h,z.NetworkStreamer=d,z.FileStreamer=e,z.StringStreamer=f,z.ReadableStreamStreamer=g,t.jQuery){var A=t.jQuery;A.fn.parse=function(a){function b(){if(0===f.length)return void(r(a.complete)&&a.complete());var b=f[0];if(r(a.before)){var e=a.before(b.file,b.inputElem);if("object"==typeof e){if("abort"===e.action)return void c("AbortError",b.file,b.inputElem,e.reason);if("skip"===e.action)return void d();"object"==typeof e.config&&(b.instanceConfig=A.extend(b.instanceConfig,e.config))}else if("skip"===e)return void d()}var g=b.instanceConfig.complete;b.instanceConfig.complete=function(a){r(g)&&g(a,b.file,b.inputElem),d()},z.parse(b.file,b.instanceConfig)}function c(b,c,d,e){r(a.error)&&a.error({name:b},c,d,e)}function d(){f.splice(0,1),b()}var e=a.config||{},f=[];return this.each(function(a){var b="INPUT"===A(this).prop("tagName").toUpperCase()&&"file"===A(this).attr("type").toLowerCase()&&t.FileReader;if(!b||!this.files||0===this.files.length)return!0;for(var c=0;c<this.files.length;c++)f.push({file:this.files[c],inputElem:this,instanceConfig:A.extend({},e)})}),b(),this}}return v?t.onmessage=o:z.WORKERS_SUPPORTED&&(s=j(),document.body?document.addEventListener("DOMContentLoaded",function(){w=!0},!0):w=!0),d.prototype=Object.create(c.prototype),d.prototype.constructor=d,e.prototype=Object.create(c.prototype),e.prototype.constructor=e,f.prototype=Object.create(f.prototype),f.prototype.constructor=f,g.prototype=Object.create(c.prototype),g.prototype.constructor=g,z});
!function (t, e) { if ("object" == typeof exports && "object" == typeof module) module.exports = e(require("jQuery")); else if ("function" == typeof define && define.amd) define(["jQuery"], e); else { var n = "object" == typeof exports ? e(require("jQuery")) : e(t.jQuery); for (var o in n) ("object" == typeof exports ? exports : t)[o] = n[o] } }(self, function (t) { return (() => { "use strict"; var e = { 9770: (t, e, n) => { var o = n(1145), i = n.n(o); i().summernote = i().summernote || { lang: {} }, i().extend(i().summernote.lang, { "en-US": { font: { bold: "Bold", italic: "Italic", underline: "Underline", clear: "Remove Font Style", height: "Line Height", name: "Font Family", strikethrough: "Strikethrough", subscript: "Subscript", superscript: "Superscript", size: "Font Size", sizeunit: "Font Size Unit" }, image: { image: "Picture", insert: "Insert Image", resizeFull: "Resize full", resizeHalf: "Resize half", resizeQuarter: "Resize quarter", resizeNone: "Original size", floatLeft: "Float Left", floatRight: "Float Right", floatNone: "Remove float", shapeRounded: "Shape: Rounded", shapeCircle: "Shape: Circle", shapeThumbnail: "Shape: Thumbnail", shapeNone: "Shape: None", dragImageHere: "Drag image or text here", dropImage: "Drop image or Text", selectFromFiles: "Select from files", maximumFileSize: "Maximum file size", maximumFileSizeError: "Maximum file size exceeded.", url: "Image URL", remove: "Remove Image", original: "Original" }, video: { video: "Video", videoLink: "Video Link", insert: "Insert Video", url: "Video URL", providers: "(YouTube, Google Drive, Vimeo, Vine, Instagram, DailyMotion, Youku, Peertube)" }, link: { link: "Link", insert: "Insert Link", unlink: "Unlink", edit: "Edit", textToDisplay: "Text to display", url: "To what URL should this link go?", openInNewWindow: "Open in new window", useProtocol: "Use default protocol" }, table: { table: "Table", addRowAbove: "Add row above", addRowBelow: "Add row below", addColLeft: "Add column left", addColRight: "Add column right", delRow: "Delete row", delCol: "Delete column", delTable: "Delete table" }, hr: { insert: "Insert Horizontal Rule" }, style: { style: "Style", p: "Normal", blockquote: "Quote", pre: "Code", h1: "Header 1", h2: "Header 2", h3: "Header 3", h4: "Header 4", h5: "Header 5", h6: "Header 6" }, lists: { unordered: "Unordered list", ordered: "Ordered list" }, options: { help: "Help", fullscreen: "Full Screen", codeview: "Code View" }, paragraph: { paragraph: "Paragraph", outdent: "Outdent", indent: "Indent", left: "Align left", center: "Align center", right: "Align right", justify: "Justify full" }, color: { recent: "Recent Color", more: "More Color", background: "Background Color", foreground: "Text Color", transparent: "Transparent", setTransparent: "Set transparent", reset: "Reset", resetToDefault: "Reset to default", cpSelect: "Select" }, shortcut: { shortcuts: "Keyboard shortcuts", close: "Close", textFormatting: "Text formatting", action: "Action", paragraphFormatting: "Paragraph formatting", documentStyle: "Document Style", extraKeys: "Extra keys" }, help: { escape: "Escape", insertParagraph: "Insert Paragraph", undo: "Undo the last command", redo: "Redo the last command", tab: "Tab", untab: "Untab", bold: "Set a bold style", italic: "Set a italic style", underline: "Set a underline style", strikethrough: "Set a strikethrough style", removeFormat: "Clean a style", justifyLeft: "Set left align", justifyCenter: "Set center align", justifyRight: "Set right align", justifyFull: "Set full align", insertUnorderedList: "Toggle unordered list", insertOrderedList: "Toggle ordered list", outdent: "Outdent on current paragraph", indent: "Indent on current paragraph", formatPara: "Change current block's format as a paragraph(P tag)", formatH1: "Change current block's format as H1", formatH2: "Change current block's format as H2", formatH3: "Change current block's format as H3", formatH4: "Change current block's format as H4", formatH5: "Change current block's format as H5", formatH6: "Change current block's format as H6", insertHorizontalRule: "Insert horizontal rule", "linkDialog.show": "Show Link Dialog" }, history: { undo: "Undo", redo: "Redo" }, specialChar: { specialChar: "SPECIAL CHARACTERS", select: "Select Special characters" }, output: { noSelection: "No Selection Made!" } } }) }, 1145: e => { e.exports = t } }, n = {}; function o(t) { var i = n[t]; if (void 0 !== i) return i.exports; var r = n[t] = { exports: {} }; return e[t](r, r.exports, o), r.exports } o.n = (t => { var e = t && t.__esModule ? () => t.default : () => t; return o.d(e, { a: e }), e }), o.d = ((t, e) => { for (var n in e) o.o(e, n) && !o.o(t, n) && Object.defineProperty(t, n, { enumerable: !0, get: e[n] }) }), o.o = ((t, e) => Object.prototype.hasOwnProperty.call(t, e)), o.r = (t => { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }); var i = {}; return (() => { o.r(i); var t = o(1145), e = o.n(t), n = (o(9770), ["sans-serif", "serif", "monospace", "cursive", "fantasy"]); function r(t) { return -1 === e().inArray(t.toLowerCase(), n) ? "'".concat(t, "'") : t } var a, s = navigator.userAgent, l = /MSIE|Trident/i.test(s); if (l) { var c = /MSIE (\d+[.]\d+)/.exec(s); c && (a = parseFloat(c[1])), (c = /Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(s)) && (a = parseFloat(c[1])) } var u = /Edge\/\d+/.test(s), d = "ontouchstart" in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0, h = l ? "DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted" : "input"; const f = { isMac: navigator.appVersion.indexOf("Mac") > -1, isMSIE: l, isEdge: u, isFF: !u && /firefox/i.test(s), isPhantom: /PhantomJS/i.test(s), isWebkit: !u && /webkit/i.test(s), isChrome: !u && /chrome/i.test(s), isSafari: !u && /safari/i.test(s) && !/chrome/i.test(s), browserVersion: a, isSupportTouch: d, isFontInstalled: function (t) { var e = "Comic Sans MS" === t ? "Courier New" : "Comic Sans MS", n = document.createElement("canvas").getContext("2d"); n.font = "200px '" + e + "'"; var o = n.measureText("mmmmmmmmmmwwwww").width; return n.font = "200px " + r(t) + ', "' + e + '"', o !== n.measureText("mmmmmmmmmmwwwww").width }, isW3CRangeSupport: !!document.createRange, inputEventName: h, genericFontFamilies: n, validFontName: r }; var p = 0; const m = { eq: function (t) { return function (e) { return t === e } }, eq2: function (t, e) { return t === e }, peq2: function (t) { return function (e, n) { return e[t] === n[t] } }, ok: function () { return !0 }, fail: function () { return !1 }, self: function (t) { return t }, not: function (t) { return function () { return !t.apply(t, arguments) } }, and: function (t, e) { return function (n) { return t(n) && e(n) } }, invoke: function (t, e) { return function () { return t[e].apply(t, arguments) } }, resetUniqueId: function () { p = 0 }, uniqueId: function (t) { var e = ++p + ""; return t ? t + e : e }, rect2bnd: function (t) { var n = e()(document); return { top: t.top + n.scrollTop(), left: t.left + n.scrollLeft(), width: t.right - t.left, height: t.bottom - t.top } }, invertObject: function (t) { var e = {}; for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[t[n]] = n); return e }, namespaceToCamel: function (t, e) { return (e = e || "") + t.split(".").map(function (t) { return t.substring(0, 1).toUpperCase() + t.substring(1) }).join("") }, debounce: function (t, e, n) { var o; return function () { var i = this, r = arguments, a = n && !o; clearTimeout(o), o = setTimeout(function () { o = null, n || t.apply(i, r) }, e), a && t.apply(i, r) } }, isValidUrl: function (t) { return /[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi.test(t) } }; function v(t) { return t[0] } function g(t) { return t[t.length - 1] } function b(t) { return t.slice(1) } function y(t, e) { if (t && t.length && e) { if (t.indexOf) return -1 !== t.indexOf(e); if (t.contains) return t.contains(e) } return !1 } const k = { head: v, last: g, initial: function (t) { return t.slice(0, t.length - 1) }, tail: b, prev: function (t, e) { if (t && t.length && e) { var n = t.indexOf(e); return -1 === n ? null : t[n - 1] } return null }, next: function (t, e) { if (t && t.length && e) { var n = t.indexOf(e); return -1 === n ? null : t[n + 1] } return null }, find: function (t, e) { for (var n = 0, o = t.length; n < o; n++) { var i = t[n]; if (e(i)) return i } }, contains: y, all: function (t, e) { for (var n = 0, o = t.length; n < o; n++)if (!e(t[n])) return !1; return !0 }, sum: function (t, e) { return e = e || m.self, t.reduce(function (t, n) { return t + e(n) }, 0) }, from: function (t) { for (var e = [], n = t.length, o = -1; ++o < n;)e[o] = t[o]; return e }, isEmpty: function (t) { return !t || !t.length }, clusterBy: function (t, e) { return t.length ? b(t).reduce(function (t, n) { var o = g(t); return e(g(o), n) ? o[o.length] = n : t[t.length] = [n], t }, [[v(t)]]) : [] }, compact: function (t) { for (var e = [], n = 0, o = t.length; n < o; n++)t[n] && e.push(t[n]); return e }, unique: function (t) { for (var e = [], n = 0, o = t.length; n < o; n++)y(e, t[n]) || e.push(t[n]); return e } }; var w = String.fromCharCode(160); function C(t) { return t && e()(t).hasClass("note-editable") } function x(t) { return t = t.toUpperCase(), function (e) { return e && e.nodeName.toUpperCase() === t } } function S(t) { return t && 3 === t.nodeType } function T(t) { return t && /^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^AUDIO|^VIDEO|^EMBED/.test(t.nodeName.toUpperCase()) } function E(t) { return !C(t) && (t && /^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase())) } var I = x("PRE"), $ = x("LI"); var N = x("TABLE"), P = x("DATA"); function R(t) { return !(H(t) || L(t) || A(t) || E(t) || N(t) || D(t) || P(t)) } function L(t) { return t && /^UL|^OL/.test(t.nodeName.toUpperCase()) } var A = x("HR"); function F(t) { return t && /^TD|^TH/.test(t.nodeName.toUpperCase()) } var D = x("BLOCKQUOTE"); function H(t) { return F(t) || D(t) || C(t) } var z = x("A"); var B = x("BODY"); var M = f.isMSIE && f.browserVersion < 11 ? "&nbsp;" : "<br>"; function O(t) { return S(t) ? t.nodeValue.length : t ? t.childNodes.length : 0 } function U(t) { var e = O(t); return 0 === e || (!S(t) && 1 === e && t.innerHTML === M || !(!k.all(t.childNodes, S) || "" !== t.innerHTML)) } function j(t) { T(t) || O(t) || (t.innerHTML = M) } function W(t, e) { for (; t;) { if (e(t)) return t; if (C(t)) break; t = t.parentNode } return null } function K(t, e) { e = e || m.fail; var n = []; return W(t, function (t) { return C(t) || n.push(t), e(t) }), n } function V(t, e) { e = e || m.fail; for (var n = []; t && !e(t);)n.push(t), t = t.nextSibling; return n } function q(t, e) { var n = e.nextSibling, o = e.parentNode; return n ? o.insertBefore(t, n) : o.appendChild(t), t } function G(t, n) { return e().each(n, function (e, n) { t.appendChild(n) }), t } function _(t) { return 0 === t.offset } function Y(t) { return t.offset === O(t.node) } function Q(t) { return _(t) || Y(t) } function Z(t, e) { for (; t && t !== e;) { if (0 !== J(t)) return !1; t = t.parentNode } return !0 } function X(t, e) { if (!e) return !1; for (; t && t !== e;) { if (J(t) !== O(t.parentNode) - 1) return !1; t = t.parentNode } return !0 } function J(t) { for (var e = 0; t = t.previousSibling;)e += 1; return e } function tt(t) { return !!(t && t.childNodes && t.childNodes.length) } function et(t, e) { var n, o; if (0 === t.offset) { if (C(t.node)) return null; n = t.node.parentNode, o = J(t.node) } else tt(t.node) ? o = O(n = t.node.childNodes[t.offset - 1]) : (n = t.node, o = e ? 0 : t.offset - 1); return { node: n, offset: o } } function nt(t, e) { var n, o; if (O(t.node) === t.offset) { if (C(t.node)) return null; var i = function t(e) { if (!e.nextSibling) return; if (e.parent !== e.nextSibling.parent) return; return S(e.nextSibling) ? e.nextSibling : t(e.nextSibling) }(t.node); i ? (n = i, o = 0) : (n = t.node.parentNode, o = J(t.node) + 1) } else tt(t.node) ? (n = t.node.childNodes[t.offset], o = 0) : (n = t.node, o = e ? O(t.node) : t.offset + 1); return { node: n, offset: o } } function ot(t, e) { var n, o = 0; if (U(t.node)) return null === t.node ? null : { node: n = t.node.nextSibling, offset: o = 0 }; if (O(t.node) === t.offset) { if (C(t.node)) return null; n = t.node.parentNode, o = J(t.node) + 1, C(n) && (n = t.node.nextSibling, o = 0) } else if (tt(t.node)) { if (o = 0, U(n = t.node.childNodes[t.offset])) return U(t.node.nextSibling) ? null : { node: t.node.nextSibling, offset: o } } else if (n = t.node, o = e ? O(t.node) : t.offset + 1, U(n)) return null; return { node: n, offset: o } } function it(t, e) { return t.node === e.node && t.offset === e.offset } function rt(t, e) { var n = e && e.isSkipPaddingBlankHTML, o = e && e.isNotSplitEdgePoint, i = e && e.isDiscardEmptySplits; if (i && (n = !0), Q(t) && (S(t.node) || o)) { if (_(t)) return t.node; if (Y(t)) return t.node.nextSibling } if (S(t.node)) return t.node.splitText(t.offset); var r = t.node.childNodes[t.offset], a = q(t.node.cloneNode(!1), t.node); return G(a, V(r)), n || (j(t.node), j(a)), i && (U(t.node) && lt(t.node), U(a)) ? (lt(a), t.node.nextSibling) : a } function at(t, e, n) { var o = K(e.node, m.eq(t)); return o.length ? 1 === o.length ? rt(e, n) : o.reduce(function (t, o) { return t === e.node && (t = rt(e, n)), rt({ node: o, offset: t ? J(t) : O(o) }, n) }) : null } function st(t) { return document.createElement(t) } function lt(t, e) { if (t && t.parentNode) { if (t.removeNode) return t.removeNode(e); var n = t.parentNode; if (!e) { for (var o = [], i = 0, r = t.childNodes.length; i < r; i++)o.push(t.childNodes[i]); for (var a = 0, s = o.length; a < s; a++)n.insertBefore(o[a], t) } n.removeChild(t) } } var ct = x("TEXTAREA"); function ut(t, e) { var n = ct(t[0]) ? t.val() : t.html(); return e ? n.replace(/[\n\r]/g, "") : n } const dt = { NBSP_CHAR: w, ZERO_WIDTH_NBSP_CHAR: "\ufeff", blank: M, emptyPara: "<p>".concat(M, "</p>"), makePredByNodeName: x, isEditable: C, isControlSizing: function (t) { return t && e()(t).hasClass("note-control-sizing") }, isText: S, isElement: function (t) { return t && 1 === t.nodeType }, isVoid: T, isPara: E, isPurePara: function (t) { return E(t) && !$(t) }, isHeading: function (t) { return t && /^H[1-7]/.test(t.nodeName.toUpperCase()) }, isInline: R, isBlock: m.not(R), isBodyInline: function (t) { return R(t) && !W(t, E) }, isBody: B, isParaInline: function (t) { return R(t) && !!W(t, E) }, isPre: I, isList: L, isTable: N, isData: P, isCell: F, isBlockquote: D, isBodyContainer: H, isAnchor: z, isDiv: x("DIV"), isLi: $, isBR: x("BR"), isSpan: x("SPAN"), isB: x("B"), isU: x("U"), isS: x("S"), isI: x("I"), isImg: x("IMG"), isTextarea: ct, deepestChildIsEmpty: function (t) { do { if (null === t.firstElementChild || "" === t.firstElementChild.innerHTML) break } while (t = t.firstElementChild); return U(t) }, isEmpty: U, isEmptyAnchor: m.and(z, U), isClosestSibling: function (t, e) { return t.nextSibling === e || t.previousSibling === e }, withClosestSiblings: function (t, e) { e = e || m.ok; var n = []; return t.previousSibling && e(t.previousSibling) && n.push(t.previousSibling), n.push(t), t.nextSibling && e(t.nextSibling) && n.push(t.nextSibling), n }, nodeLength: O, isLeftEdgePoint: _, isRightEdgePoint: Y, isEdgePoint: Q, isLeftEdgeOf: Z, isRightEdgeOf: X, isLeftEdgePointOf: function (t, e) { return _(t) && Z(t.node, e) }, isRightEdgePointOf: function (t, e) { return Y(t) && X(t.node, e) }, prevPoint: et, nextPoint: nt, nextPointWithEmptyNode: ot, isSamePoint: it, isVisiblePoint: function (t) { if (S(t.node) || !tt(t.node) || U(t.node)) return !0; var e = t.node.childNodes[t.offset - 1], n = t.node.childNodes[t.offset]; return !((e && !T(e) || n && !T(n)) && !N(n)) }, prevPointUntil: function (t, e) { for (; t;) { if (e(t)) return t; t = et(t) } return null }, nextPointUntil: function (t, e) { for (; t;) { if (e(t)) return t; t = nt(t) } return null }, isCharPoint: function (t) { if (!S(t.node)) return !1; var e = t.node.nodeValue.charAt(t.offset - 1); return e && " " !== e && e !== w }, isSpacePoint: function (t) { if (!S(t.node)) return !1; var e = t.node.nodeValue.charAt(t.offset - 1); return " " === e || e === w }, walkPoint: function (t, e, n, o) { for (var i = t; i && (n(i), !it(i, e));)i = ot(i, o && t.node !== i.node && e.node !== i.node) }, ancestor: W, singleChildAncestor: function (t, e) { for (t = t.parentNode; t && 1 === O(t);) { if (e(t)) return t; if (C(t)) break; t = t.parentNode } return null }, listAncestor: K, lastAncestor: function (t, e) { var n = K(t); return k.last(n.filter(e)) }, listNext: V, listPrev: function (t, e) { e = e || m.fail; for (var n = []; t && !e(t);)n.push(t), t = t.previousSibling; return n }, listDescendant: function (t, e) { var n = []; return e = e || m.ok, function o(i) { t !== i && e(i) && n.push(i); for (var r = 0, a = i.childNodes.length; r < a; r++)o(i.childNodes[r]) }(t), n }, commonAncestor: function (t, e) { for (var n = K(t), o = e; o; o = o.parentNode)if (n.indexOf(o) > -1) return o; return null }, wrap: function (t, n) { var o = t.parentNode, i = e()("<" + n + ">")[0]; return o.insertBefore(i, t), i.appendChild(t), i }, insertAfter: q, appendChildNodes: G, position: J, hasChildren: tt, makeOffsetPath: function (t, e) { return K(e, m.eq(t)).map(J).reverse() }, fromOffsetPath: function (t, e) { for (var n = t, o = 0, i = e.length; o < i; o++)n = n.childNodes.length <= e[o] ? n.childNodes[n.childNodes.length - 1] : n.childNodes[e[o]]; return n }, splitTree: at, splitPoint: function (t, e) { var n, o, i = e ? E : H, r = K(t.node, i), a = k.last(r) || t.node; i(a) ? (n = r[r.length - 2], o = a) : o = (n = a).parentNode; var s = n && at(n, t, { isSkipPaddingBlankHTML: e, isNotSplitEdgePoint: e }); return s || o !== t.node || (s = t.node.childNodes[t.offset]), { rightNode: s, container: o } }, create: st, createText: function (t) { return document.createTextNode(t) }, remove: lt, removeWhile: function (t, e) { for (; t && !C(t) && e(t);) { var n = t.parentNode; lt(t), t = n } }, replace: function (t, e) { if (t.nodeName.toUpperCase() === e.toUpperCase()) return t; var n = st(e); return t.style.cssText && (n.style.cssText = t.style.cssText), G(n, k.from(t.childNodes)), q(n, t), lt(t), n }, html: function (t, e) { var n = ut(t); e && (n = (n = n.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g, function (t, e, n) { n = n.toUpperCase(); var o = /^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n) && !!e, i = /^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n); return t + (o || i ? "\n" : "") })).trim()); return n }, value: ut, posFromPlaceholder: function (t) { var n = e()(t), o = n.offset(), i = n.outerHeight(!0); return { left: o.left, top: o.top + i } }, attachEvents: function (t, e) { Object.keys(e).forEach(function (n) { t.on(n, e[n]) }) }, detachEvents: function (t, e) { Object.keys(e).forEach(function (n) { t.off(n, e[n]) }) }, isCustomStyleTag: function (t) { return t && !S(t) && k.contains(t.classList, "note-styletag") } }; function ht(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var ft = function () { function t(n, o) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.$note = n, this.memos = {}, this.modules = {}, this.layoutInfo = {}, this.options = e().extend(!0, {}, o), e().summernote.ui = e().summernote.ui_template(this.options), this.ui = e().summernote.ui, this.initialize() } var n, o, i; return n = t, (o = [{ key: "initialize", value: function () { return this.layoutInfo = this.ui.createLayout(this.$note), this._initialize(), this.$note.hide(), this } }, { key: "destroy", value: function () { this._destroy(), this.$note.removeData("summernote"), this.ui.removeLayout(this.$note, this.layoutInfo) } }, { key: "reset", value: function () { var t = this.isDisabled(); this.code(dt.emptyPara), this._destroy(), this._initialize(), t && this.disable() } }, { key: "_initialize", value: function () { var t = this; this.options.id = m.uniqueId(e().now()), this.options.container = this.options.container || this.layoutInfo.editor; var n = e().extend({}, this.options.buttons); Object.keys(n).forEach(function (e) { t.memo("button." + e, n[e]) }); var o = e().extend({}, this.options.modules, e().summernote.plugins || {}); Object.keys(o).forEach(function (e) { t.module(e, o[e], !0) }), Object.keys(this.modules).forEach(function (e) { t.initializeModule(e) }) } }, { key: "_destroy", value: function () { var t = this; Object.keys(this.modules).reverse().forEach(function (e) { t.removeModule(e) }), Object.keys(this.memos).forEach(function (e) { t.removeMemo(e) }), this.triggerEvent("destroy", this) } }, { key: "code", value: function (t) { var e = this.invoke("codeview.isActivated"); if (void 0 === t) return this.invoke("codeview.sync"), e ? this.layoutInfo.codable.val() : this.layoutInfo.editable.html(); e ? this.invoke("codeview.sync", t) : this.layoutInfo.editable.html(t), this.$note.val(t), this.triggerEvent("change", t, this.layoutInfo.editable) } }, { key: "isDisabled", value: function () { return "false" === this.layoutInfo.editable.attr("contenteditable") } }, { key: "enable", value: function () { this.layoutInfo.editable.attr("contenteditable", !0), this.invoke("toolbar.activate", !0), this.triggerEvent("disable", !1), this.options.editing = !0 } }, { key: "disable", value: function () { this.invoke("codeview.isActivated") && this.invoke("codeview.deactivate"), this.layoutInfo.editable.attr("contenteditable", !1), this.options.editing = !1, this.invoke("toolbar.deactivate", !0), this.triggerEvent("disable", !0) } }, { key: "triggerEvent", value: function () { var t = k.head(arguments), e = k.tail(k.from(arguments)), n = this.options.callbacks[m.namespaceToCamel(t, "on")]; n && n.apply(this.$note[0], e), this.$note.trigger("summernote." + t, e) } }, { key: "initializeModule", value: function (t) { var e = this.modules[t]; e.shouldInitialize = e.shouldInitialize || m.ok, e.shouldInitialize() && (e.initialize && e.initialize(), e.events && dt.attachEvents(this.$note, e.events)) } }, { key: "module", value: function (t, e, n) { if (1 === arguments.length) return this.modules[t]; this.modules[t] = new e(this), n || this.initializeModule(t) } }, { key: "removeModule", value: function (t) { var e = this.modules[t]; e.shouldInitialize() && (e.events && dt.detachEvents(this.$note, e.events), e.destroy && e.destroy()), delete this.modules[t] } }, { key: "memo", value: function (t, e) { if (1 === arguments.length) return this.memos[t]; this.memos[t] = e } }, { key: "removeMemo", value: function (t) { this.memos[t] && this.memos[t].destroy && this.memos[t].destroy(), delete this.memos[t] } }, { key: "createInvokeHandlerAndUpdateState", value: function (t, e) { var n = this; return function (o) { n.createInvokeHandler(t, e)(o), n.invoke("buttons.updateCurrentStyle") } } }, { key: "createInvokeHandler", value: function (t, n) { var o = this; return function (i) { i.preventDefault(); var r = e()(i.target); o.invoke(t, n || r.closest("[data-value]").data("value"), r) } } }, { key: "invoke", value: function () { var t = k.head(arguments), e = k.tail(k.from(arguments)), n = t.split("."), o = n.length > 1, i = o && k.head(n), r = o ? k.last(n) : k.head(n), a = this.modules[i || "editor"]; return !i && this[r] ? this[r].apply(this, e) : a && a[r] && a.shouldInitialize() ? a[r].apply(a, e) : void 0 } }]) && ht(n.prototype, o), i && ht(n, i), t }(); function pt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } function mt(t, e) { var n, o, i = t.parentElement(), r = document.body.createTextRange(), a = k.from(i.childNodes); for (n = 0; n < a.length; n++)if (!dt.isText(a[n])) { if (r.moveToElementText(a[n]), r.compareEndPoints("StartToStart", t) >= 0) break; o = a[n] } if (0 !== n && dt.isText(a[n - 1])) { var s = document.body.createTextRange(), l = null; s.moveToElementText(o || i), s.collapse(!o), l = o ? o.nextSibling : i.firstChild; var c = t.duplicate(); c.setEndPoint("StartToStart", s); for (var u = c.text.replace(/[\r\n]/g, "").length; u > l.nodeValue.length && l.nextSibling;)u -= l.nodeValue.length, l = l.nextSibling; l.nodeValue; e && l.nextSibling && dt.isText(l.nextSibling) && u === l.nodeValue.length && (u -= l.nodeValue.length, l = l.nextSibling), i = l, n = u } return { cont: i, offset: n } } function vt(t) { var e = document.body.createTextRange(), n = function t(e, n) { var o, i; if (dt.isText(e)) { var r = dt.listPrev(e, m.not(dt.isText)), a = k.last(r).previousSibling; o = a || e.parentNode, n += k.sum(k.tail(r), dt.nodeLength), i = !a } else { if (o = e.childNodes[n] || e, dt.isText(o)) return t(o, 0); n = 0, i = !1 } return { node: o, collapseToStart: i, offset: n } }(t.node, t.offset); return e.moveToElementText(n.node), e.collapse(n.collapseToStart), e.moveStart("character", n.offset), e } e().fn.extend({ summernote: function () { var t = e().type(k.head(arguments)), n = "string" === t, o = "object" === t, i = e().extend({}, e().summernote.options, o ? k.head(arguments) : {}); i.langInfo = e().extend(!0, {}, e().summernote.lang["en-US"], e().summernote.lang[i.lang]), i.icons = e().extend(!0, {}, e().summernote.options.icons, i.icons), i.tooltip = "auto" === i.tooltip ? !f.isSupportTouch : i.tooltip, this.each(function (t, n) { var o = e()(n); if (!o.data("summernote")) { var r = new ft(o, i); o.data("summernote", r), o.data("summernote").triggerEvent("init", r.layoutInfo) } }); var r = this.first(); if (r.length) { var a = r.data("summernote"); if (n) return a.invoke.apply(a, k.from(arguments)); i.focus && a.invoke("editor.focus") } return this } }); var gt = function () { function t(e, n, o, i) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.sc = e, this.so = n, this.ec = o, this.eo = i, this.isOnEditable = this.makeIsOn(dt.isEditable), this.isOnList = this.makeIsOn(dt.isList), this.isOnAnchor = this.makeIsOn(dt.isAnchor), this.isOnCell = this.makeIsOn(dt.isCell), this.isOnData = this.makeIsOn(dt.isData) } var n, o, i; return n = t, (o = [{ key: "nativeRange", value: function () { if (f.isW3CRangeSupport) { var t = document.createRange(); return t.setStart(this.sc, this.so), t.setEnd(this.ec, this.eo), t } var e = vt({ node: this.sc, offset: this.so }); return e.setEndPoint("EndToEnd", vt({ node: this.ec, offset: this.eo })), e } }, { key: "getPoints", value: function () { return { sc: this.sc, so: this.so, ec: this.ec, eo: this.eo } } }, { key: "getStartPoint", value: function () { return { node: this.sc, offset: this.so } } }, { key: "getEndPoint", value: function () { return { node: this.ec, offset: this.eo } } }, { key: "select", value: function () { var t = this.nativeRange(); if (f.isW3CRangeSupport) { var e = document.getSelection(); e.rangeCount > 0 && e.removeAllRanges(), e.addRange(t) } else t.select(); return this } }, { key: "scrollIntoView", value: function (t) { var n = e()(t).height(); return t.scrollTop + n < this.sc.offsetTop && (t.scrollTop += Math.abs(t.scrollTop + n - this.sc.offsetTop)), this } }, { key: "normalize", value: function () { var e = function (t, e) { if (!t) return t; if (dt.isVisiblePoint(t) && (!dt.isEdgePoint(t) || dt.isRightEdgePoint(t) && !e || dt.isLeftEdgePoint(t) && e || dt.isRightEdgePoint(t) && e && dt.isVoid(t.node.nextSibling) || dt.isLeftEdgePoint(t) && !e && dt.isVoid(t.node.previousSibling) || dt.isBlock(t.node) && dt.isEmpty(t.node))) return t; var n = dt.ancestor(t.node, dt.isBlock), o = !1; if (!o) { var i = dt.prevPoint(t) || { node: null }; o = (dt.isLeftEdgePointOf(t, n) || dt.isVoid(i.node)) && !e } var r = !1; if (!r) { var a = dt.nextPoint(t) || { node: null }; r = (dt.isRightEdgePointOf(t, n) || dt.isVoid(a.node)) && e } if (o || r) { if (dt.isVisiblePoint(t)) return t; e = !e } return (e ? dt.nextPointUntil(dt.nextPoint(t), dt.isVisiblePoint) : dt.prevPointUntil(dt.prevPoint(t), dt.isVisiblePoint)) || t }, n = e(this.getEndPoint(), !1), o = this.isCollapsed() ? n : e(this.getStartPoint(), !0); return new t(o.node, o.offset, n.node, n.offset) } }, { key: "nodes", value: function (t, e) { t = t || m.ok; var n = e && e.includeAncestor, o = e && e.fullyContains, i = this.getStartPoint(), r = this.getEndPoint(), a = [], s = []; return dt.walkPoint(i, r, function (e) { var i; dt.isEditable(e.node) || (o ? (dt.isLeftEdgePoint(e) && s.push(e.node), dt.isRightEdgePoint(e) && k.contains(s, e.node) && (i = e.node)) : i = n ? dt.ancestor(e.node, t) : e.node, i && t(i) && a.push(i)) }, !0), k.unique(a) } }, { key: "commonAncestor", value: function () { return dt.commonAncestor(this.sc, this.ec) } }, { key: "expand", value: function (e) { var n = dt.ancestor(this.sc, e), o = dt.ancestor(this.ec, e); if (!n && !o) return new t(this.sc, this.so, this.ec, this.eo); var i = this.getPoints(); return n && (i.sc = n, i.so = 0), o && (i.ec = o, i.eo = dt.nodeLength(o)), new t(i.sc, i.so, i.ec, i.eo) } }, { key: "collapse", value: function (e) { return e ? new t(this.sc, this.so, this.sc, this.so) : new t(this.ec, this.eo, this.ec, this.eo) } }, { key: "splitText", value: function () { var e = this.sc === this.ec, n = this.getPoints(); return dt.isText(this.ec) && !dt.isEdgePoint(this.getEndPoint()) && this.ec.splitText(this.eo), dt.isText(this.sc) && !dt.isEdgePoint(this.getStartPoint()) && (n.sc = this.sc.splitText(this.so), n.so = 0, e && (n.ec = n.sc, n.eo = this.eo - this.so)), new t(n.sc, n.so, n.ec, n.eo) } }, { key: "deleteContents", value: function () { if (this.isCollapsed()) return this; var n = this.splitText(), o = n.nodes(null, { fullyContains: !0 }), i = dt.prevPointUntil(n.getStartPoint(), function (t) { return !k.contains(o, t.node) }), r = []; return e().each(o, function (t, e) { var n = e.parentNode; i.node !== n && 1 === dt.nodeLength(n) && r.push(n), dt.remove(e, !1) }), e().each(r, function (t, e) { dt.remove(e, !1) }), new t(i.node, i.offset, i.node, i.offset).normalize() } }, { key: "makeIsOn", value: function (t) { return function () { var e = dt.ancestor(this.sc, t); return !!e && e === dt.ancestor(this.ec, t) } } }, { key: "isLeftEdgeOf", value: function (t) { if (!dt.isLeftEdgePoint(this.getStartPoint())) return !1; var e = dt.ancestor(this.sc, t); return e && dt.isLeftEdgeOf(this.sc, e) } }, { key: "isCollapsed", value: function () { return this.sc === this.ec && this.so === this.eo } }, { key: "wrapBodyInlineWithPara", value: function () { if (dt.isBodyContainer(this.sc) && dt.isEmpty(this.sc)) return this.sc.innerHTML = dt.emptyPara, new t(this.sc.firstChild, 0, this.sc.firstChild, 0); var e, n = this.normalize(); if (dt.isParaInline(this.sc) || dt.isPara(this.sc)) return n; if (dt.isInline(n.sc)) { var o = dt.listAncestor(n.sc, m.not(dt.isInline)); e = k.last(o), dt.isInline(e) || (e = o[o.length - 2] || n.sc.childNodes[n.so]) } else e = n.sc.childNodes[n.so > 0 ? n.so - 1 : 0]; if (e) { var i = dt.listPrev(e, dt.isParaInline).reverse(); if ((i = i.concat(dt.listNext(e.nextSibling, dt.isParaInline))).length) { var r = dt.wrap(k.head(i), "p"); dt.appendChildNodes(r, k.tail(i)) } } return this.normalize() } }, { key: "insertNode", value: function (t) { var e = this; (dt.isText(t) || dt.isInline(t)) && (e = this.wrapBodyInlineWithPara().deleteContents()); var n = dt.splitPoint(e.getStartPoint(), dt.isInline(t)); return n.rightNode ? (n.rightNode.parentNode.insertBefore(t, n.rightNode), dt.isEmpty(n.rightNode) && dt.isPara(t) && n.rightNode.parentNode.removeChild(n.rightNode)) : n.container.appendChild(t), t } }, { key: "pasteHTML", value: function (t) { t = e().trim(t); var n = e()("<div></div>").html(t)[0], o = k.from(n.childNodes), i = this, r = !1; return i.so >= 0 && (o = o.reverse(), r = !0), o = o.map(function (t) { return i.insertNode(t) }), r && (o = o.reverse()), o } }, { key: "toString", value: function () { var t = this.nativeRange(); return f.isW3CRangeSupport ? t.toString() : t.text } }, { key: "getWordRange", value: function (e) { var n = this.getEndPoint(); if (!dt.isCharPoint(n)) return this; var o = dt.prevPointUntil(n, function (t) { return !dt.isCharPoint(t) }); return e && (n = dt.nextPointUntil(n, function (t) { return !dt.isCharPoint(t) })), new t(o.node, o.offset, n.node, n.offset) } }, { key: "getWordsRange", value: function (e) { var n = this.getEndPoint(), o = function (t) { return !dt.isCharPoint(t) && !dt.isSpacePoint(t) }; if (o(n)) return this; var i = dt.prevPointUntil(n, o); return e && (n = dt.nextPointUntil(n, o)), new t(i.node, i.offset, n.node, n.offset) } }, { key: "getWordsMatchRange", value: function (e) { var n = this.getEndPoint(), o = dt.prevPointUntil(n, function (o) { if (!dt.isCharPoint(o) && !dt.isSpacePoint(o)) return !0; var i = new t(o.node, o.offset, n.node, n.offset), r = e.exec(i.toString()); return r && 0 === r.index }), i = new t(o.node, o.offset, n.node, n.offset), r = i.toString(), a = e.exec(r); return a && a[0].length === r.length ? i : null } }, { key: "bookmark", value: function (t) { return { s: { path: dt.makeOffsetPath(t, this.sc), offset: this.so }, e: { path: dt.makeOffsetPath(t, this.ec), offset: this.eo } } } }, { key: "paraBookmark", value: function (t) { return { s: { path: k.tail(dt.makeOffsetPath(k.head(t), this.sc)), offset: this.so }, e: { path: k.tail(dt.makeOffsetPath(k.last(t), this.ec)), offset: this.eo } } } }, { key: "getClientRects", value: function () { return this.nativeRange().getClientRects() } }]) && pt(n.prototype, o), i && pt(n, i), t }(); const bt = { create: function (t, e, n, o) { if (4 === arguments.length) return new gt(t, e, n, o); if (2 === arguments.length) return new gt(t, e, n = t, o = e); var i = this.createFromSelection(); if (!i && 1 === arguments.length) { var r = arguments[0]; return dt.isEditable(r) && (r = r.lastChild), this.createFromBodyElement(r, dt.emptyPara === arguments[0].innerHTML) } return i }, createFromBodyElement: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return this.createFromNode(t).collapse(e) }, createFromSelection: function () { var t, e, n, o; if (f.isW3CRangeSupport) { var i = document.getSelection(); if (!i || 0 === i.rangeCount) return null; if (dt.isBody(i.anchorNode)) return null; var r = i.getRangeAt(0); t = r.startContainer, e = r.startOffset, n = r.endContainer, o = r.endOffset } else { var a = document.selection.createRange(), s = a.duplicate(); s.collapse(!1); var l = a; l.collapse(!0); var c = mt(l, !0), u = mt(s, !1); dt.isText(c.node) && dt.isLeftEdgePoint(c) && dt.isTextNode(u.node) && dt.isRightEdgePoint(u) && u.node.nextSibling === c.node && (c = u), t = c.cont, e = c.offset, n = u.cont, o = u.offset } return new gt(t, e, n, o) }, createFromNode: function (t) { var e = t, n = 0, o = t, i = dt.nodeLength(o); return dt.isVoid(e) && (n = dt.listPrev(e).length - 1, e = e.parentNode), dt.isBR(o) ? (i = dt.listPrev(o).length - 1, o = o.parentNode) : dt.isVoid(o) && (i = dt.listPrev(o).length, o = o.parentNode), this.create(e, n, o, i) }, createFromNodeBefore: function (t) { return this.createFromNode(t).collapse(!0) }, createFromNodeAfter: function (t) { return this.createFromNode(t).collapse() }, createFromBookmark: function (t, e) { var n = dt.fromOffsetPath(t, e.s.path), o = e.s.offset, i = dt.fromOffsetPath(t, e.e.path), r = e.e.offset; return new gt(n, o, i, r) }, createFromParaBookmark: function (t, e) { var n = t.s.offset, o = t.e.offset, i = dt.fromOffsetPath(k.head(e), t.s.path), r = dt.fromOffsetPath(k.last(e), t.e.path); return new gt(i, n, r, o) } }; var yt = { BACKSPACE: 8, TAB: 9, ENTER: 13, ESCAPE: 27, SPACE: 32, DELETE: 46, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, NUM0: 48, NUM1: 49, NUM2: 50, NUM3: 51, NUM4: 52, NUM5: 53, NUM6: 54, NUM7: 55, NUM8: 56, B: 66, E: 69, I: 73, J: 74, K: 75, L: 76, R: 82, S: 83, U: 85, V: 86, Y: 89, Z: 90, SLASH: 191, LEFTBRACKET: 219, BACKSLASH: 220, RIGHTBRACKET: 221, HOME: 36, END: 35, PAGEUP: 33, PAGEDOWN: 34 }; const kt = { isEdit: function (t) { return k.contains([yt.BACKSPACE, yt.TAB, yt.ENTER, yt.SPACE, yt.DELETE], t) }, isMove: function (t) { return k.contains([yt.LEFT, yt.UP, yt.RIGHT, yt.DOWN], t) }, isNavigation: function (t) { return k.contains([yt.HOME, yt.END, yt.PAGEUP, yt.PAGEDOWN], t) }, nameFromCode: m.invertObject(yt), code: yt }; function wt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Ct = function () { function t(e) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.stack = [], this.stackOffset = -1, this.context = e, this.$editable = e.layoutInfo.editable, this.editable = this.$editable[0] } var e, n, o; return e = t, (n = [{ key: "makeSnapshot", value: function () { var t = bt.create(this.editable); return { contents: this.$editable.html(), bookmark: t && t.isOnEditable() ? t.bookmark(this.editable) : { s: { path: [], offset: 0 }, e: { path: [], offset: 0 } } } } }, { key: "applySnapshot", value: function (t) { null !== t.contents && this.$editable.html(t.contents), null !== t.bookmark && bt.createFromBookmark(this.editable, t.bookmark).select() } }, { key: "rewind", value: function () { this.$editable.html() !== this.stack[this.stackOffset].contents && this.recordUndo(), this.stackOffset = 0, this.applySnapshot(this.stack[this.stackOffset]) } }, { key: "commit", value: function () { this.stack = [], this.stackOffset = -1, this.recordUndo() } }, { key: "reset", value: function () { this.stack = [], this.stackOffset = -1, this.$editable.html(""), this.recordUndo() } }, { key: "undo", value: function () { this.$editable.html() !== this.stack[this.stackOffset].contents && this.recordUndo(), this.stackOffset > 0 && (this.stackOffset--, this.applySnapshot(this.stack[this.stackOffset])) } }, { key: "redo", value: function () { this.stack.length - 1 > this.stackOffset && (this.stackOffset++, this.applySnapshot(this.stack[this.stackOffset])) } }, { key: "recordUndo", value: function () { this.stackOffset++, this.stack.length > this.stackOffset && (this.stack = this.stack.slice(0, this.stackOffset)), this.stack.push(this.makeSnapshot()), this.stack.length > this.context.options.historyLimit && (this.stack.shift(), this.stackOffset -= 1) } }]) && wt(e.prototype, n), o && wt(e, o), t }(); function xt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var St = function () { function t() { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t) } var n, o, i; return n = t, (o = [{ key: "jQueryCSS", value: function (t, n) { var o = {}; return e().each(n, function (e, n) { o[n] = t.css(n) }), o } }, { key: "fromNode", value: function (t) { var e = this.jQueryCSS(t, ["font-family", "font-size", "text-align", "list-style-type", "line-height"]) || {}, n = t[0].style.fontSize || e["font-size"]; return e["font-size"] = parseInt(n, 10), e["font-size-unit"] = n.match(/[a-z%]+$/), e } }, { key: "stylePara", value: function (t, n) { e().each(t.nodes(dt.isPara, { includeAncestor: !0 }), function (t, o) { e()(o).css(n) }) } }, { key: "styleNodes", value: function (t, n) { t = t.splitText(); var o = n && n.nodeName || "SPAN", i = !(!n || !n.expandClosestSibling), r = !(!n || !n.onlyPartialContains); if (t.isCollapsed()) return [t.insertNode(dt.create(o))]; var a = dt.makePredByNodeName(o), s = t.nodes(dt.isText, { fullyContains: !0 }).map(function (t) { return dt.singleChildAncestor(t, a) || dt.wrap(t, o) }); if (i) { if (r) { var l = t.nodes(); a = m.and(a, function (t) { return k.contains(l, t) }) } return s.map(function (t) { var n = dt.withClosestSiblings(t, a), o = k.head(n), i = k.tail(n); return e().each(i, function (t, e) { dt.appendChildNodes(o, e.childNodes), dt.remove(e) }), k.head(n) }) } return s } }, { key: "current", value: function (t) { var n = e()(dt.isElement(t.sc) ? t.sc : t.sc.parentNode), o = this.fromNode(n); try { o = e().extend(o, { "font-bold": document.queryCommandState("bold") ? "bold" : "normal", "font-italic": document.queryCommandState("italic") ? "italic" : "normal", "font-underline": document.queryCommandState("underline") ? "underline" : "normal", "font-subscript": document.queryCommandState("subscript") ? "subscript" : "normal", "font-superscript": document.queryCommandState("superscript") ? "superscript" : "normal", "font-strikethrough": document.queryCommandState("strikethrough") ? "strikethrough" : "normal", "font-family": document.queryCommandValue("fontname") || o["font-family"] }) } catch (t) { } if (t.isOnList()) { var i = ["circle", "disc", "disc-leading-zero", "square"].indexOf(o["list-style-type"]) > -1; o["list-style"] = i ? "unordered" : "ordered" } else o["list-style"] = "none"; var r = dt.ancestor(t.sc, dt.isPara); if (r && r.style["line-height"]) o["line-height"] = r.style.lineHeight; else { var a = parseInt(o["line-height"], 10) / parseInt(o["font-size"], 10); o["line-height"] = a.toFixed(1) } return o.anchor = t.isOnAnchor() && dt.ancestor(t.sc, dt.isAnchor), o.ancestors = dt.listAncestor(t.sc, dt.isEditable), o.range = t, o } }]) && xt(n.prototype, o), i && xt(n, i), t }(); function Tt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Et = function () { function t() { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t) } var n, o, i; return n = t, (o = [{ key: "insertOrderedList", value: function (t) { this.toggleList("OL", t) } }, { key: "insertUnorderedList", value: function (t) { this.toggleList("UL", t) } }, { key: "indent", value: function (t) { var n = this, o = bt.create(t).wrapBodyInlineWithPara(), i = o.nodes(dt.isPara, { includeAncestor: !0 }), r = k.clusterBy(i, m.peq2("parentNode")); e().each(r, function (t, o) { var i = k.head(o); if (dt.isLi(i)) { var r = n.findList(i.previousSibling); r ? o.map(function (t) { return r.appendChild(t) }) : (n.wrapList(o, i.parentNode.nodeName), o.map(function (t) { return t.parentNode }).map(function (t) { return n.appendToPrevious(t) })) } else e().each(o, function (t, n) { e()(n).css("marginLeft", function (t, e) { return (parseInt(e, 10) || 0) + 25 }) }) }), o.select() } }, { key: "outdent", value: function (t) { var n = this, o = bt.create(t).wrapBodyInlineWithPara(), i = o.nodes(dt.isPara, { includeAncestor: !0 }), r = k.clusterBy(i, m.peq2("parentNode")); e().each(r, function (t, o) { var i = k.head(o); dt.isLi(i) ? n.releaseList([o]) : e().each(o, function (t, n) { e()(n).css("marginLeft", function (t, e) { return (e = parseInt(e, 10) || 0) > 25 ? e - 25 : "" }) }) }), o.select() } }, { key: "toggleList", value: function (t, n) { var o = this, i = bt.create(n).wrapBodyInlineWithPara(), r = i.nodes(dt.isPara, { includeAncestor: !0 }), a = i.paraBookmark(r), s = k.clusterBy(r, m.peq2("parentNode")); if (k.find(r, dt.isPurePara)) { var l = []; e().each(s, function (e, n) { l = l.concat(o.wrapList(n, t)) }), r = l } else { var c = i.nodes(dt.isList, { includeAncestor: !0 }).filter(function (n) { return !e().nodeName(n, t) }); c.length ? e().each(c, function (e, n) { dt.replace(n, t) }) : r = this.releaseList(s, !0) } bt.createFromParaBookmark(a, r).select() } }, { key: "wrapList", value: function (t, e) { var n = k.head(t), o = k.last(t), i = dt.isList(n.previousSibling) && n.previousSibling, r = dt.isList(o.nextSibling) && o.nextSibling, a = i || dt.insertAfter(dt.create(e || "UL"), o); return t = t.map(function (t) { return dt.isPurePara(t) ? dt.replace(t, "LI") : t }), dt.appendChildNodes(a, t), r && (dt.appendChildNodes(a, k.from(r.childNodes)), dt.remove(r)), t } }, { key: "releaseList", value: function (t, n) { var o = this, i = []; return e().each(t, function (t, r) { var a = k.head(r), s = k.last(r), l = n ? dt.lastAncestor(a, dt.isList) : a.parentNode, c = l.parentNode; if ("LI" === l.parentNode.nodeName) r.map(function (t) { var e = o.findNextSiblings(t); c.nextSibling ? c.parentNode.insertBefore(t, c.nextSibling) : c.parentNode.appendChild(t), e.length && (o.wrapList(e, l.nodeName), t.appendChild(e[0].parentNode)) }), 0 === l.children.length && c.removeChild(l), 0 === c.childNodes.length && c.parentNode.removeChild(c); else { var u = l.childNodes.length > 1 ? dt.splitTree(l, { node: s.parentNode, offset: dt.position(s) + 1 }, { isSkipPaddingBlankHTML: !0 }) : null, d = dt.splitTree(l, { node: a.parentNode, offset: dt.position(a) }, { isSkipPaddingBlankHTML: !0 }); r = n ? dt.listDescendant(d, dt.isLi) : k.from(d.childNodes).filter(dt.isLi), !n && dt.isList(l.parentNode) || (r = r.map(function (t) { return dt.replace(t, "P") })), e().each(k.from(r).reverse(), function (t, e) { dt.insertAfter(e, l) }); var h = k.compact([l, d, u]); e().each(h, function (t, n) { var o = [n].concat(dt.listDescendant(n, dt.isList)); e().each(o.reverse(), function (t, e) { dt.nodeLength(e) || dt.remove(e, !0) }) }) } i = i.concat(r) }), i } }, { key: "appendToPrevious", value: function (t) { return t.previousSibling ? dt.appendChildNodes(t.previousSibling, [t]) : this.wrapList([t], "LI") } }, { key: "findList", value: function (t) { return t ? k.find(t.children, function (t) { return ["OL", "UL"].indexOf(t.nodeName) > -1 }) : null } }, { key: "findNextSiblings", value: function (t) { for (var e = []; t.nextSibling;)e.push(t.nextSibling), t = t.nextSibling; return e } }]) && Tt(n.prototype, o), i && Tt(n, i), t }(); function It(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var $t = function () { function t(e) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.bullet = new Et, this.options = e.options } var n, o, i; return n = t, (o = [{ key: "insertTab", value: function (t, e) { var n = dt.createText(new Array(e + 1).join(dt.NBSP_CHAR)); (t = t.deleteContents()).insertNode(n, !0), (t = bt.create(n, e)).select() } }, { key: "insertParagraph", value: function (t, n) { n = (n = (n = n || bt.create(t)).deleteContents()).wrapBodyInlineWithPara(); var o, i = dt.ancestor(n.sc, dt.isPara); if (i) { if (dt.isLi(i) && (dt.isEmpty(i) || dt.deepestChildIsEmpty(i))) return void this.bullet.toggleList(i.parentNode.nodeName); var r = null; if (1 === this.options.blockquoteBreakingLevel ? r = dt.ancestor(i, dt.isBlockquote) : 2 === this.options.blockquoteBreakingLevel && (r = dt.lastAncestor(i, dt.isBlockquote)), r) { o = e()(dt.emptyPara)[0], dt.isRightEdgePoint(n.getStartPoint()) && dt.isBR(n.sc.nextSibling) && e()(n.sc.nextSibling).remove(); var a = dt.splitTree(r, n.getStartPoint(), { isDiscardEmptySplits: !0 }); a ? a.parentNode.insertBefore(o, a) : dt.insertAfter(o, r) } else { o = dt.splitTree(i, n.getStartPoint()); var s = dt.listDescendant(i, dt.isEmptyAnchor); s = s.concat(dt.listDescendant(o, dt.isEmptyAnchor)), e().each(s, function (t, e) { dt.remove(e) }), (dt.isHeading(o) || dt.isPre(o) || dt.isCustomStyleTag(o)) && dt.isEmpty(o) && (o = dt.replace(o, "p")) } } else { var l = n.sc.childNodes[n.so]; o = e()(dt.emptyPara)[0], l ? n.sc.insertBefore(o, l) : n.sc.appendChild(o) } bt.create(o, 0).normalize().select().scrollIntoView(t) } }]) && It(n.prototype, o), i && It(n, i), t }(); function Nt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Pt = function t(e, n, o, i) { var r = { colPos: 0, rowPos: 0 }, a = [], s = []; function l(t, e, n, o, i, r, s) { var l = { baseRow: n, baseCell: o, isRowSpan: i, isColSpan: r, isVirtual: s }; a[t] || (a[t] = []), a[t][e] = l } function c(t, e, n, o) { return { baseCell: t.baseCell, action: e, virtualTable: { rowIndex: n, cellIndex: o } } } function u(t, e) { if (!a[t]) return e; if (!a[t][e]) return e; for (var n = e; a[t][n];)if (n++, !a[t][n]) return n } function d(t, e) { var n = u(t.rowIndex, e.cellIndex), o = e.colSpan > 1, i = e.rowSpan > 1, a = t.rowIndex === r.rowPos && e.cellIndex === r.colPos; l(t.rowIndex, n, t, e, i, o, !1); var s = e.attributes.rowSpan ? parseInt(e.attributes.rowSpan.value, 10) : 0; if (s > 1) for (var c = 1; c < s; c++) { var d = t.rowIndex + c; h(d, n, e, a), l(d, n, t, e, !0, o, !0) } var f = e.attributes.colSpan ? parseInt(e.attributes.colSpan.value, 10) : 0; if (f > 1) for (var p = 1; p < f; p++) { var m = u(t.rowIndex, n + p); h(t.rowIndex, m, e, a), l(t.rowIndex, m, t, e, i, !0, !0) } } function h(t, e, n, o) { t === r.rowPos && r.colPos >= n.cellIndex && n.cellIndex <= e && !o && r.colPos++ } function f(e) { switch (n) { case t.where.Column: if (e.isColSpan) return t.resultAction.SubtractSpanCount; break; case t.where.Row: if (!e.isVirtual && e.isRowSpan) return t.resultAction.AddCell; if (e.isRowSpan) return t.resultAction.SubtractSpanCount }return t.resultAction.RemoveCell } function p(e) { switch (n) { case t.where.Column: if (e.isColSpan) return t.resultAction.SumSpanCount; if (e.isRowSpan && e.isVirtual) return t.resultAction.Ignore; break; case t.where.Row: if (e.isRowSpan) return t.resultAction.SumSpanCount; if (e.isColSpan && e.isVirtual) return t.resultAction.Ignore }return t.resultAction.AddCell } this.getActionList = function () { for (var e = n === t.where.Row ? r.rowPos : -1, i = n === t.where.Column ? r.colPos : -1, l = 0, u = !0; u;) { var d = e >= 0 ? e : l, h = i >= 0 ? i : l, m = a[d]; if (!m) return u = !1, s; var v = m[h]; if (!v) return u = !1, s; var g = t.resultAction.Ignore; switch (o) { case t.requestAction.Add: g = p(v); break; case t.requestAction.Delete: g = f(v) }s.push(c(v, g, d, h)), l++ } return s }, e && e.tagName && ("td" === e.tagName.toLowerCase() || "th" === e.tagName.toLowerCase()) && (r.colPos = e.cellIndex, e.parentElement && e.parentElement.tagName && "tr" === e.parentElement.tagName.toLowerCase() && (r.rowPos = e.parentElement.rowIndex)), function () { for (var t = i.rows, e = 0; e < t.length; e++)for (var n = t[e].cells, o = 0; o < n.length; o++)d(t[e], n[o]) }() }; Pt.where = { Row: 0, Column: 1 }, Pt.requestAction = { Add: 0, Delete: 1 }, Pt.resultAction = { Ignore: 0, SubtractSpanCount: 1, RemoveCell: 2, AddCell: 3, SumSpanCount: 4 }; var Rt = function () { function t() { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t) } var n, o, i; return n = t, (o = [{ key: "tab", value: function (t, e) { var n = dt.ancestor(t.commonAncestor(), dt.isCell), o = dt.ancestor(n, dt.isTable), i = dt.listDescendant(o, dt.isCell), r = k[e ? "prev" : "next"](i, n); r && bt.create(r, 0).select() } }, { key: "addRow", value: function (t, n) { for (var o = dt.ancestor(t.commonAncestor(), dt.isCell), i = e()(o).closest("tr"), r = this.recoverAttributes(i), a = e()("<tr" + r + "></tr>"), s = new Pt(o, Pt.where.Row, Pt.requestAction.Add, e()(i).closest("table")[0]).getActionList(), l = 0; l < s.length; l++) { var c = s[l], u = this.recoverAttributes(c.baseCell); switch (c.action) { case Pt.resultAction.AddCell: a.append("<td" + u + ">" + dt.blank + "</td>"); break; case Pt.resultAction.SumSpanCount: if ("top" === n) if ((c.baseCell.parent ? c.baseCell.closest("tr").rowIndex : 0) <= i[0].rowIndex) { var d = e()("<div></div>").append(e()("<td" + u + ">" + dt.blank + "</td>").removeAttr("rowspan")).html(); a.append(d); break } var h = parseInt(c.baseCell.rowSpan, 10); h++, c.baseCell.setAttribute("rowSpan", h) } } if ("top" === n) i.before(a); else { if (o.rowSpan > 1) { var f = i[0].rowIndex + (o.rowSpan - 2); return void e()(e()(i).parent().find("tr")[f]).after(e()(a)) } i.after(a) } } }, { key: "addCol", value: function (t, n) { var o = dt.ancestor(t.commonAncestor(), dt.isCell), i = e()(o).closest("tr"); e()(i).siblings().push(i); for (var r = new Pt(o, Pt.where.Column, Pt.requestAction.Add, e()(i).closest("table")[0]).getActionList(), a = 0; a < r.length; a++) { var s = r[a], l = this.recoverAttributes(s.baseCell); switch (s.action) { case Pt.resultAction.AddCell: "right" === n ? e()(s.baseCell).after("<td" + l + ">" + dt.blank + "</td>") : e()(s.baseCell).before("<td" + l + ">" + dt.blank + "</td>"); break; case Pt.resultAction.SumSpanCount: if ("right" === n) { var c = parseInt(s.baseCell.colSpan, 10); c++, s.baseCell.setAttribute("colSpan", c) } else e()(s.baseCell).before("<td" + l + ">" + dt.blank + "</td>") } } } }, { key: "recoverAttributes", value: function (t) { var e = ""; if (!t) return e; for (var n = t.attributes || [], o = 0; o < n.length; o++)"id" !== n[o].name.toLowerCase() && n[o].specified && (e += " " + n[o].name + "='" + n[o].value + "'"); return e } }, { key: "deleteRow", value: function (t) { for (var n = dt.ancestor(t.commonAncestor(), dt.isCell), o = e()(n).closest("tr"), i = o.children("td, th").index(e()(n)), r = o[0].rowIndex, a = new Pt(n, Pt.where.Row, Pt.requestAction.Delete, e()(o).closest("table")[0]).getActionList(), s = 0; s < a.length; s++)if (a[s]) { var l = a[s].baseCell, c = a[s].virtualTable, u = l.rowSpan && l.rowSpan > 1, d = u ? parseInt(l.rowSpan, 10) : 0; switch (a[s].action) { case Pt.resultAction.Ignore: continue; case Pt.resultAction.AddCell: var h = o.next("tr")[0]; if (!h) continue; var f = o[0].cells[i]; u && (d > 2 ? (d--, h.insertBefore(f, h.cells[i]), h.cells[i].setAttribute("rowSpan", d), h.cells[i].innerHTML = "") : 2 === d && (h.insertBefore(f, h.cells[i]), h.cells[i].removeAttribute("rowSpan"), h.cells[i].innerHTML = "")); continue; case Pt.resultAction.SubtractSpanCount: u && (d > 2 ? (d--, l.setAttribute("rowSpan", d), c.rowIndex !== r && l.cellIndex === i && (l.innerHTML = "")) : 2 === d && (l.removeAttribute("rowSpan"), c.rowIndex !== r && l.cellIndex === i && (l.innerHTML = ""))); continue; case Pt.resultAction.RemoveCell: continue } } o.remove() } }, { key: "deleteCol", value: function (t) { for (var n = dt.ancestor(t.commonAncestor(), dt.isCell), o = e()(n).closest("tr"), i = o.children("td, th").index(e()(n)), r = new Pt(n, Pt.where.Column, Pt.requestAction.Delete, e()(o).closest("table")[0]).getActionList(), a = 0; a < r.length; a++)if (r[a]) switch (r[a].action) { case Pt.resultAction.Ignore: continue; case Pt.resultAction.SubtractSpanCount: var s = r[a].baseCell; if (s.colSpan && s.colSpan > 1) { var l = s.colSpan ? parseInt(s.colSpan, 10) : 0; l > 2 ? (l--, s.setAttribute("colSpan", l), s.cellIndex === i && (s.innerHTML = "")) : 2 === l && (s.removeAttribute("colSpan"), s.cellIndex === i && (s.innerHTML = "")) } continue; case Pt.resultAction.RemoveCell: dt.remove(r[a].baseCell, !0); continue } } }, { key: "createTable", value: function (t, n, o) { for (var i, r = [], a = 0; a < t; a++)r.push("<td>" + dt.blank + "</td>"); i = r.join(""); for (var s, l = [], c = 0; c < n; c++)l.push("<tr>" + i + "</tr>"); s = l.join(""); var u = e()("<table>" + s + "</table>"); return o && o.tableClassName && u.addClass(o.tableClassName), u[0] } }, { key: "deleteTable", value: function (t) { var n = dt.ancestor(t.commonAncestor(), dt.isCell); e()(n).closest("table").remove() } }]) && Nt(n.prototype, o), i && Nt(n, i), t }(); function Lt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var At = function () { function t(n) { var o = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.$note = n.layoutInfo.note, this.$editor = n.layoutInfo.editor, this.$editable = n.layoutInfo.editable, this.options = n.options, this.lang = this.options.langInfo, this.editable = this.$editable[0], this.lastRange = null, this.snapshot = null, this.style = new St, this.table = new Rt, this.typing = new $t(n), this.bullet = new Et, this.history = new Ct(n), this.context.memo("help.escape", this.lang.help.escape), this.context.memo("help.undo", this.lang.help.undo), this.context.memo("help.redo", this.lang.help.redo), this.context.memo("help.tab", this.lang.help.tab), this.context.memo("help.untab", this.lang.help.untab), this.context.memo("help.insertParagraph", this.lang.help.insertParagraph), this.context.memo("help.insertOrderedList", this.lang.help.insertOrderedList), this.context.memo("help.insertUnorderedList", this.lang.help.insertUnorderedList), this.context.memo("help.indent", this.lang.help.indent), this.context.memo("help.outdent", this.lang.help.outdent), this.context.memo("help.formatPara", this.lang.help.formatPara), this.context.memo("help.insertHorizontalRule", this.lang.help.insertHorizontalRule), this.context.memo("help.fontName", this.lang.help.fontName); for (var i = ["bold", "italic", "underline", "strikethrough", "superscript", "subscript", "justifyLeft", "justifyCenter", "justifyRight", "justifyFull", "formatBlock", "removeFormat", "backColor"], r = 0, a = i.length; r < a; r++)this[i[r]] = function (t) { return function (e) { o.beforeCommand(), document.execCommand(t, !1, e), o.afterCommand(!0) } }(i[r]), this.context.memo("help." + i[r], this.lang.help[i[r]]); this.fontName = this.wrapCommand(function (t) { return o.fontStyling("font-family", f.validFontName(t)) }), this.fontSize = this.wrapCommand(function (t) { var e = o.currentStyle()["font-size-unit"]; return o.fontStyling("font-size", t + e) }), this.fontSizeUnit = this.wrapCommand(function (t) { var e = o.currentStyle()["font-size"]; return o.fontStyling("font-size", e + t) }); for (var s = 1; s <= 6; s++)this["formatH" + s] = function (t) { return function () { o.formatBlock("H" + t) } }(s), this.context.memo("help.formatH" + s, this.lang.help["formatH" + s]); this.insertParagraph = this.wrapCommand(function () { o.typing.insertParagraph(o.editable) }), this.insertOrderedList = this.wrapCommand(function () { o.bullet.insertOrderedList(o.editable) }), this.insertUnorderedList = this.wrapCommand(function () { o.bullet.insertUnorderedList(o.editable) }), this.indent = this.wrapCommand(function () { o.bullet.indent(o.editable) }), this.outdent = this.wrapCommand(function () { o.bullet.outdent(o.editable) }), this.insertNode = this.wrapCommand(function (t) { o.isLimited(e()(t).text().length) || (o.getLastRange().insertNode(t), o.setLastRange(bt.createFromNodeAfter(t).select())) }), this.insertText = this.wrapCommand(function (t) { if (!o.isLimited(t.length)) { var e = o.getLastRange().insertNode(dt.createText(t)); o.setLastRange(bt.create(e, dt.nodeLength(e)).select()) } }), this.pasteHTML = this.wrapCommand(function (t) { if (!o.isLimited(t.length)) { t = o.context.invoke("codeview.purify", t); var e = o.getLastRange().pasteHTML(t); o.setLastRange(bt.createFromNodeAfter(k.last(e)).select()) } }), this.formatBlock = this.wrapCommand(function (t, e) { var n = o.options.callbacks.onApplyCustomStyle; n ? n.call(o, e, o.context, o.onFormatBlock) : o.onFormatBlock(t, e) }), this.insertHorizontalRule = this.wrapCommand(function () { var t = o.getLastRange().insertNode(dt.create("HR")); t.nextSibling && o.setLastRange(bt.create(t.nextSibling, 0).normalize().select()) }), this.lineHeight = this.wrapCommand(function (t) { o.style.stylePara(o.getLastRange(), { lineHeight: t }) }), this.createLink = this.wrapCommand(function (t) { var n = t.url, i = t.text, r = t.isNewWindow, a = t.checkProtocol, s = t.range || o.getLastRange(), l = i.length - s.toString().length; if (!(l > 0 && o.isLimited(l))) { var c = s.toString() !== i; "string" == typeof n && (n = n.trim()), o.options.onCreateLink ? n = o.options.onCreateLink(n) : a && (n = /^([A-Za-z][A-Za-z0-9+-.]*\:|#|\/)/.test(n) ? n : o.options.defaultProtocol + n); var u = []; if (c) { var d = (s = s.deleteContents()).insertNode(e()("<A>" + i + "</A>")[0]); u.push(d) } else u = o.style.styleNodes(s, { nodeName: "A", expandClosestSibling: !0, onlyPartialContains: !0 }); e().each(u, function (t, o) { e()(o).attr("href", n), r ? e()(o).attr("target", "_blank") : e()(o).removeAttr("target") }), o.setLastRange(o.createRangeFromList(u).select()) } }), this.color = this.wrapCommand(function (t) { var e = t.foreColor, n = t.backColor; e && document.execCommand("foreColor", !1, e), n && document.execCommand("backColor", !1, n) }), this.foreColor = this.wrapCommand(function (t) { document.execCommand("foreColor", !1, t) }), this.insertTable = this.wrapCommand(function (t) { var e = t.split("x"); o.getLastRange().deleteContents().insertNode(o.table.createTable(e[0], e[1], o.options)) }), this.removeMedia = this.wrapCommand(function () { var t = e()(o.restoreTarget()).parent(); t.closest("figure").length ? t.closest("figure").remove() : t = e()(o.restoreTarget()).detach(), o.context.triggerEvent("media.delete", t, o.$editable) }), this.floatMe = this.wrapCommand(function (t) { var n = e()(o.restoreTarget()); n.toggleClass("note-float-left", "left" === t), n.toggleClass("note-float-right", "right" === t), n.css("float", "none" === t ? "" : t) }), this.resize = this.wrapCommand(function (t) { var n = e()(o.restoreTarget()); 0 === (t = parseFloat(t)) ? n.css("width", "") : n.css({ width: 100 * t + "%", height: "" }) }) } var n, o, i; return n = t, (o = [{ key: "initialize", value: function () { var t = this; this.$editable.on("keydown", function (e) { if (e.keyCode === kt.code.ENTER && t.context.triggerEvent("enter", e), t.context.triggerEvent("keydown", e), t.snapshot = t.history.makeSnapshot(), t.hasKeyShortCut = !1, e.isDefaultPrevented() || (t.options.shortcuts ? t.hasKeyShortCut = t.handleKeyMap(e) : t.preventDefaultEditableShortCuts(e)), t.isLimited(1, e)) { var n = t.getLastRange(); if (n.eo - n.so == 0) return !1 } t.setLastRange(), t.options.recordEveryKeystroke && !1 === t.hasKeyShortCut && t.history.recordUndo() }).on("keyup", function (e) { t.setLastRange(), t.context.triggerEvent("keyup", e) }).on("focus", function (e) { t.setLastRange(), t.context.triggerEvent("focus", e) }).on("blur", function (e) { t.context.triggerEvent("blur", e) }).on("mousedown", function (e) { t.context.triggerEvent("mousedown", e) }).on("mouseup", function (e) { t.setLastRange(), t.history.recordUndo(), t.context.triggerEvent("mouseup", e) }).on("scroll", function (e) { t.context.triggerEvent("scroll", e) }).on("paste", function (e) { t.setLastRange(), t.context.triggerEvent("paste", e) }).on("input", function () { t.isLimited(0) && t.snapshot && t.history.applySnapshot(t.snapshot) }), this.$editable.attr("spellcheck", this.options.spellCheck), this.$editable.attr("autocorrect", this.options.spellCheck), this.options.disableGrammar && this.$editable.attr("data-gramm", !1), this.$editable.html(dt.html(this.$note) || dt.emptyPara), this.$editable.on(f.inputEventName, m.debounce(function () { t.context.triggerEvent("change", t.$editable.html(), t.$editable) }, 10)), this.$editable.on("focusin", function (e) { t.context.triggerEvent("focusin", e) }).on("focusout", function (e) { t.context.triggerEvent("focusout", e) }), this.options.airMode ? this.options.overrideContextMenu && this.$editor.on("contextmenu", function (e) { return t.context.triggerEvent("contextmenu", e), !1 }) : (this.options.width && this.$editor.outerWidth(this.options.width), this.options.height && this.$editable.outerHeight(this.options.height), this.options.maxHeight && this.$editable.css("max-height", this.options.maxHeight), this.options.minHeight && this.$editable.css("min-height", this.options.minHeight)), this.history.recordUndo(), this.setLastRange() } }, { key: "destroy", value: function () { this.$editable.off() } }, { key: "handleKeyMap", value: function (t) { var e = this.options.keyMap[f.isMac ? "mac" : "pc"], n = []; t.metaKey && n.push("CMD"), t.ctrlKey && !t.altKey && n.push("CTRL"), t.shiftKey && n.push("SHIFT"); var o = kt.nameFromCode[t.keyCode]; o && n.push(o); var i = e[n.join("+")]; if ("TAB" !== o || this.options.tabDisable) if (i) { if (!1 !== this.context.invoke(i)) return t.preventDefault(), !0 } else kt.isEdit(t.keyCode) && this.afterCommand(); else this.afterCommand(); return !1 } }, { key: "preventDefaultEditableShortCuts", value: function (t) { (t.ctrlKey || t.metaKey) && k.contains([66, 73, 85], t.keyCode) && t.preventDefault() } }, { key: "isLimited", value: function (t, e) { return t = t || 0, (void 0 === e || !(kt.isMove(e.keyCode) || kt.isNavigation(e.keyCode) || e.ctrlKey || e.metaKey || k.contains([kt.code.BACKSPACE, kt.code.DELETE], e.keyCode))) && (this.options.maxTextLength > 0 && this.$editable.text().length + t > this.options.maxTextLength) } }, { key: "createRange", value: function () { return this.focus(), this.setLastRange(), this.getLastRange() } }, { key: "createRangeFromList", value: function (t) { var e = bt.createFromNodeBefore(k.head(t)).getStartPoint(), n = bt.createFromNodeAfter(k.last(t)).getEndPoint(); return bt.create(e.node, e.offset, n.node, n.offset) } }, { key: "setLastRange", value: function (t) { t ? this.lastRange = t : (this.lastRange = bt.create(this.editable), 0 === e()(this.lastRange.sc).closest(".note-editable").length && (this.lastRange = bt.createFromBodyElement(this.editable))) } }, { key: "getLastRange", value: function () { return this.lastRange || this.setLastRange(), this.lastRange } }, { key: "saveRange", value: function (t) { t && this.getLastRange().collapse().select() } }, { key: "restoreRange", value: function () { this.lastRange && (this.lastRange.select(), this.focus()) } }, { key: "saveTarget", value: function (t) { this.$editable.data("target", t) } }, { key: "clearTarget", value: function () { this.$editable.removeData("target") } }, { key: "restoreTarget", value: function () { return this.$editable.data("target") } }, { key: "currentStyle", value: function () { var t = bt.create(); return t && (t = t.normalize()), t ? this.style.current(t) : this.style.fromNode(this.$editable) } }, { key: "styleFromNode", value: function (t) { return this.style.fromNode(t) } }, { key: "undo", value: function () { this.context.triggerEvent("before.command", this.$editable.html()), this.history.undo(), this.context.triggerEvent("change", this.$editable.html(), this.$editable) } }, { key: "commit", value: function () { this.context.triggerEvent("before.command", this.$editable.html()), this.history.commit(), this.context.triggerEvent("change", this.$editable.html(), this.$editable) } }, { key: "redo", value: function () { this.context.triggerEvent("before.command", this.$editable.html()), this.history.redo(), this.context.triggerEvent("change", this.$editable.html(), this.$editable) } }, { key: "beforeCommand", value: function () { this.context.triggerEvent("before.command", this.$editable.html()), document.execCommand("styleWithCSS", !1, this.options.styleWithCSS), this.focus() } }, { key: "afterCommand", value: function (t) { this.normalizeContent(), this.history.recordUndo(), t || this.context.triggerEvent("change", this.$editable.html(), this.$editable) } }, { key: "tab", value: function () { var t = this.getLastRange(); if (t.isCollapsed() && t.isOnCell()) this.table.tab(t); else { if (0 === this.options.tabSize) return !1; this.isLimited(this.options.tabSize) || (this.beforeCommand(), this.typing.insertTab(t, this.options.tabSize), this.afterCommand()) } } }, { key: "untab", value: function () { var t = this.getLastRange(); if (t.isCollapsed() && t.isOnCell()) this.table.tab(t, !0); else if (0 === this.options.tabSize) return !1 } }, { key: "wrapCommand", value: function (t) { return function () { this.beforeCommand(), t.apply(this, arguments), this.afterCommand() } } }, { key: "insertImage", value: function (t, n) { var o, i = this; return (o = t, e().Deferred(function (t) { var n = e()("<img>"); n.one("load", function () { n.off("error abort"), t.resolve(n) }).one("error abort", function () { n.off("load").detach(), t.reject(n) }).css({ display: "none" }).appendTo(document.body).attr("src", o) }).promise()).then(function (t) { i.beforeCommand(), "function" == typeof n ? n(t) : ("string" == typeof n && t.attr("data-filename", n), t.css("width", Math.min(i.$editable.width(), t.width()))), t.show(), i.getLastRange().insertNode(t[0]), i.setLastRange(bt.createFromNodeAfter(t[0]).select()), i.afterCommand() }).fail(function (t) { i.context.triggerEvent("image.upload.error", t) }) } }, { key: "insertImagesAsDataURL", value: function (t) { var n = this; e().each(t, function (t, o) { var i = o.name; n.options.maximumImageFileSize && n.options.maximumImageFileSize < o.size ? n.context.triggerEvent("image.upload.error", n.lang.image.maximumFileSizeError) : function (t) { return e().Deferred(function (n) { e().extend(new FileReader, { onload: function (t) { var e = t.target.result; n.resolve(e) }, onerror: function (t) { n.reject(t) } }).readAsDataURL(t) }).promise() }(o).then(function (t) { return n.insertImage(t, i) }).fail(function () { n.context.triggerEvent("image.upload.error") }) }) } }, { key: "insertImagesOrCallback", value: function (t) { this.options.callbacks.onImageUpload ? this.context.triggerEvent("image.upload", t) : this.insertImagesAsDataURL(t) } }, { key: "getSelectedText", value: function () { var t = this.getLastRange(); return t.isOnAnchor() && (t = bt.createFromNode(dt.ancestor(t.sc, dt.isAnchor))), t.toString() } }, { key: "onFormatBlock", value: function (t, n) { if (document.execCommand("FormatBlock", !1, f.isMSIE ? "<" + t + ">" : t), n && n.length && (n[0].tagName.toUpperCase() !== t.toUpperCase() && (n = n.find(t)), n && n.length)) { var o = this.createRange(), i = e()([o.sc, o.ec]).closest(t); i.removeClass(); var r = n[0].className || ""; r && i.addClass(r) } } }, { key: "formatPara", value: function () { this.formatBlock("P") } }, { key: "fontStyling", value: function (t, n) { var o = this.getLastRange(); if ("" !== o) { var i = this.style.styleNodes(o); if (this.$editor.find(".note-status-output").html(""), e()(i).css(t, n), o.isCollapsed()) { var r = k.head(i); r && !dt.nodeLength(r) && (r.innerHTML = dt.ZERO_WIDTH_NBSP_CHAR, bt.createFromNode(r.firstChild).select(), this.setLastRange(), this.$editable.data("bogus", r)) } else this.setLastRange(this.createRangeFromList(i).select()) } else { var a = e().now(); this.$editor.find(".note-status-output").html('<div id="note-status-output-' + a + '" class="alert alert-info">' + this.lang.output.noSelection + "</div>"), setTimeout(function () { e()("#note-status-output-" + a).remove() }, 5e3) } } }, { key: "unlink", value: function () { var t = this.getLastRange(); if (t.isOnAnchor()) { var e = dt.ancestor(t.sc, dt.isAnchor); (t = bt.createFromNode(e)).select(), this.setLastRange(), this.beforeCommand(), document.execCommand("unlink"), this.afterCommand() } } }, { key: "getLinkInfo", value: function () { var t = this.getLastRange().expand(dt.isAnchor), n = e()(k.head(t.nodes(dt.isAnchor))), o = { range: t, text: t.toString(), url: n.length ? n.attr("href") : "" }; return n.length && (o.isNewWindow = "_blank" === n.attr("target")), o } }, { key: "addRow", value: function (t) { var e = this.getLastRange(this.$editable); e.isCollapsed() && e.isOnCell() && (this.beforeCommand(), this.table.addRow(e, t), this.afterCommand()) } }, { key: "addCol", value: function (t) { var e = this.getLastRange(this.$editable); e.isCollapsed() && e.isOnCell() && (this.beforeCommand(), this.table.addCol(e, t), this.afterCommand()) } }, { key: "deleteRow", value: function () { var t = this.getLastRange(this.$editable); t.isCollapsed() && t.isOnCell() && (this.beforeCommand(), this.table.deleteRow(t), this.afterCommand()) } }, { key: "deleteCol", value: function () { var t = this.getLastRange(this.$editable); t.isCollapsed() && t.isOnCell() && (this.beforeCommand(), this.table.deleteCol(t), this.afterCommand()) } }, { key: "deleteTable", value: function () { var t = this.getLastRange(this.$editable); t.isCollapsed() && t.isOnCell() && (this.beforeCommand(), this.table.deleteTable(t), this.afterCommand()) } }, { key: "resizeTo", value: function (t, e, n) { var o; if (n) { var i = t.y / t.x, r = e.data("ratio"); o = { width: r > i ? t.x : t.y / r, height: r > i ? t.x * r : t.y } } else o = { width: t.x, height: t.y }; e.css(o) } }, { key: "hasFocus", value: function () { return this.$editable.is(":focus") } }, { key: "focus", value: function () { this.hasFocus() || this.$editable.focus() } }, { key: "isEmpty", value: function () { return dt.isEmpty(this.$editable[0]) || dt.emptyPara === this.$editable.html() } }, { key: "empty", value: function () { this.context.invoke("code", dt.emptyPara) } }, { key: "normalizeContent", value: function () { this.$editable[0].normalize() } }]) && Lt(n.prototype, o), i && Lt(n, i), t }(); function Ft(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Dt = function () { function t(e) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = e, this.$editable = e.layoutInfo.editable } var e, n, o; return e = t, (n = [{ key: "initialize", value: function () { this.$editable.on("paste", this.pasteByEvent.bind(this)) } }, { key: "pasteByEvent", value: function (t) { var e = this, n = t.originalEvent.clipboardData; if (n && n.items && n.items.length) { var o = n.items.length > 1 ? n.items[1] : k.head(n.items); "file" === o.kind && -1 !== o.type.indexOf("image/") ? (this.context.invoke("editor.insertImagesOrCallback", [o.getAsFile()]), t.preventDefault()) : "string" === o.kind && this.context.invoke("editor.isLimited", n.getData("Text").length) && t.preventDefault() } else if (window.clipboardData) { var i = window.clipboardData.getData("text"); this.context.invoke("editor.isLimited", i.length) && t.preventDefault() } setTimeout(function () { e.context.invoke("editor.afterCommand") }, 10) } }]) && Ft(e.prototype, n), o && Ft(e, o), t }(); function Ht(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var zt = function () { function t(n) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.$eventListener = e()(document), this.$editor = n.layoutInfo.editor, this.$editable = n.layoutInfo.editable, this.options = n.options, this.lang = this.options.langInfo, this.documentEventHandlers = {}, this.$dropzone = e()(['<div class="note-dropzone">', '<div class="note-dropzone-message"></div>', "</div>"].join("")).prependTo(this.$editor) } var n, o, i; return n = t, (o = [{ key: "initialize", value: function () { this.options.disableDragAndDrop ? (this.documentEventHandlers.onDrop = function (t) { t.preventDefault() }, this.$eventListener = this.$dropzone, this.$eventListener.on("drop", this.documentEventHandlers.onDrop)) : this.attachDragAndDropEvent() } }, { key: "attachDragAndDropEvent", value: function () { var t = this, n = e()(), o = this.$dropzone.find(".note-dropzone-message"); this.documentEventHandlers.onDragenter = function (e) { var i = t.context.invoke("codeview.isActivated"), r = t.$editor.width() > 0 && t.$editor.height() > 0; i || n.length || !r || (t.$editor.addClass("dragover"), t.$dropzone.width(t.$editor.width()), t.$dropzone.height(t.$editor.height()), o.text(t.lang.image.dragImageHere)), n = n.add(e.target) }, this.documentEventHandlers.onDragleave = function (o) { (n = n.not(o.target)).length && "BODY" !== o.target.nodeName || (n = e()(), t.$editor.removeClass("dragover")) }, this.documentEventHandlers.onDrop = function () { n = e()(), t.$editor.removeClass("dragover") }, this.$eventListener.on("dragenter", this.documentEventHandlers.onDragenter).on("dragleave", this.documentEventHandlers.onDragleave).on("drop", this.documentEventHandlers.onDrop), this.$dropzone.on("dragenter", function () { t.$dropzone.addClass("hover"), o.text(t.lang.image.dropImage) }).on("dragleave", function () { t.$dropzone.removeClass("hover"), o.text(t.lang.image.dragImageHere) }), this.$dropzone.on("drop", function (n) { var o = n.originalEvent.dataTransfer; n.preventDefault(), o && o.files && o.files.length ? (t.$editable.focus(), t.context.invoke("editor.insertImagesOrCallback", o.files)) : e().each(o.types, function (n, i) { if (!(i.toLowerCase().indexOf("_moz_") > -1)) { var r = o.getData(i); i.toLowerCase().indexOf("text") > -1 ? t.context.invoke("editor.pasteHTML", r) : e()(r).each(function (e, n) { t.context.invoke("editor.insertNode", n) }) } }) }).on("dragover", !1) } }, { key: "destroy", value: function () { var t = this; Object.keys(this.documentEventHandlers).forEach(function (e) { t.$eventListener.off(e.substr(2).toLowerCase(), t.documentEventHandlers[e]) }), this.documentEventHandlers = {} } }]) && Ht(n.prototype, o), i && Ht(n, i), t }(); function Bt(t, e) { var n = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"]; if (!n) { if (Array.isArray(t) || (n = function (t, e) { if (!t) return; if ("string" == typeof t) return Mt(t, e); var n = Object.prototype.toString.call(t).slice(8, -1); "Object" === n && t.constructor && (n = t.constructor.name); if ("Map" === n || "Set" === n) return Array.from(t); if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return Mt(t, e) }(t)) || e && t && "number" == typeof t.length) { n && (t = n); var o = 0, i = function () { }; return { s: i, n: function () { return o >= t.length ? { done: !0 } : { done: !1, value: t[o++] } }, e: function (t) { throw t }, f: i } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } var r, a = !0, s = !1; return { s: function () { n = n.call(t) }, n: function () { var t = n.next(); return a = t.done, t }, e: function (t) { s = !0, r = t }, f: function () { try { a || null == n.return || n.return() } finally { if (s) throw r } } } } function Mt(t, e) { (null == e || e > t.length) && (e = t.length); for (var n = 0, o = new Array(e); n < e; n++)o[n] = t[n]; return o } function Ot(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Ut = function () { function t(e) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = e, this.$editor = e.layoutInfo.editor, this.$editable = e.layoutInfo.editable, this.$codable = e.layoutInfo.codable, this.options = e.options, this.CodeMirrorConstructor = window.CodeMirror, this.options.codemirror.CodeMirrorConstructor && (this.CodeMirrorConstructor = this.options.codemirror.CodeMirrorConstructor) } var e, n, o; return e = t, (n = [{ key: "sync", value: function (t) { var e = this.isActivated(), n = this.CodeMirrorConstructor; e && (t ? n ? this.$codable.data("cmEditor").getDoc().setValue(t) : this.$codable.val(t) : n && this.$codable.data("cmEditor").save()) } }, { key: "initialize", value: function () { var t = this; this.$codable.on("keyup", function (e) { e.keyCode === kt.code.ESCAPE && t.deactivate() }) } }, { key: "isActivated", value: function () { return this.$editor.hasClass("codeview") } }, { key: "toggle", value: function () { this.isActivated() ? this.deactivate() : this.activate(), this.context.triggerEvent("codeview.toggled") } }, { key: "purify", value: function (t) { if (this.options.codeviewFilter && (t = t.replace(this.options.codeviewFilterRegex, ""), this.options.codeviewIframeFilter)) { var e = this.options.codeviewIframeWhitelistSrc.concat(this.options.codeviewIframeWhitelistSrcBase); t = t.replace(/(<iframe.*?>.*?(?:<\/iframe>)?)/gi, function (t) { if (/<.+src(?==?('|"|\s)?)[\s\S]+src(?=('|"|\s)?)[^>]*?>/i.test(t)) return ""; var n, o = Bt(e); try { for (o.s(); !(n = o.n()).done;) { var i = n.value; if (new RegExp('src="(https?:)?//' + i.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&") + '/(.+)"').test(t)) return t } } catch (t) { o.e(t) } finally { o.f() } return "" }) } return t } }, { key: "activate", value: function () { var t = this, e = this.CodeMirrorConstructor; if (this.$codable.val(dt.html(this.$editable, this.options.prettifyHtml)), this.$codable.height(this.$editable.height()), this.context.invoke("toolbar.updateCodeview", !0), this.context.invoke("airPopover.updateCodeview", !0), this.$editor.addClass("codeview"), this.$codable.focus(), e) { var n = e.fromTextArea(this.$codable[0], this.options.codemirror); if (this.options.codemirror.tern) { var o = new e.TernServer(this.options.codemirror.tern); n.ternServer = o, n.on("cursorActivity", function (t) { o.updateArgHints(t) }) } n.on("blur", function (e) { t.context.triggerEvent("blur.codeview", n.getValue(), e) }), n.on("change", function () { t.context.triggerEvent("change.codeview", n.getValue(), n) }), n.setSize(null, this.$editable.outerHeight()), this.$codable.data("cmEditor", n) } else this.$codable.on("blur", function (e) { t.context.triggerEvent("blur.codeview", t.$codable.val(), e) }), this.$codable.on("input", function () { t.context.triggerEvent("change.codeview", t.$codable.val(), t.$codable) }) } }, { key: "deactivate", value: function () { if (this.CodeMirrorConstructor) { var t = this.$codable.data("cmEditor"); this.$codable.val(t.getValue()), t.toTextArea() } var e = this.purify(dt.value(this.$codable, this.options.prettifyHtml) || dt.emptyPara), n = this.$editable.html() !== e; this.$editable.html(e), this.$editable.height(this.options.height ? this.$codable.height() : "auto"), this.$editor.removeClass("codeview"), n && this.context.triggerEvent("change", this.$editable.html(), this.$editable), this.$editable.focus(), this.context.invoke("toolbar.updateCodeview", !1), this.context.invoke("airPopover.updateCodeview", !1) } }, { key: "destroy", value: function () { this.isActivated() && this.deactivate() } }]) && Ot(e.prototype, n), o && Ot(e, o), t }(); function jt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Wt = function () { function t(n) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.$document = e()(document), this.$statusbar = n.layoutInfo.statusbar, this.$editable = n.layoutInfo.editable, this.$codable = n.layoutInfo.codable, this.options = n.options } var n, o, i; return n = t, (o = [{ key: "initialize", value: function () { var t = this; this.options.airMode || this.options.disableResizeEditor ? this.destroy() : this.$statusbar.on("mousedown", function (e) { e.preventDefault(), e.stopPropagation(); var n = t.$editable.offset().top - t.$document.scrollTop(), o = t.$codable.offset().top - t.$document.scrollTop(), i = function (e) { var i = e.clientY - (n + 24), r = e.clientY - (o + 24); i = t.options.minheight > 0 ? Math.max(i, t.options.minheight) : i, i = t.options.maxHeight > 0 ? Math.min(i, t.options.maxHeight) : i, r = t.options.minheight > 0 ? Math.max(r, t.options.minheight) : r, r = t.options.maxHeight > 0 ? Math.min(r, t.options.maxHeight) : r, t.$editable.height(i), t.$codable.height(r) }; t.$document.on("mousemove", i).one("mouseup", function () { t.$document.off("mousemove", i) }) }) } }, { key: "destroy", value: function () { this.$statusbar.off(), this.$statusbar.addClass("locked") } }]) && jt(n.prototype, o), i && jt(n, i), t }(); function Kt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Vt = function () { function t(n) { var o = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.$editor = n.layoutInfo.editor, this.$toolbar = n.layoutInfo.toolbar, this.$editable = n.layoutInfo.editable, this.$codable = n.layoutInfo.codable, this.$window = e()(window), this.$scrollbar = e()("html, body"), this.scrollbarClassName = "note-fullscreen-body", this.onResize = function () { o.resizeTo({ h: o.$window.height() - o.$toolbar.outerHeight() }) } } var n, o, i; return n = t, (o = [{ key: "resizeTo", value: function (t) { this.$editable.css("height", t.h), this.$codable.css("height", t.h), this.$codable.data("cmeditor") && this.$codable.data("cmeditor").setsize(null, t.h) } }, { key: "toggle", value: function () { this.$editor.toggleClass("fullscreen"); var t = this.isFullscreen(); this.$scrollbar.toggleClass(this.scrollbarClassName, t), t ? (this.$editable.data("orgHeight", this.$editable.css("height")), this.$editable.data("orgMaxHeight", this.$editable.css("maxHeight")), this.$editable.css("maxHeight", ""), this.$window.on("resize", this.onResize).trigger("resize")) : (this.$window.off("resize", this.onResize), this.resizeTo({ h: this.$editable.data("orgHeight") }), this.$editable.css("maxHeight", this.$editable.css("orgMaxHeight"))), this.context.invoke("toolbar.updateFullscreen", t) } }, { key: "isFullscreen", value: function () { return this.$editor.hasClass("fullscreen") } }, { key: "destroy", value: function () { this.$scrollbar.removeClass(this.scrollbarClassName) } }]) && Kt(n.prototype, o), i && Kt(n, i), t }(); function qt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Gt = function () { function t(n) { var o = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.$document = e()(document), this.$editingArea = n.layoutInfo.editingArea, this.options = n.options, this.lang = this.options.langInfo, this.events = { "summernote.mousedown": function (t, e) { o.update(e.target, e) && e.preventDefault() }, "summernote.keyup summernote.scroll summernote.change summernote.dialog.shown": function () { o.update() }, "summernote.disable summernote.blur": function () { o.hide() }, "summernote.codeview.toggled": function () { o.update() } } } var n, o, i; return n = t, (o = [{ key: "initialize", value: function () { var t = this; this.$handle = e()(['<div class="note-handle">', '<div class="note-control-selection">', '<div class="note-control-selection-bg"></div>', '<div class="note-control-holder note-control-nw"></div>', '<div class="note-control-holder note-control-ne"></div>', '<div class="note-control-holder note-control-sw"></div>', '<div class="', this.options.disableResizeImage ? "note-control-holder" : "note-control-sizing", ' note-control-se"></div>', this.options.disableResizeImage ? "" : '<div class="note-control-selection-info"></div>', "</div>", "</div>"].join("")).prependTo(this.$editingArea), this.$handle.on("mousedown", function (e) { if (dt.isControlSizing(e.target)) { e.preventDefault(), e.stopPropagation(); var n = t.$handle.find(".note-control-selection").data("target"), o = n.offset(), i = t.$document.scrollTop(), r = function (e) { t.context.invoke("editor.resizeTo", { x: e.clientX - o.left, y: e.clientY - (o.top - i) }, n, !e.shiftKey), t.update(n[0], e) }; t.$document.on("mousemove", r).one("mouseup", function (e) { e.preventDefault(), t.$document.off("mousemove", r), t.context.invoke("editor.afterCommand") }), n.data("ratio") || n.data("ratio", n.height() / n.width()) } }), this.$handle.on("wheel", function (e) { e.preventDefault(), t.update() }) } }, { key: "destroy", value: function () { this.$handle.remove() } }, { key: "update", value: function (t, n) { if (this.context.isDisabled()) return !1; var o = dt.isImg(t), i = this.$handle.find(".note-control-selection"); if (this.context.invoke("imagePopover.update", t, n), o) { var r = e()(t), a = r.position(), s = { left: a.left + parseInt(r.css("marginLeft"), 10), top: a.top + parseInt(r.css("marginTop"), 10) }, l = { w: r.outerWidth(!1), h: r.outerHeight(!1) }; i.css({ display: "block", left: s.left, top: s.top, width: l.w, height: l.h }).data("target", r); var c = new Image; c.src = r.attr("src"); var u = l.w + "x" + l.h + " (" + this.lang.image.original + ": " + c.width + "x" + c.height + ")"; i.find(".note-control-selection-info").text(u), this.context.invoke("editor.saveTarget", t) } else this.hide(); return o } }, { key: "hide", value: function () { this.context.invoke("editor.clearTarget"), this.$handle.children().hide() } }]) && qt(n.prototype, o), i && qt(n, i), t }(); function _t(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Yt = function () { function t(e) { var n = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.$note = e.layoutInfo.note, this.events = { "summernote.change": function () { n.$note.val(e.invoke("code")) } } } var e, n, o; return e = t, (n = [{ key: "shouldInitialize", value: function () { return dt.isTextarea(this.$note[0]) } }]) && _t(e.prototype, n), o && _t(e, o), t }(); function Qt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Zt = function () { function t(e) { var n = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = e, this.options = e.options.replace || {}, this.keys = [kt.code.ENTER, kt.code.SPACE, kt.code.PERIOD, kt.code.COMMA, kt.code.SEMICOLON, kt.code.SLASH], this.previousKeydownCode = null, this.events = { "summernote.keyup": function (t, e) { e.isDefaultPrevented() || n.handleKeyup(e) }, "summernote.keydown": function (t, e) { n.handleKeydown(e) } } } var e, n, o; return e = t, (n = [{ key: "shouldInitialize", value: function () { return !!this.options.match } }, { key: "initialize", value: function () { this.lastWord = null } }, { key: "destroy", value: function () { this.lastWord = null } }, { key: "replace", value: function () { if (this.lastWord) { var t = this, e = this.lastWord.toString(); this.options.match(e, function (e) { if (e) { var n = ""; if ("string" == typeof e ? n = dt.createText(e) : e instanceof jQuery ? n = e[0] : e instanceof Node && (n = e), !n) return; t.lastWord.insertNode(n), t.lastWord = null, t.context.invoke("editor.focus") } }) } } }, { key: "handleKeydown", value: function (t) { if (this.previousKeydownCode && k.contains(this.keys, this.previousKeydownCode)) this.previousKeydownCode = t.keyCode; else { if (k.contains(this.keys, t.keyCode)) { var e = this.context.invoke("editor.createRange").getWordRange(); this.lastWord = e } this.previousKeydownCode = t.keyCode } } }, { key: "handleKeyup", value: function (t) { k.contains(this.keys, t.keyCode) && this.replace() } }]) && Qt(e.prototype, n), o && Qt(e, o), t }(); function Xt(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var Jt = function () { function t(e) { var n = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = e, this.$editingArea = e.layoutInfo.editingArea, this.options = e.options, !0 === this.options.inheritPlaceholder && (this.options.placeholder = this.context.$note.attr("placeholder") || this.options.placeholder), this.events = { "summernote.init summernote.change": function () { n.update() }, "summernote.codeview.toggled": function () { n.update() } } } var n, o, i; return n = t, (o = [{ key: "shouldInitialize", value: function () { return !!this.options.placeholder } }, { key: "initialize", value: function () { var t = this; this.$placeholder = e()('<div class="note-placeholder"></div>'), this.$placeholder.on("click", function () { t.context.invoke("focus") }).html(this.options.placeholder).prependTo(this.$editingArea), this.update() } }, { key: "destroy", value: function () { this.$placeholder.remove() } }, { key: "update", value: function () { var t = !this.context.invoke("codeview.isActivated") && this.context.invoke("editor.isEmpty"); this.$placeholder.toggle(t) } }]) && Xt(n.prototype, o), i && Xt(n, i), t }(); function te(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var ee = function () { function t(n) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.ui = e().summernote.ui, this.context = n, this.$toolbar = n.layoutInfo.toolbar, this.options = n.options, this.lang = this.options.langInfo, this.invertedKeyMap = m.invertObject(this.options.keyMap[f.isMac ? "mac" : "pc"]) } var n, o, i; return n = t, (o = [{ key: "representShortcut", value: function (t) { var e = this.invertedKeyMap[t]; return this.options.shortcuts && e ? (f.isMac && (e = e.replace("CMD", "").replace("SHIFT", "")), " (" + (e = e.replace("BACKSLASH", "\\").replace("SLASH", "/").replace("LEFTBRACKET", "[").replace("RIGHTBRACKET", "]")) + ")") : "" } }, { key: "button", value: function (t) { return !this.options.tooltip && t.tooltip && delete t.tooltip, t.container = this.options.container, this.ui.button(t) } }, { key: "initialize", value: function () { this.addToolbarButtons(), this.addImagePopoverButtons(), this.addLinkPopoverButtons(), this.addTablePopoverButtons(), this.fontInstalledMap = {} } }, { key: "destroy", value: function () { delete this.fontInstalledMap } }, { key: "isFontInstalled", value: function (t) { return Object.prototype.hasOwnProperty.call(this.fontInstalledMap, t) || (this.fontInstalledMap[t] = f.isFontInstalled(t) || k.contains(this.options.fontNamesIgnoreCheck, t)), this.fontInstalledMap[t] } }, { key: "isFontDeservedToAdd", value: function (t) { return "" !== (t = t.toLowerCase()) && this.isFontInstalled(t) && -1 === f.genericFontFamilies.indexOf(t) } }, { key: "colorPalette", value: function (t, n, o, i) { var r = this; return this.ui.buttonGroup({ className: "note-color " + t, children: [this.button({ className: "note-current-color-button", contents: this.ui.icon(this.options.icons.font + " note-recent-color"), tooltip: n, click: function (t) { var n = e()(t.currentTarget); o && i ? r.context.invoke("editor.color", { backColor: n.attr("data-backColor"), foreColor: n.attr("data-foreColor") }) : o ? r.context.invoke("editor.color", { backColor: n.attr("data-backColor") }) : i && r.context.invoke("editor.color", { foreColor: n.attr("data-foreColor") }) }, callback: function (t) { var e = t.find(".note-recent-color"); o && (e.css("background-color", r.options.colorButton.backColor), t.attr("data-backColor", r.options.colorButton.backColor)), i ? (e.css("color", r.options.colorButton.foreColor), t.attr("data-foreColor", r.options.colorButton.foreColor)) : e.css("color", "transparent") } }), this.button({ className: "dropdown-toggle", contents: this.ui.dropdownButtonContents("", this.options), tooltip: this.lang.color.more, data: { toggle: "dropdown" } }), this.ui.dropdown({ items: (o ? ['<div class="note-palette">', '<div class="note-palette-title">' + this.lang.color.background + "</div>", "<div>", '<button type="button" class="note-color-reset btn btn-light btn-default" data-event="backColor" data-value="transparent">', this.lang.color.transparent, "</button>", "</div>", '<div class="note-holder" data-event="backColor">\x3c!-- back colors --\x3e</div>', "<div>", '<button type="button" class="note-color-select btn btn-light btn-default" data-event="openPalette" data-value="backColorPicker-' + this.options.id + '">', this.lang.color.cpSelect, "</button>", '<input type="color" id="backColorPicker-' + this.options.id + '" class="note-btn note-color-select-btn" value="' + this.options.colorButton.backColor + '" data-event="backColorPalette-' + this.options.id + '">', "</div>", '<div class="note-holder-custom" id="backColorPalette-' + this.options.id + '" data-event="backColor"></div>', "</div>"].join("") : "") + (i ? ['<div class="note-palette">', '<div class="note-palette-title">' + this.lang.color.foreground + "</div>", "<div>", '<button type="button" class="note-color-reset btn btn-light btn-default" data-event="removeFormat" data-value="foreColor">', this.lang.color.resetToDefault, "</button>", "</div>", '<div class="note-holder" data-event="foreColor">\x3c!-- fore colors --\x3e</div>', "<div>", '<button type="button" class="note-color-select btn btn-light btn-default" data-event="openPalette" data-value="foreColorPicker-' + this.options.id + '">', this.lang.color.cpSelect, "</button>", '<input type="color" id="foreColorPicker-' + this.options.id + '" class="note-btn note-color-select-btn" value="' + this.options.colorButton.foreColor + '" data-event="foreColorPalette-' + this.options.id + '">', "</div>", '<div class="note-holder-custom" id="foreColorPalette-' + this.options.id + '" data-event="foreColor"></div>', "</div>"].join("") : ""), callback: function (t) { t.find(".note-holder").each(function (t, n) { var o = e()(n); o.append(r.ui.palette({ colors: r.options.colors, colorsName: r.options.colorsName, eventName: o.data("event"), container: r.options.container, tooltip: r.options.tooltip }).render()) }); var n = [["#FFFFFF", "#FFFFFF", "#FFFFFF", "#FFFFFF", "#FFFFFF", "#FFFFFF", "#FFFFFF", "#FFFFFF"]]; t.find(".note-holder-custom").each(function (t, o) { var i = e()(o); i.append(r.ui.palette({ colors: n, colorsName: n, eventName: i.data("event"), container: r.options.container, tooltip: r.options.tooltip }).render()) }), t.find("input[type=color]").each(function (n, o) { e()(o).change(function () { var n = t.find("#" + e()(this).data("event")).find(".note-color-btn").first(), o = this.value.toUpperCase(); n.css("background-color", o).attr("aria-label", o).attr("data-value", o).attr("data-original-title", o), n.click() }) }) }, click: function (n) { n.stopPropagation(); var o = e()("." + t).find(".note-dropdown-menu"), i = e()(n.target), a = i.data("event"), s = i.attr("data-value"); if ("openPalette" === a) { var l = o.find("#" + s), c = e()(o.find("#" + l.data("event")).find(".note-color-row")[0]), u = c.find(".note-color-btn").last().detach(), d = l.val(); u.css("background-color", d).attr("aria-label", d).attr("data-value", d).attr("data-original-title", d), c.prepend(u), l.click() } else { if (k.contains(["backColor", "foreColor"], a)) { var h = "backColor" === a ? "background-color" : "color", f = i.closest(".note-color").find(".note-recent-color"), p = i.closest(".note-color").find(".note-current-color-button"); f.css(h, s), p.attr("data-" + a, s) } r.context.invoke("editor." + a, s) } } })] }).render() } }, { key: "addToolbarButtons", value: function () { var t = this; this.context.memo("button.style", function () { return t.ui.buttonGroup([t.button({ className: "dropdown-toggle", contents: t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.magic), t.options), tooltip: t.lang.style.style, data: { toggle: "dropdown" } }), t.ui.dropdown({ className: "dropdown-style", items: t.options.styleTags, title: t.lang.style.style, template: function (e) { "string" == typeof e && (e = { tag: e, title: Object.prototype.hasOwnProperty.call(t.lang.style, e) ? t.lang.style[e] : e }); var n = e.tag, o = e.title; return "<" + n + (e.style ? ' style="' + e.style + '" ' : "") + (e.className ? ' class="' + e.className + '"' : "") + ">" + o + "</" + n + ">" }, click: t.context.createInvokeHandler("editor.formatBlock") })]).render() }); for (var n = function (e, n) { var o = t.options.styleTags[e]; t.context.memo("button.style." + o, function () { return t.button({ className: "note-btn-style-" + o, contents: '<div data-value="' + o + '">' + o.toUpperCase() + "</div>", tooltip: t.lang.style[o], click: t.context.createInvokeHandler("editor.formatBlock") }).render() }) }, o = 0, i = this.options.styleTags.length; o < i; o++)n(o); this.context.memo("button.bold", function () { return t.button({ className: "note-btn-bold", contents: t.ui.icon(t.options.icons.bold), tooltip: t.lang.font.bold + t.representShortcut("bold"), click: t.context.createInvokeHandlerAndUpdateState("editor.bold") }).render() }), this.context.memo("button.italic", function () { return t.button({ className: "note-btn-italic", contents: t.ui.icon(t.options.icons.italic), tooltip: t.lang.font.italic + t.representShortcut("italic"), click: t.context.createInvokeHandlerAndUpdateState("editor.italic") }).render() }), this.context.memo("button.underline", function () { return t.button({ className: "note-btn-underline", contents: t.ui.icon(t.options.icons.underline), tooltip: t.lang.font.underline + t.representShortcut("underline"), click: t.context.createInvokeHandlerAndUpdateState("editor.underline") }).render() }), this.context.memo("button.clear", function () { return t.button({ contents: t.ui.icon(t.options.icons.eraser), tooltip: t.lang.font.clear + t.representShortcut("removeFormat"), click: t.context.createInvokeHandler("editor.removeFormat") }).render() }), this.context.memo("button.strikethrough", function () { return t.button({ className: "note-btn-strikethrough", contents: t.ui.icon(t.options.icons.strikethrough), tooltip: t.lang.font.strikethrough + t.representShortcut("strikethrough"), click: t.context.createInvokeHandlerAndUpdateState("editor.strikethrough") }).render() }), this.context.memo("button.superscript", function () { return t.button({ className: "note-btn-superscript", contents: t.ui.icon(t.options.icons.superscript), tooltip: t.lang.font.superscript, click: t.context.createInvokeHandlerAndUpdateState("editor.superscript") }).render() }), this.context.memo("button.subscript", function () { return t.button({ className: "note-btn-subscript", contents: t.ui.icon(t.options.icons.subscript), tooltip: t.lang.font.subscript, click: t.context.createInvokeHandlerAndUpdateState("editor.subscript") }).render() }), this.context.memo("button.fontname", function () { var n = t.context.invoke("editor.currentStyle"); return t.options.addDefaultFonts && e().each(n["font-family"].split(","), function (e, n) { n = n.trim().replace(/['"]+/g, ""), t.isFontDeservedToAdd(n) && -1 === t.options.fontNames.indexOf(n) && t.options.fontNames.push(n) }), t.ui.buttonGroup([t.button({ className: "dropdown-toggle", contents: t.ui.dropdownButtonContents('<span class="note-current-fontname"></span>', t.options), tooltip: t.lang.font.name, data: { toggle: "dropdown" } }), t.ui.dropdownCheck({ className: "dropdown-fontname", checkClassName: t.options.icons.menuCheck, items: t.options.fontNames.filter(t.isFontInstalled.bind(t)), title: t.lang.font.name, template: function (t) { return '<span style="font-family: ' + f.validFontName(t) + '">' + t + "</span>" }, click: t.context.createInvokeHandlerAndUpdateState("editor.fontName") })]).render() }), this.context.memo("button.fontsize", function () { return t.ui.buttonGroup([t.button({ className: "dropdown-toggle", contents: t.ui.dropdownButtonContents('<span class="note-current-fontsize"></span>', t.options), tooltip: t.lang.font.size, data: { toggle: "dropdown" } }), t.ui.dropdownCheck({ className: "dropdown-fontsize", checkClassName: t.options.icons.menuCheck, items: t.options.fontSizes, title: t.lang.font.size, click: t.context.createInvokeHandlerAndUpdateState("editor.fontSize") })]).render() }), this.context.memo("button.fontsizeunit", function () { return t.ui.buttonGroup([t.button({ className: "dropdown-toggle", contents: t.ui.dropdownButtonContents('<span class="note-current-fontsizeunit"></span>', t.options), tooltip: t.lang.font.sizeunit, data: { toggle: "dropdown" } }), t.ui.dropdownCheck({ className: "dropdown-fontsizeunit", checkClassName: t.options.icons.menuCheck, items: t.options.fontSizeUnits, title: t.lang.font.sizeunit, click: t.context.createInvokeHandlerAndUpdateState("editor.fontSizeUnit") })]).render() }), this.context.memo("button.color", function () { return t.colorPalette("note-color-all", t.lang.color.recent, !0, !0) }), this.context.memo("button.forecolor", function () { return t.colorPalette("note-color-fore", t.lang.color.foreground, !1, !0) }), this.context.memo("button.backcolor", function () { return t.colorPalette("note-color-back", t.lang.color.background, !0, !1) }), this.context.memo("button.ul", function () { return t.button({ contents: t.ui.icon(t.options.icons.unorderedlist), tooltip: t.lang.lists.unordered + t.representShortcut("insertUnorderedList"), click: t.context.createInvokeHandler("editor.insertUnorderedList") }).render() }), this.context.memo("button.ol", function () { return t.button({ contents: t.ui.icon(t.options.icons.orderedlist), tooltip: t.lang.lists.ordered + t.representShortcut("insertOrderedList"), click: t.context.createInvokeHandler("editor.insertOrderedList") }).render() }); var r = this.button({ contents: this.ui.icon(this.options.icons.alignLeft), tooltip: this.lang.paragraph.left + this.representShortcut("justifyLeft"), click: this.context.createInvokeHandler("editor.justifyLeft") }), a = this.button({ contents: this.ui.icon(this.options.icons.alignCenter), tooltip: this.lang.paragraph.center + this.representShortcut("justifyCenter"), click: this.context.createInvokeHandler("editor.justifyCenter") }), s = this.button({ contents: this.ui.icon(this.options.icons.alignRight), tooltip: this.lang.paragraph.right + this.representShortcut("justifyRight"), click: this.context.createInvokeHandler("editor.justifyRight") }), l = this.button({ contents: this.ui.icon(this.options.icons.alignJustify), tooltip: this.lang.paragraph.justify + this.representShortcut("justifyFull"), click: this.context.createInvokeHandler("editor.justifyFull") }), c = this.button({ contents: this.ui.icon(this.options.icons.outdent), tooltip: this.lang.paragraph.outdent + this.representShortcut("outdent"), click: this.context.createInvokeHandler("editor.outdent") }), u = this.button({ contents: this.ui.icon(this.options.icons.indent), tooltip: this.lang.paragraph.indent + this.representShortcut("indent"), click: this.context.createInvokeHandler("editor.indent") }); this.context.memo("button.justifyLeft", m.invoke(r, "render")), this.context.memo("button.justifyCenter", m.invoke(a, "render")), this.context.memo("button.justifyRight", m.invoke(s, "render")), this.context.memo("button.justifyFull", m.invoke(l, "render")), this.context.memo("button.outdent", m.invoke(c, "render")), this.context.memo("button.indent", m.invoke(u, "render")), this.context.memo("button.paragraph", function () { return t.ui.buttonGroup([t.button({ className: "dropdown-toggle", contents: t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.alignLeft), t.options), tooltip: t.lang.paragraph.paragraph, data: { toggle: "dropdown" } }), t.ui.dropdown([t.ui.buttonGroup({ className: "note-align", children: [r, a, s, l] }), t.ui.buttonGroup({ className: "note-list", children: [c, u] })])]).render() }), this.context.memo("button.height", function () { return t.ui.buttonGroup([t.button({ className: "dropdown-toggle", contents: t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.textHeight), t.options), tooltip: t.lang.font.height, data: { toggle: "dropdown" } }), t.ui.dropdownCheck({ items: t.options.lineHeights, checkClassName: t.options.icons.menuCheck, className: "dropdown-line-height", title: t.lang.font.height, click: t.context.createInvokeHandler("editor.lineHeight") })]).render() }), this.context.memo("button.table", function () { return t.ui.buttonGroup([t.button({ className: "dropdown-toggle", contents: t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.table), t.options), tooltip: t.lang.table.table, data: { toggle: "dropdown" } }), t.ui.dropdown({ title: t.lang.table.table, className: "note-table", items: ['<div class="note-dimension-picker">', '<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>', '<div class="note-dimension-picker-highlighted"></div>', '<div class="note-dimension-picker-unhighlighted"></div>', "</div>", '<div class="note-dimension-display">1 x 1</div>'].join("") })], { callback: function (e) { e.find(".note-dimension-picker-mousecatcher").css({ width: t.options.insertTableMaxSize.col + "em", height: t.options.insertTableMaxSize.row + "em" }).mouseup(t.context.createInvokeHandler("editor.insertTable")).on("mousemove", t.tableMoveHandler.bind(t)) } }).render() }), this.context.memo("button.link", function () { return t.button({ contents: t.ui.icon(t.options.icons.link), tooltip: t.lang.link.link + t.representShortcut("linkDialog.show"), click: t.context.createInvokeHandler("linkDialog.show") }).render() }), this.context.memo("button.picture", function () { return t.button({ contents: t.ui.icon(t.options.icons.picture), tooltip: t.lang.image.image, click: t.context.createInvokeHandler("imageDialog.show") }).render() }), this.context.memo("button.video", function () { return t.button({ contents: t.ui.icon(t.options.icons.video), tooltip: t.lang.video.video, click: t.context.createInvokeHandler("videoDialog.show") }).render() }), this.context.memo("button.hr", function () { return t.button({ contents: t.ui.icon(t.options.icons.minus), tooltip: t.lang.hr.insert + t.representShortcut("insertHorizontalRule"), click: t.context.createInvokeHandler("editor.insertHorizontalRule") }).render() }), this.context.memo("button.fullscreen", function () { return t.button({ className: "btn-fullscreen note-codeview-keep", contents: t.ui.icon(t.options.icons.arrowsAlt), tooltip: t.lang.options.fullscreen, click: t.context.createInvokeHandler("fullscreen.toggle") }).render() }), this.context.memo("button.codeview", function () { return t.button({ className: "btn-codeview note-codeview-keep", contents: t.ui.icon(t.options.icons.code), tooltip: t.lang.options.codeview, click: t.context.createInvokeHandler("codeview.toggle") }).render() }), this.context.memo("button.redo", function () { return t.button({ contents: t.ui.icon(t.options.icons.redo), tooltip: t.lang.history.redo + t.representShortcut("redo"), click: t.context.createInvokeHandler("editor.redo") }).render() }), this.context.memo("button.undo", function () { return t.button({ contents: t.ui.icon(t.options.icons.undo), tooltip: t.lang.history.undo + t.representShortcut("undo"), click: t.context.createInvokeHandler("editor.undo") }).render() }), this.context.memo("button.help", function () { return t.button({ contents: t.ui.icon(t.options.icons.question), tooltip: t.lang.options.help, click: t.context.createInvokeHandler("helpDialog.show") }).render() }) } }, { key: "addImagePopoverButtons", value: function () { var t = this; this.context.memo("button.resizeFull", function () { return t.button({ contents: '<span class="note-fontsize-10">100%</span>', tooltip: t.lang.image.resizeFull, click: t.context.createInvokeHandler("editor.resize", "1") }).render() }), this.context.memo("button.resizeHalf", function () { return t.button({ contents: '<span class="note-fontsize-10">50%</span>', tooltip: t.lang.image.resizeHalf, click: t.context.createInvokeHandler("editor.resize", "0.5") }).render() }), this.context.memo("button.resizeQuarter", function () { return t.button({ contents: '<span class="note-fontsize-10">25%</span>', tooltip: t.lang.image.resizeQuarter, click: t.context.createInvokeHandler("editor.resize", "0.25") }).render() }), this.context.memo("button.resizeNone", function () { return t.button({ contents: t.ui.icon(t.options.icons.rollback), tooltip: t.lang.image.resizeNone, click: t.context.createInvokeHandler("editor.resize", "0") }).render() }), this.context.memo("button.floatLeft", function () { return t.button({ contents: t.ui.icon(t.options.icons.floatLeft), tooltip: t.lang.image.floatLeft, click: t.context.createInvokeHandler("editor.floatMe", "left") }).render() }), this.context.memo("button.floatRight", function () { return t.button({ contents: t.ui.icon(t.options.icons.floatRight), tooltip: t.lang.image.floatRight, click: t.context.createInvokeHandler("editor.floatMe", "right") }).render() }), this.context.memo("button.floatNone", function () { return t.button({ contents: t.ui.icon(t.options.icons.rollback), tooltip: t.lang.image.floatNone, click: t.context.createInvokeHandler("editor.floatMe", "none") }).render() }), this.context.memo("button.removeMedia", function () { return t.button({ contents: t.ui.icon(t.options.icons.trash), tooltip: t.lang.image.remove, click: t.context.createInvokeHandler("editor.removeMedia") }).render() }) } }, { key: "addLinkPopoverButtons", value: function () { var t = this; this.context.memo("button.linkDialogShow", function () { return t.button({ contents: t.ui.icon(t.options.icons.link), tooltip: t.lang.link.edit, click: t.context.createInvokeHandler("linkDialog.show") }).render() }), this.context.memo("button.unlink", function () { return t.button({ contents: t.ui.icon(t.options.icons.unlink), tooltip: t.lang.link.unlink, click: t.context.createInvokeHandler("editor.unlink") }).render() }) } }, { key: "addTablePopoverButtons", value: function () { var t = this; this.context.memo("button.addRowUp", function () { return t.button({ className: "btn-md", contents: t.ui.icon(t.options.icons.rowAbove), tooltip: t.lang.table.addRowAbove, click: t.context.createInvokeHandler("editor.addRow", "top") }).render() }), this.context.memo("button.addRowDown", function () { return t.button({ className: "btn-md", contents: t.ui.icon(t.options.icons.rowBelow), tooltip: t.lang.table.addRowBelow, click: t.context.createInvokeHandler("editor.addRow", "bottom") }).render() }), this.context.memo("button.addColLeft", function () { return t.button({ className: "btn-md", contents: t.ui.icon(t.options.icons.colBefore), tooltip: t.lang.table.addColLeft, click: t.context.createInvokeHandler("editor.addCol", "left") }).render() }), this.context.memo("button.addColRight", function () { return t.button({ className: "btn-md", contents: t.ui.icon(t.options.icons.colAfter), tooltip: t.lang.table.addColRight, click: t.context.createInvokeHandler("editor.addCol", "right") }).render() }), this.context.memo("button.deleteRow", function () { return t.button({ className: "btn-md", contents: t.ui.icon(t.options.icons.rowRemove), tooltip: t.lang.table.delRow, click: t.context.createInvokeHandler("editor.deleteRow") }).render() }), this.context.memo("button.deleteCol", function () { return t.button({ className: "btn-md", contents: t.ui.icon(t.options.icons.colRemove), tooltip: t.lang.table.delCol, click: t.context.createInvokeHandler("editor.deleteCol") }).render() }), this.context.memo("button.deleteTable", function () { return t.button({ className: "btn-md", contents: t.ui.icon(t.options.icons.trash), tooltip: t.lang.table.delTable, click: t.context.createInvokeHandler("editor.deleteTable") }).render() }) } }, { key: "build", value: function (t, e) { for (var n = 0, o = e.length; n < o; n++) { for (var i = e[n], r = Array.isArray(i) ? i[0] : i, a = Array.isArray(i) ? 1 === i.length ? [i[0]] : i[1] : [i], s = this.ui.buttonGroup({ className: "note-" + r }).render(), l = 0, c = a.length; l < c; l++) { var u = this.context.memo("button." + a[l]); u && s.append("function" == typeof u ? u(this.context) : u) } s.appendTo(t) } } }, { key: "updateCurrentStyle", value: function (t) { var n = t || this.$toolbar, o = this.context.invoke("editor.currentStyle"); if (this.updateBtnStates(n, { ".note-btn-bold": function () { return "bold" === o["font-bold"] }, ".note-btn-italic": function () { return "italic" === o["font-italic"] }, ".note-btn-underline": function () { return "underline" === o["font-underline"] }, ".note-btn-subscript": function () { return "subscript" === o["font-subscript"] }, ".note-btn-superscript": function () { return "superscript" === o["font-superscript"] }, ".note-btn-strikethrough": function () { return "strikethrough" === o["font-strikethrough"] } }), o["font-family"]) { var i = o["font-family"].split(",").map(function (t) { return t.replace(/[\'\"]/g, "").replace(/\s+$/, "").replace(/^\s+/, "") }), r = k.find(i, this.isFontInstalled.bind(this)); n.find(".dropdown-fontname a").each(function (t, n) { var o = e()(n), i = o.data("value") + "" == r + ""; o.toggleClass("checked", i) }), n.find(".note-current-fontname").text(r).css("font-family", r) } if (o["font-size"]) { var a = o["font-size"]; n.find(".dropdown-fontsize a").each(function (t, n) { var o = e()(n), i = o.data("value") + "" == a + ""; o.toggleClass("checked", i) }), n.find(".note-current-fontsize").text(a); var s = o["font-size-unit"]; n.find(".dropdown-fontsizeunit a").each(function (t, n) { var o = e()(n), i = o.data("value") + "" == s + ""; o.toggleClass("checked", i) }), n.find(".note-current-fontsizeunit").text(s) } if (o["line-height"]) { var l = o["line-height"]; n.find(".dropdown-line-height a").each(function (t, n) { var o = e()(n), i = e()(n).data("value") + "" == l + ""; o.toggleClass("checked", i) }), n.find(".note-current-line-height").text(l) } } }, { key: "updateBtnStates", value: function (t, n) { var o = this; e().each(n, function (e, n) { o.ui.toggleBtnActive(t.find(e), n()) }) } }, { key: "tableMoveHandler", value: function (t) { var n, o = e()(t.target.parentNode), i = o.next(), r = o.find(".note-dimension-picker-mousecatcher"), a = o.find(".note-dimension-picker-highlighted"), s = o.find(".note-dimension-picker-unhighlighted"); if (void 0 === t.offsetX) { var l = e()(t.target).offset(); n = { x: t.pageX - l.left, y: t.pageY - l.top } } else n = { x: t.offsetX, y: t.offsetY }; var c = Math.ceil(n.x / 18) || 1, u = Math.ceil(n.y / 18) || 1; a.css({ width: c + "em", height: u + "em" }), r.data("value", c + "x" + u), c > 3 && c < this.options.insertTableMaxSize.col && s.css({ width: c + 1 + "em" }), u > 3 && u < this.options.insertTableMaxSize.row && s.css({ height: u + 1 + "em" }), i.html(c + " x " + u) } }]) && te(n.prototype, o), i && te(n, i), t }(); function ne(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var oe = function () { function t(n) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.$window = e()(window), this.$document = e()(document), this.ui = e().summernote.ui, this.$note = n.layoutInfo.note, this.$editor = n.layoutInfo.editor, this.$toolbar = n.layoutInfo.toolbar, this.$editable = n.layoutInfo.editable, this.$statusbar = n.layoutInfo.statusbar, this.options = n.options, this.isFollowing = !1, this.followScroll = this.followScroll.bind(this) } var n, o, i; return n = t, (o = [{ key: "shouldInitialize", value: function () { return !this.options.airMode } }, { key: "initialize", value: function () { var t = this; this.options.toolbar = this.options.toolbar || [], this.options.toolbar.length ? this.context.invoke("buttons.build", this.$toolbar, this.options.toolbar) : this.$toolbar.hide(), this.options.toolbarContainer && this.$toolbar.appendTo(this.options.toolbarContainer), this.changeContainer(!1), this.$note.on("summernote.keyup summernote.mouseup summernote.change", function () { t.context.invoke("buttons.updateCurrentStyle") }), this.context.invoke("buttons.updateCurrentStyle"), this.options.followingToolbar && this.$window.on("scroll resize", this.followScroll) } }, { key: "destroy", value: function () { this.$toolbar.children().remove(), this.options.followingToolbar && this.$window.off("scroll resize", this.followScroll) } }, { key: "followScroll", value: function () { if (this.$editor.hasClass("fullscreen")) return !1; var t = this.$editor.outerHeight(), n = this.$editor.width(), o = this.$toolbar.height(), i = this.$statusbar.height(), r = 0; this.options.otherStaticBar && (r = e()(this.options.otherStaticBar).outerHeight()); var a = this.$document.scrollTop(), s = this.$editor.offset().top, l = s - r, c = s + t - r - o - i; !this.isFollowing && a > l && a < c - o ? (this.isFollowing = !0, this.$editable.css({ marginTop: this.$toolbar.outerHeight() }), this.$toolbar.css({ position: "fixed", top: r, width: n, zIndex: 1e3 })) : this.isFollowing && (a < l || a > c) && (this.isFollowing = !1, this.$toolbar.css({ position: "relative", top: 0, width: "100%", zIndex: "auto" }), this.$editable.css({ marginTop: "" })) } }, { key: "changeContainer", value: function (t) { t ? this.$toolbar.prependTo(this.$editor) : this.options.toolbarContainer && this.$toolbar.appendTo(this.options.toolbarContainer), this.options.followingToolbar && this.followScroll() } }, { key: "updateFullscreen", value: function (t) { this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"), t), this.changeContainer(t) } }, { key: "updateCodeview", value: function (t) { this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"), t), t ? this.deactivate() : this.activate() } }, { key: "activate", value: function (t) { var e = this.$toolbar.find("button"); t || (e = e.not(".note-codeview-keep")), this.ui.toggleBtn(e, !0) } }, { key: "deactivate", value: function (t) { var e = this.$toolbar.find("button"); t || (e = e.not(".note-codeview-keep")), this.ui.toggleBtn(e, !1) } }]) && ne(n.prototype, o), i && ne(n, i), t }(); function ie(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var re = function () { function t(n) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.ui = e().summernote.ui, this.$body = e()(document.body), this.$editor = n.layoutInfo.editor, this.options = n.options, this.lang = this.options.langInfo, n.memo("help.linkDialog.show", this.options.langInfo.help["linkDialog.show"]) } var n, o, i; return n = t, (o = [{ key: "initialize", value: function () { var t = this.options.dialogsInBody ? this.$body : this.options.container, n = ['<div class="form-group note-form-group">', '<label for="note-dialog-link-txt-'.concat(this.options.id, '" class="note-form-label">').concat(this.lang.link.textToDisplay, "</label>"), '<input id="note-dialog-link-txt-'.concat(this.options.id, '" class="note-link-text form-control note-form-control note-input" type="text"/>'), "</div>", '<div class="form-group note-form-group">', '<label for="note-dialog-link-url-'.concat(this.options.id, '" class="note-form-label">').concat(this.lang.link.url, "</label>"), '<input id="note-dialog-link-url-'.concat(this.options.id, '" class="note-link-url form-control note-form-control note-input" type="text" value="http://"/>'), "</div>", this.options.disableLinkTarget ? "" : e()("<div></div>").append(this.ui.checkbox({ className: "sn-checkbox-open-in-new-window", text: this.lang.link.openInNewWindow, checked: !0 }).render()).html(), e()("<div></div>").append(this.ui.checkbox({ className: "sn-checkbox-use-protocol", text: this.lang.link.useProtocol, checked: !0 }).render()).html()].join(""), o = '<input type="button" href="#" class="'.concat("btn btn-primary note-btn note-btn-primary note-link-btn", '" value="').concat(this.lang.link.insert, '" disabled>'); this.$dialog = this.ui.dialog({ className: "link-dialog", title: this.lang.link.insert, fade: this.options.dialogsFade, body: n, footer: o }).render().appendTo(t) } }, { key: "destroy", value: function () { this.ui.hideDialog(this.$dialog), this.$dialog.remove() } }, { key: "bindEnterKey", value: function (t, e) { t.on("keypress", function (t) { t.keyCode === kt.code.ENTER && (t.preventDefault(), e.trigger("click")) }) } }, { key: "toggleLinkBtn", value: function (t, e, n) { this.ui.toggleBtn(t, e.val() && n.val()) } }, { key: "showLinkDialog", value: function (t) { var n = this; return e().Deferred(function (e) { var o = n.$dialog.find(".note-link-text"), i = n.$dialog.find(".note-link-url"), r = n.$dialog.find(".note-link-btn"), a = n.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]"), s = n.$dialog.find(".sn-checkbox-use-protocol input[type=checkbox]"); n.ui.onDialogShown(n.$dialog, function () { n.context.triggerEvent("dialog.shown"), !t.url && m.isValidUrl(t.text) && (t.url = t.text), o.on("input paste propertychange", function () { t.text = o.val(), n.toggleLinkBtn(r, o, i) }).val(t.text), i.on("input paste propertychange", function () { t.text || o.val(i.val()), n.toggleLinkBtn(r, o, i) }).val(t.url), f.isSupportTouch || i.trigger("focus"), n.toggleLinkBtn(r, o, i), n.bindEnterKey(i, r), n.bindEnterKey(o, r); var l = void 0 !== t.isNewWindow ? t.isNewWindow : n.context.options.linkTargetBlank; a.prop("checked", l); var c = !t.url && n.context.options.useProtocol; s.prop("checked", c), r.one("click", function (r) { r.preventDefault(), e.resolve({ range: t.range, url: i.val(), text: o.val(), isNewWindow: a.is(":checked"), checkProtocol: s.is(":checked") }), n.ui.hideDialog(n.$dialog) }) }), n.ui.onDialogHidden(n.$dialog, function () { o.off(), i.off(), r.off(), "pending" === e.state() && e.reject() }), n.ui.showDialog(n.$dialog) }).promise() } }, { key: "show", value: function () { var t = this, e = this.context.invoke("editor.getLinkInfo"); this.context.invoke("editor.saveRange"), this.showLinkDialog(e).then(function (e) { t.context.invoke("editor.restoreRange"), t.context.invoke("editor.createLink", e) }).fail(function () { t.context.invoke("editor.restoreRange") }) } }]) && ie(n.prototype, o), i && ie(n, i), t }(); function ae(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var se = function () { function t(n) { var o = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.ui = e().summernote.ui, this.options = n.options, this.events = { "summernote.keyup summernote.mouseup summernote.change summernote.scroll": function () { o.update() }, "summernote.disable summernote.dialog.shown": function () { o.hide() }, "summernote.blur": function (t, e) { e.originalEvent && e.originalEvent.relatedTarget && o.$popover[0].contains(e.originalEvent.relatedTarget) || o.hide() } } } var n, o, i; return n = t, (o = [{ key: "shouldInitialize", value: function () { return !k.isEmpty(this.options.popover.link) } }, { key: "initialize", value: function () { this.$popover = this.ui.popover({ className: "note-link-popover", callback: function (t) { t.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>') } }).render().appendTo(this.options.container); var t = this.$popover.find(".popover-content,.note-popover-content"); this.context.invoke("buttons.build", t, this.options.popover.link), this.$popover.on("mousedown", function (t) { t.preventDefault() }) } }, { key: "destroy", value: function () { this.$popover.remove() } }, { key: "update", value: function () { if (this.context.invoke("editor.hasFocus")) { var t = this.context.invoke("editor.getLastRange"); if (t.isCollapsed() && t.isOnAnchor()) { var n = dt.ancestor(t.sc, dt.isAnchor), o = e()(n).attr("href"); this.$popover.find("a").attr("href", o).text(o); var i = dt.posFromPlaceholder(n), r = e()(this.options.container).offset(); i.top -= r.top, i.left -= r.left, this.$popover.css({ display: "block", left: i.left, top: i.top }) } else this.hide() } else this.hide() } }, { key: "hide", value: function () { this.$popover.hide() } }]) && ae(n.prototype, o), i && ae(n, i), t }(); function le(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var ce = function () { function t(n) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.ui = e().summernote.ui, this.$body = e()(document.body), this.$editor = n.layoutInfo.editor, this.options = n.options, this.lang = this.options.langInfo } var n, o, i; return n = t, (o = [{ key: "initialize", value: function () { var t = ""; if (this.options.maximumImageFileSize) { var e = Math.floor(Math.log(this.options.maximumImageFileSize) / Math.log(1024)), n = 1 * (this.options.maximumImageFileSize / Math.pow(1024, e)).toFixed(2) + " " + " KMGTP"[e] + "B"; t = "<small>".concat(this.lang.image.maximumFileSize + " : " + n, "</small>") } var o = this.options.dialogsInBody ? this.$body : this.options.container, i = ['<div class="form-group note-form-group note-group-select-from-files">', '<label for="note-dialog-image-file-' + this.options.id + '" class="note-form-label">' + this.lang.image.selectFromFiles + "</label>", '<input id="note-dialog-image-file-' + this.options.id + '" class="note-image-input form-control-file note-form-control note-input" ', ' type="file" name="files" accept="' + this.options.acceptImageFileTypes + '" multiple="multiple"/>', t, "</div>", '<div class="form-group note-group-image-url">', '<label for="note-dialog-image-url-' + this.options.id + '" class="note-form-label">' + this.lang.image.url + "</label>", '<input id="note-dialog-image-url-' + this.options.id + '" class="note-image-url form-control note-form-control note-input" type="text"/>', "</div>"].join(""), r = '<input type="button" href="#" class="'.concat("btn btn-primary note-btn note-btn-primary note-image-btn", '" value="').concat(this.lang.image.insert, '" disabled>'); this.$dialog = this.ui.dialog({ title: this.lang.image.insert, fade: this.options.dialogsFade, body: i, footer: r }).render().appendTo(o) } }, { key: "destroy", value: function () { this.ui.hideDialog(this.$dialog), this.$dialog.remove() } }, { key: "bindEnterKey", value: function (t, e) { t.on("keypress", function (t) { t.keyCode === kt.code.ENTER && (t.preventDefault(), e.trigger("click")) }) } }, { key: "show", value: function () { var t = this; this.context.invoke("editor.saveRange"), this.showImageDialog().then(function (e) { t.ui.hideDialog(t.$dialog), t.context.invoke("editor.restoreRange"), "string" == typeof e ? t.options.callbacks.onImageLinkInsert ? t.context.triggerEvent("image.link.insert", e) : t.context.invoke("editor.insertImage", e) : t.context.invoke("editor.insertImagesOrCallback", e) }).fail(function () { t.context.invoke("editor.restoreRange") }) } }, { key: "showImageDialog", value: function () { var t = this; return e().Deferred(function (e) { var n = t.$dialog.find(".note-image-input"), o = t.$dialog.find(".note-image-url"), i = t.$dialog.find(".note-image-btn"); t.ui.onDialogShown(t.$dialog, function () { t.context.triggerEvent("dialog.shown"), n.replaceWith(n.clone().on("change", function (t) { e.resolve(t.target.files || t.target.value) }).val("")), o.on("input paste propertychange", function () { t.ui.toggleBtn(i, o.val()) }).val(""), f.isSupportTouch || o.trigger("focus"), i.click(function (t) { t.preventDefault(), e.resolve(o.val()) }), t.bindEnterKey(o, i) }), t.ui.onDialogHidden(t.$dialog, function () { n.off(), o.off(), i.off(), "pending" === e.state() && e.reject() }), t.ui.showDialog(t.$dialog) }) } }]) && le(n.prototype, o), i && le(n, i), t }(); function ue(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var de = function () { function t(n) { var o = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.ui = e().summernote.ui, this.editable = n.layoutInfo.editable[0], this.options = n.options, this.events = { "summernote.disable summernote.dialog.shown": function () { o.hide() }, "summernote.blur": function (t, e) { e.originalEvent && e.originalEvent.relatedTarget && o.$popover[0].contains(e.originalEvent.relatedTarget) || o.hide() } } } var n, o, i; return n = t, (o = [{ key: "shouldInitialize", value: function () { return !k.isEmpty(this.options.popover.image) } }, { key: "initialize", value: function () { this.$popover = this.ui.popover({ className: "note-image-popover" }).render().appendTo(this.options.container); var t = this.$popover.find(".popover-content,.note-popover-content"); this.context.invoke("buttons.build", t, this.options.popover.image), this.$popover.on("mousedown", function (t) { t.preventDefault() }) } }, { key: "destroy", value: function () { this.$popover.remove() } }, { key: "update", value: function (t, n) { if (dt.isImg(t)) { var o = e()(t).offset(), i = e()(this.options.container).offset(), r = {}; this.options.popatmouse ? (r.left = n.pageX - 20, r.top = n.pageY) : r = o, r.top -= i.top, r.left -= i.left, this.$popover.css({ display: "block", left: r.left, top: r.top }) } else this.hide() } }, { key: "hide", value: function () { this.$popover.hide() } }]) && ue(n.prototype, o), i && ue(n, i), t }(); function he(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var fe = function () { function t(n) { var o = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.ui = e().summernote.ui, this.options = n.options, this.events = { "summernote.mousedown": function (t, e) { o.update(e.target) }, "summernote.keyup summernote.scroll summernote.change": function () { o.update() }, "summernote.disable summernote.dialog.shown": function () { o.hide() }, "summernote.blur": function (t, e) { e.originalEvent && e.originalEvent.relatedTarget && o.$popover[0].contains(e.originalEvent.relatedTarget) || o.hide() } } } var n, o, i; return n = t, (o = [{ key: "shouldInitialize", value: function () { return !k.isEmpty(this.options.popover.table) } }, { key: "initialize", value: function () { this.$popover = this.ui.popover({ className: "note-table-popover" }).render().appendTo(this.options.container); var t = this.$popover.find(".popover-content,.note-popover-content"); this.context.invoke("buttons.build", t, this.options.popover.table), f.isFF && document.execCommand("enableInlineTableEditing", !1, !1), this.$popover.on("mousedown", function (t) { t.preventDefault() }) } }, { key: "destroy", value: function () { this.$popover.remove() } }, { key: "update", value: function (t) { if (this.context.isDisabled()) return !1; var n = dt.isCell(t) || dt.isCell(null == t ? void 0 : t.parentElement); if (n) { var o = dt.posFromPlaceholder(t), i = e()(this.options.container).offset(); o.top -= i.top, o.left -= i.left, this.$popover.css({ display: "block", left: o.left, top: o.top }) } else this.hide(); return n } }, { key: "hide", value: function () { this.$popover.hide() } }]) && he(n.prototype, o), i && he(n, i), t }(); function pe(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var me = function () { function t(n) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.ui = e().summernote.ui, this.$body = e()(document.body), this.$editor = n.layoutInfo.editor, this.options = n.options, this.lang = this.options.langInfo } var n, o, i; return n = t, (o = [{ key: "initialize", value: function () { var t = this.options.dialogsInBody ? this.$body : this.options.container, e = ['<div class="form-group note-form-group row-fluid">', '<label for="note-dialog-video-url-'.concat(this.options.id, '" class="note-form-label">').concat(this.lang.video.url, ' <small class="text-muted">').concat(this.lang.video.providers, "</small></label>"), '<input id="note-dialog-video-url-'.concat(this.options.id, '" class="note-video-url form-control note-form-control note-input" type="text"/>'), "</div>"].join(""), n = '<input type="button" href="#" class="'.concat("btn btn-primary note-btn note-btn-primary note-video-btn", '" value="').concat(this.lang.video.insert, '" disabled>'); this.$dialog = this.ui.dialog({ title: this.lang.video.insert, fade: this.options.dialogsFade, body: e, footer: n }).render().appendTo(t) } }, { key: "destroy", value: function () { this.ui.hideDialog(this.$dialog), this.$dialog.remove() } }, { key: "bindEnterKey", value: function (t, e) { t.on("keypress", function (t) { t.keyCode === kt.code.ENTER && (t.preventDefault(), e.trigger("click")) }) } }, { key: "createVideoNode", value: function (t) { var n, o = t.match(/\/\/(?:(?:www|m)\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/), i = t.match(/(?:\.|\/\/)drive\.google\.com\/file\/d\/(.[a-zA-Z0-9_-]*)\/view/), r = t.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/), a = t.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/), s = t.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/), l = t.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/), c = t.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/), u = t.match(/\/\/(.*)\/videos\/watch\/([^?]*)(?:\?(?:start=(\w*))?(?:&stop=(\w*))?(?:&loop=([10]))?(?:&autoplay=([10]))?(?:&muted=([10]))?)?/), d = t.match(/\/\/v\.qq\.com.*?vid=(.+)/), h = t.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/), f = t.match(/^.+.(mp4|m4v)$/), p = t.match(/^.+.(ogg|ogv)$/), m = t.match(/^.+.(webm)$/), v = t.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/); if (o && 11 === o[1].length) { var g = o[1], b = 0; if (void 0 !== o[2]) { var y = o[2].match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/); if (y) for (var k = [3600, 60, 1], w = 0, C = k.length; w < C; w++)b += void 0 !== y[w + 1] ? k[w] * parseInt(y[w + 1], 10) : 0 } n = e()("<iframe>").attr("frameborder", 0).attr("src", "//www.youtube.com/embed/" + g + (b > 0 ? "?start=" + b : "")).attr("width", "640").attr("height", "360") } else if (i && i[0].length) n = e()("<iframe>").attr("frameborder", 0).attr("src", "https://drive.google.com/file/d/" + i[1] + "/preview").attr("width", "640").attr("height", "480"); else if (r && r[0].length) n = e()("<iframe>").attr("frameborder", 0).attr("src", "https://instagram.com/p/" + r[1] + "/embed/").attr("width", "612").attr("height", "710").attr("scrolling", "no").attr("allowtransparency", "true"); else if (a && a[0].length) n = e()("<iframe>").attr("frameborder", 0).attr("src", a[0] + "/embed/simple").attr("width", "600").attr("height", "600").attr("class", "vine-embed"); else if (s && s[3].length) n = e()("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder", 0).attr("src", "//player.vimeo.com/video/" + s[3]).attr("width", "640").attr("height", "360"); else if (l && l[2].length) n = e()("<iframe>").attr("frameborder", 0).attr("src", "//www.dailymotion.com/embed/video/" + l[2]).attr("width", "640").attr("height", "360"); else if (c && c[1].length) n = e()("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder", 0).attr("height", "498").attr("width", "510").attr("src", "//player.youku.com/embed/" + c[1]); else if (u && u[0].length) { var x = 0; "undefined" !== u[2] && (x = u[2]); var S = 0; "undefined" !== u[3] && (S = u[3]); var T = 0; "undefined" !== u[4] && (T = u[4]); var E = 0; "undefined" !== u[5] && (E = u[5]); var I = 0; "undefined" !== u[6] && (I = u[6]), n = e()('<iframe allowfullscreen sandbox="allow-same-origin allow-scripts allow-popups">').attr("frameborder", 0).attr("src", "//" + u[1] + "/videos/embed/" + u[2] + "?loop=" + T + "&autoplay=" + E + "&muted=" + I + (x > 0 ? "&start=" + x : "") + (S > 0 ? "&end=" + b : "")).attr("width", "560").attr("height", "315") } else if (d && d[1].length || h && h[2].length) { var $ = d && d[1].length ? d[1] : h[2]; n = e()("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder", 0).attr("height", "310").attr("width", "500").attr("src", "https://v.qq.com/txp/iframe/player.html?vid=" + $ + "&amp;auto=0") } else if (f || p || m) n = e()("<video controls>").attr("src", t).attr("width", "640").attr("height", "360"); else { if (!v || !v[0].length) return !1; n = e()("<iframe>").attr("frameborder", 0).attr("src", "https://www.facebook.com/plugins/video.php?href=" + encodeURIComponent(v[0]) + "&show_text=0&width=560").attr("width", "560").attr("height", "301").attr("scrolling", "no").attr("allowtransparency", "true") } return n.addClass("note-video-clip"), n[0] } }, { key: "show", value: function () { var t = this, e = this.context.invoke("editor.getSelectedText"); this.context.invoke("editor.saveRange"), this.showVideoDialog(e).then(function (e) { t.ui.hideDialog(t.$dialog), t.context.invoke("editor.restoreRange"); var n = t.createVideoNode(e); n && t.context.invoke("editor.insertNode", n) }).fail(function () { t.context.invoke("editor.restoreRange") }) } }, { key: "showVideoDialog", value: function () { var t = this; return e().Deferred(function (e) { var n = t.$dialog.find(".note-video-url"), o = t.$dialog.find(".note-video-btn"); t.ui.onDialogShown(t.$dialog, function () { t.context.triggerEvent("dialog.shown"), n.on("input paste propertychange", function () { t.ui.toggleBtn(o, n.val()) }), f.isSupportTouch || n.trigger("focus"), o.click(function (t) { t.preventDefault(), e.resolve(n.val()) }), t.bindEnterKey(n, o) }), t.ui.onDialogHidden(t.$dialog, function () { n.off(), o.off(), "pending" === e.state() && e.reject() }), t.ui.showDialog(t.$dialog) }) } }]) && pe(n.prototype, o), i && pe(n, i), t }(); function ve(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var ge = function () { function t(n) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.ui = e().summernote.ui, this.$body = e()(document.body), this.$editor = n.layoutInfo.editor, this.options = n.options, this.lang = this.options.langInfo } var n, o, i; return n = t, (o = [{ key: "initialize", value: function () { var t = this.options.dialogsInBody ? this.$body : this.options.container, e = ['<p class="text-center">', '<a href="http://summernote.org/" target="_blank" rel="noopener noreferrer">Summernote 0.8.20</a>  ', '<a href="https://github.com/summernote/summernote" target="_blank" rel="noopener noreferrer">Project</a>  ', '<a href="https://github.com/summernote/summernote/issues" target="_blank" rel="noopener noreferrer">Issues</a>', "</p>"].join(""); this.$dialog = this.ui.dialog({ title: this.lang.options.help, fade: this.options.dialogsFade, body: this.createShortcutList(), footer: e, callback: function (t) { t.find(".modal-body,.note-modal-body").css({ "max-height": 300, overflow: "scroll" }) } }).render().appendTo(t) } }, { key: "destroy", value: function () { this.ui.hideDialog(this.$dialog), this.$dialog.remove() } }, { key: "createShortcutList", value: function () { var t = this, n = this.options.keyMap[f.isMac ? "mac" : "pc"]; return Object.keys(n).map(function (o) { var i = n[o], r = e()('<div><div class="help-list-item"></div></div>'); return r.append(e()("<label><kbd>" + o + "</kdb></label>").css({ width: 180, "margin-right": 10 })).append(e()("<span></span>").html(t.context.memo("help." + i) || i)), r.html() }).join("") } }, { key: "showHelpDialog", value: function () { var t = this; return e().Deferred(function (e) { t.ui.onDialogShown(t.$dialog, function () { t.context.triggerEvent("dialog.shown"), e.resolve() }), t.ui.showDialog(t.$dialog) }).promise() } }, { key: "show", value: function () { var t = this; this.context.invoke("editor.saveRange"), this.showHelpDialog().then(function () { t.context.invoke("editor.restoreRange") }) } }]) && ve(n.prototype, o), i && ve(n, i), t }(); function be(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var ye = function () { function t(n) { var o = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.ui = e().summernote.ui, this.options = n.options, this.hidable = !0, this.onContextmenu = !1, this.pageX = null, this.pageY = null, this.events = { "summernote.contextmenu": function (t) { o.options.editing && (t.preventDefault(), t.stopPropagation(), o.onContextmenu = !0, o.update(!0)) }, "summernote.mousedown": function (t, e) { o.pageX = e.pageX, o.pageY = e.pageY }, "summernote.keyup summernote.mouseup summernote.scroll": function (t, e) { o.options.editing && !o.onContextmenu && (o.pageX = e.pageX, o.pageY = e.pageY, o.update()), o.onContextmenu = !1 }, "summernote.disable summernote.change summernote.dialog.shown summernote.blur": function () { o.hide() }, "summernote.focusout": function () { o.$popover.is(":active,:focus") || o.hide() } } } var n, o, i; return n = t, (o = [{ key: "shouldInitialize", value: function () { return this.options.airMode && !k.isEmpty(this.options.popover.air) } }, { key: "initialize", value: function () { var t = this; this.$popover = this.ui.popover({ className: "note-air-popover" }).render().appendTo(this.options.container); var e = this.$popover.find(".popover-content"); this.context.invoke("buttons.build", e, this.options.popover.air), this.$popover.on("mousedown", function () { t.hidable = !1 }), this.$popover.on("mouseup", function () { t.hidable = !0 }) } }, { key: "destroy", value: function () { this.$popover.remove() } }, { key: "update", value: function (t) { var n = this.context.invoke("editor.currentStyle"); if (!n.range || n.range.isCollapsed() && !t) this.hide(); else { var o = { left: this.pageX, top: this.pageY }, i = e()(this.options.container).offset(); o.top -= i.top, o.left -= i.left, this.$popover.css({ display: "block", left: Math.max(o.left, 0) + -5, top: o.top + 5 }), this.context.invoke("buttons.updateCurrentStyle", this.$popover) } } }, { key: "updateCodeview", value: function (t) { this.ui.toggleBtnActive(this.$popover.find(".btn-codeview"), t), t && this.hide() } }, { key: "hide", value: function () { this.hidable && this.$popover.hide() } }]) && be(n.prototype, o), i && be(n, i), t }(); function ke(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } var we = function () { function t(n) { var o = this; !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.context = n, this.ui = e().summernote.ui, this.$editable = n.layoutInfo.editable, this.options = n.options, this.hint = this.options.hint || [], this.direction = this.options.hintDirection || "bottom", this.hints = Array.isArray(this.hint) ? this.hint : [this.hint], this.events = { "summernote.keyup": function (t, e) { e.isDefaultPrevented() || o.handleKeyup(e) }, "summernote.keydown": function (t, e) { o.handleKeydown(e) }, "summernote.disable summernote.dialog.shown summernote.blur": function () { o.hide() } } } var n, o, i; return n = t, (o = [{ key: "shouldInitialize", value: function () { return this.hints.length > 0 } }, { key: "initialize", value: function () { var t = this; this.lastWordRange = null, this.matchingWord = null, this.$popover = this.ui.popover({ className: "note-hint-popover", hideArrow: !0, direction: "" }).render().appendTo(this.options.container), this.$popover.hide(), this.$content = this.$popover.find(".popover-content,.note-popover-content"), this.$content.on("click", ".note-hint-item", function (n) { t.$content.find(".active").removeClass("active"), e()(n.currentTarget).addClass("active"), t.replace() }), this.$popover.on("mousedown", function (t) { t.preventDefault() }) } }, { key: "destroy", value: function () { this.$popover.remove() } }, { key: "selectItem", value: function (t) { this.$content.find(".active").removeClass("active"), t.addClass("active"), this.$content[0].scrollTop = t[0].offsetTop - this.$content.innerHeight() / 2 } }, { key: "moveDown", value: function () { var t = this.$content.find(".note-hint-item.active"), e = t.next(); if (e.length) this.selectItem(e); else { var n = t.parent().next(); n.length || (n = this.$content.find(".note-hint-group").first()), this.selectItem(n.find(".note-hint-item").first()) } } }, { key: "moveUp", value: function () { var t = this.$content.find(".note-hint-item.active"), e = t.prev(); if (e.length) this.selectItem(e); else { var n = t.parent().prev(); n.length || (n = this.$content.find(".note-hint-group").last()), this.selectItem(n.find(".note-hint-item").last()) } } }, { key: "replace", value: function () { var t = this.$content.find(".note-hint-item.active"); if (t.length) { var n = this.nodeFromItem(t); if (null !== this.matchingWord && 0 === this.matchingWord.length) this.lastWordRange.so = this.lastWordRange.eo; else if (null !== this.matchingWord && this.matchingWord.length > 0 && !this.lastWordRange.isCollapsed()) { var o = this.lastWordRange.eo - this.lastWordRange.so - this.matchingWord.length; o > 0 && (this.lastWordRange.so += o) } if (this.lastWordRange.insertNode(n), "next" === this.options.hintSelect) { var i = document.createTextNode(""); e()(n).after(i), bt.createFromNodeBefore(i).select() } else bt.createFromNodeAfter(n).select(); this.lastWordRange = null, this.hide(), this.context.invoke("editor.focus"), this.context.triggerEvent("change", this.$editable.html(), this.$editable) } } }, { key: "nodeFromItem", value: function (t) { var e = this.hints[t.data("index")], n = t.data("item"), o = e.content ? e.content(n) : n; return "string" == typeof o && (o = dt.createText(o)), o } }, { key: "createItemTemplates", value: function (t, n) { var o = this.hints[t]; return n.map(function (n) { var i = e()('<div class="note-hint-item"></div>'); return i.append(o.template ? o.template(n) : n + ""), i.data({ index: t, item: n }), i }) } }, { key: "handleKeydown", value: function (t) { this.$popover.is(":visible") && (t.keyCode === kt.code.ENTER ? (t.preventDefault(), this.replace()) : t.keyCode === kt.code.UP ? (t.preventDefault(), this.moveUp()) : t.keyCode === kt.code.DOWN && (t.preventDefault(), this.moveDown())) } }, { key: "searchKeyword", value: function (t, e, n) { var o = this.hints[t]; if (o && o.match.test(e) && o.search) { var i = o.match.exec(e); this.matchingWord = i[0], o.search(i[1], n) } else n() } }, { key: "createGroup", value: function (t, n) { var o = this, i = e()('<div class="note-hint-group note-hint-group-' + t + '"></div>'); return this.searchKeyword(t, n, function (e) { (e = e || []).length && (i.html(o.createItemTemplates(t, e)), o.show()) }), i } }, { key: "handleKeyup", value: function (t) { var n = this; if (!k.contains([kt.code.ENTER, kt.code.UP, kt.code.DOWN], t.keyCode)) { var o, i, r = this.context.invoke("editor.getLastRange"); if ("words" === this.options.hintMode) { if (o = r.getWordsRange(r), i = o.toString(), this.hints.forEach(function (t) { if (t.match.test(i)) return o = r.getWordsMatchRange(t.match), !1 }), !o) return void this.hide(); i = o.toString() } else o = r.getWordRange(), i = o.toString(); if (this.hints.length && i) { this.$content.empty(); var a = m.rect2bnd(k.last(o.getClientRects())), s = e()(this.options.container).offset(); a && (a.top -= s.top, a.left -= s.left, this.$popover.hide(), this.lastWordRange = o, this.hints.forEach(function (t, e) { t.match.test(i) && n.createGroup(e, i).appendTo(n.$content) }), this.$content.find(".note-hint-item:first").addClass("active"), "top" === this.direction ? this.$popover.css({ left: a.left, top: a.top - this.$popover.outerHeight() - 5 }) : this.$popover.css({ left: a.left, top: a.top + a.height + 5 })) } else this.hide() } } }, { key: "show", value: function () { this.$popover.show() } }, { key: "hide", value: function () { this.$popover.hide() } }]) && ke(n.prototype, o), i && ke(n, i), t }(); function Ce(t) { return (Ce = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } function xe(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } e().summernote = e().extend(e().summernote, { version: "0.8.20", plugins: {}, dom: dt, range: bt, lists: k, options: { langInfo: e().summernote.lang["en-US"], editing: !0, modules: { editor: At, clipboard: Dt, dropzone: zt, codeview: Ut, statusbar: Wt, fullscreen: Vt, handle: Gt, hintPopover: we, autoSync: Yt, autoReplace: Zt, placeholder: Jt, buttons: ee, toolbar: oe, linkDialog: re, linkPopover: se, imageDialog: ce, imagePopover: de, tablePopover: fe, videoDialog: me, helpDialog: ge, airPopover: ye }, buttons: {}, lang: "en-US", followingToolbar: !1, toolbarPosition: "top", otherStaticBar: "", codeviewKeepButton: !1, toolbar: [["style", ["style"]], ["font", ["bold", "underline", "clear"]], ["fontname", ["fontname"]], ["color", ["color"]], ["para", ["ul", "ol", "paragraph"]], ["table", ["table"]], ["insert", ["link", "picture", "video"]], ["view", ["fullscreen", "codeview", "help"]]], popatmouse: !0, popover: { image: [["resize", ["resizeFull", "resizeHalf", "resizeQuarter", "resizeNone"]], ["float", ["floatLeft", "floatRight", "floatNone"]], ["remove", ["removeMedia"]]], link: [["link", ["linkDialogShow", "unlink"]]], table: [["add", ["addRowDown", "addRowUp", "addColLeft", "addColRight"]], ["delete", ["deleteRow", "deleteCol", "deleteTable"]]], air: [["color", ["color"]], ["font", ["bold", "underline", "clear"]], ["para", ["ul", "paragraph"]], ["table", ["table"]], ["insert", ["link", "picture"]], ["view", ["fullscreen", "codeview"]]] }, airMode: !1, overrideContextMenu: !1, width: null, height: null, linkTargetBlank: !0, useProtocol: !0, defaultProtocol: "http://", focus: !1, tabDisabled: !1, tabSize: 4, styleWithCSS: !1, shortcuts: !0, textareaAutoSync: !0, tooltip: "auto", container: null, maxTextLength: 0, blockquoteBreakingLevel: 2, spellCheck: !0, disableGrammar: !1, placeholder: null, inheritPlaceholder: !1, recordEveryKeystroke: !1, historyLimit: 200, showDomainOnlyForAutolink: !1, hintMode: "word", hintSelect: "after", hintDirection: "bottom", styleTags: ["p", "blockquote", "pre", "h1", "h2", "h3", "h4", "h5", "h6"], fontNames: ["Arial", "Arial Black", "Comic Sans MS", "Courier New", "Helvetica Neue", "Helvetica", "Impact", "Lucida Grande", "Tahoma", "Times New Roman", "Verdana"], fontNamesIgnoreCheck: [], addDefaultFonts: !0, fontSizes: ["8", "9", "10", "11", "12", "14", "18", "24", "36"], fontSizeUnits: ["px", "pt"], colors: [["#000000", "#424242", "#636363", "#9C9C94", "#CEC6CE", "#EFEFEF", "#F7F7F7", "#FFFFFF"], ["#FF0000", "#FF9C00", "#FFFF00", "#00FF00", "#00FFFF", "#0000FF", "#9C00FF", "#FF00FF"], ["#F7C6CE", "#FFE7CE", "#FFEFC6", "#D6EFD6", "#CEDEE7", "#CEE7F7", "#D6D6E7", "#E7D6DE"], ["#E79C9C", "#FFC69C", "#FFE79C", "#B5D6A5", "#A5C6CE", "#9CC6EF", "#B5A5D6", "#D6A5BD"], ["#E76363", "#F7AD6B", "#FFD663", "#94BD7B", "#73A5AD", "#6BADDE", "#8C7BC6", "#C67BA5"], ["#CE0000", "#E79439", "#EFC631", "#6BA54A", "#4A7B8C", "#3984C6", "#634AA5", "#A54A7B"], ["#9C0000", "#B56308", "#BD9400", "#397B21", "#104A5A", "#085294", "#311873", "#731842"], ["#630000", "#7B3900", "#846300", "#295218", "#083139", "#003163", "#21104A", "#4A1031"]], colorsName: [["Black", "Tundora", "Dove Gray", "Star Dust", "Pale Slate", "Gallery", "Alabaster", "White"], ["Red", "Orange Peel", "Yellow", "Green", "Cyan", "Blue", "Electric Violet", "Magenta"], ["Azalea", "Karry", "Egg White", "Zanah", "Botticelli", "Tropical Blue", "Mischka", "Twilight"], ["Tonys Pink", "Peach Orange", "Cream Brulee", "Sprout", "Casper", "Perano", "Cold Purple", "Careys Pink"], ["Mandy", "Rajah", "Dandelion", "Olivine", "Gulf Stream", "Viking", "Blue Marguerite", "Puce"], ["Guardsman Red", "Fire Bush", "Golden Dream", "Chelsea Cucumber", "Smalt Blue", "Boston Blue", "Butterfly Bush", "Cadillac"], ["Sangria", "Mai Tai", "Buddha Gold", "Forest Green", "Eden", "Venice Blue", "Meteorite", "Claret"], ["Rosewood", "Cinnamon", "Olive", "Parsley", "Tiber", "Midnight Blue", "Valentino", "Loulou"]], colorButton: { foreColor: "#000000", backColor: "#FFFF00" }, lineHeights: ["1.0", "1.2", "1.4", "1.5", "1.6", "1.8", "2.0", "3.0"], tableClassName: "table table-bordered", insertTableMaxSize: { col: 10, row: 10 }, dialogsInBody: !1, dialogsFade: !1, maximumImageFileSize: null, acceptImageFileTypes: "image/*", callbacks: { onBeforeCommand: null, onBlur: null, onBlurCodeview: null, onChange: null, onChangeCodeview: null, onDialogShown: null, onEnter: null, onFocus: null, onImageLinkInsert: null, onImageUpload: null, onImageUploadError: null, onInit: null, onKeydown: null, onKeyup: null, onMousedown: null, onMouseup: null, onPaste: null, onScroll: null }, codemirror: { mode: "text/html", htmlMode: !0, lineNumbers: !0 }, codeviewFilter: !0, codeviewFilterRegex: /<\/*(?:applet|b(?:ase|gsound|link)|embed|frame(?:set)?|ilayer|l(?:ayer|ink)|meta|object|s(?:cript|tyle)|t(?:itle|extarea)|xml)[^>]*?>/gi, codeviewIframeFilter: !0, codeviewIframeWhitelistSrc: [], codeviewIframeWhitelistSrcBase: ["www.youtube.com", "www.youtube-nocookie.com", "www.facebook.com", "vine.co", "instagram.com", "player.vimeo.com", "www.dailymotion.com", "player.youku.com", "jumpingbean.tv", "v.qq.com"], keyMap: { pc: { ESC: "escape", ENTER: "insertParagraph", "CTRL+Z": "undo", "CTRL+Y": "redo", TAB: "tab", "SHIFT+TAB": "untab", "CTRL+B": "bold", "CTRL+I": "italic", "CTRL+U": "underline", "CTRL+SHIFT+S": "strikethrough", "CTRL+BACKSLASH": "removeFormat", "CTRL+SHIFT+L": "justifyLeft", "CTRL+SHIFT+E": "justifyCenter", "CTRL+SHIFT+R": "justifyRight", "CTRL+SHIFT+J": "justifyFull", "CTRL+SHIFT+NUM7": "insertUnorderedList", "CTRL+SHIFT+NUM8": "insertOrderedList", "CTRL+LEFTBRACKET": "outdent", "CTRL+RIGHTBRACKET": "indent", "CTRL+NUM0": "formatPara", "CTRL+NUM1": "formatH1", "CTRL+NUM2": "formatH2", "CTRL+NUM3": "formatH3", "CTRL+NUM4": "formatH4", "CTRL+NUM5": "formatH5", "CTRL+NUM6": "formatH6", "CTRL+ENTER": "insertHorizontalRule", "CTRL+K": "linkDialog.show" }, mac: { ESC: "escape", ENTER: "insertParagraph", "CMD+Z": "undo", "CMD+SHIFT+Z": "redo", TAB: "tab", "SHIFT+TAB": "untab", "CMD+B": "bold", "CMD+I": "italic", "CMD+U": "underline", "CMD+SHIFT+S": "strikethrough", "CMD+BACKSLASH": "removeFormat", "CMD+SHIFT+L": "justifyLeft", "CMD+SHIFT+E": "justifyCenter", "CMD+SHIFT+R": "justifyRight", "CMD+SHIFT+J": "justifyFull", "CMD+SHIFT+NUM7": "insertUnorderedList", "CMD+SHIFT+NUM8": "insertOrderedList", "CMD+LEFTBRACKET": "outdent", "CMD+RIGHTBRACKET": "indent", "CMD+NUM0": "formatPara", "CMD+NUM1": "formatH1", "CMD+NUM2": "formatH2", "CMD+NUM3": "formatH3", "CMD+NUM4": "formatH4", "CMD+NUM5": "formatH5", "CMD+NUM6": "formatH6", "CMD+ENTER": "insertHorizontalRule", "CMD+K": "linkDialog.show" } }, icons: { align: "note-icon-align", alignCenter: "note-icon-align-center", alignJustify: "note-icon-align-justify", alignLeft: "note-icon-align-left", alignRight: "note-icon-align-right", rowBelow: "note-icon-row-below", colBefore: "note-icon-col-before", colAfter: "note-icon-col-after", rowAbove: "note-icon-row-above", rowRemove: "note-icon-row-remove", colRemove: "note-icon-col-remove", indent: "note-icon-align-indent", outdent: "note-icon-align-outdent", arrowsAlt: "note-icon-arrows-alt", bold: "note-icon-bold", caret: "note-icon-caret", circle: "note-icon-circle", close: "note-icon-close", code: "note-icon-code", eraser: "note-icon-eraser", floatLeft: "note-icon-float-left", floatRight: "note-icon-float-right", font: "note-icon-font", frame: "note-icon-frame", italic: "note-icon-italic", link: "note-icon-link", unlink: "note-icon-chain-broken", magic: "note-icon-magic", menuCheck: "note-icon-menu-check", minus: "note-icon-minus", orderedlist: "note-icon-orderedlist", pencil: "note-icon-pencil", picture: "note-icon-picture", question: "note-icon-question", redo: "note-icon-redo", rollback: "note-icon-rollback", square: "note-icon-square", strikethrough: "note-icon-strikethrough", subscript: "note-icon-subscript", superscript: "note-icon-superscript", table: "note-icon-table", textHeight: "note-icon-text-height", trash: "note-icon-trash", underline: "note-icon-underline", undo: "note-icon-undo", unorderedlist: "note-icon-unorderedlist", video: "note-icon-video" } } }); var Se = function () { function t(e, n, o, i) { !function (t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.markup = e, this.children = n, this.options = o, this.callback = i } var n, o, i; return n = t, (o = [{ key: "render", value: function (t) { var n = e()(this.markup); if (this.options && this.options.contents && n.html(this.options.contents), this.options && this.options.className && n.addClass(this.options.className), this.options && this.options.data && e().each(this.options.data, function (t, e) { n.attr("data-" + t, e) }), this.options && this.options.click && n.on("click", this.options.click), this.children) { var o = n.find(".note-children-container"); this.children.forEach(function (t) { t.render(o.length ? o : n) }) } return this.callback && this.callback(n, this.options), this.options && this.options.callback && this.options.callback(n), t && t.append(n), n } }]) && xe(n.prototype, o), i && xe(n, i), t }(); const Te = function (t, e) { return function () { var n = "object" === Ce(arguments[1]) ? arguments[1] : arguments[0], o = Array.isArray(arguments[0]) ? arguments[0] : []; return n && n.children && (o = n.children), new Se(t, o, n, e) } }; function Ee(t) { return (Ee = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } var Ie = Te('<div class="note-editor note-frame panel panel-default"></div>'), $e = Te('<div class="panel-heading note-toolbar" role="toolbar"></div>'), Ne = Te('<div class="note-editing-area"></div>'), Pe = Te('<textarea class="note-codable" aria-multiline="true"></textarea>'), Re = Te('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"></div>'), Le = Te(['<output class="note-status-output" role="status" aria-live="polite"></output>', '<div class="note-statusbar" role="status">', '<div class="note-resizebar" aria-label="Resize">', '<div class="note-icon-bar"></div>', '<div class="note-icon-bar"></div>', '<div class="note-icon-bar"></div>', "</div>", "</div>"].join("")), Ae = Te('<div class="note-editor note-airframe"></div>'), Fe = Te(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"></div>', '<output class="note-status-output" role="status" aria-live="polite"></output>'].join("")), De = Te('<div class="note-btn-group btn-group"></div>'), He = Te('<ul class="note-dropdown-menu dropdown-menu"></ul>', function (t, e) { var n = Array.isArray(e.items) ? e.items.map(function (t) { var n = "string" == typeof t ? t : t.value || "", o = e.template ? e.template(t) : t, i = "object" === Ee(t) ? t.option : void 0; return '<li aria-label="' + n + '"><a href="#" ' + ('data-value="' + n + '"' + (void 0 !== i ? ' data-option="' + i + '"' : "")) + ">" + o + "</a></li>" }).join("") : e.items; t.html(n).attr({ "aria-label": e.title }), e && e.codeviewKeepButton && t.addClass("note-codeview-keep") }), ze = function (t, e) { return t + " " + je(e.icons.caret, "span") }, Be = Te('<ul class="note-dropdown-menu dropdown-menu note-check"></ul>', function (t, e) { var n = Array.isArray(e.items) ? e.items.map(function (t) { var n = "string" == typeof t ? t : t.value || "", o = e.template ? e.template(t) : t; return '<li aria-label="' + t + '"><a href="#" data-value="' + n + '">' + je(e.checkClassName) + " " + o + "</a></li>" }).join("") : e.items; t.html(n).attr({ "aria-label": e.title }), e && e.codeviewKeepButton && t.addClass("note-codeview-keep") }), Me = Te('<div class="modal note-modal" aria-hidden="false" tabindex="-1" role="dialog"></div>', function (t, e) { e.fade && t.addClass("fade"), t.attr({ "aria-label": e.title }), t.html(['<div class="modal-dialog">', '<div class="modal-content">', e.title ? '<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button><h4 class="modal-title">' + e.title + "</h4></div>" : "", '<div class="modal-body">' + e.body + "</div>", e.footer ? '<div class="modal-footer">' + e.footer + "</div>" : "", "</div>", "</div>"].join("")) }), Oe = Te(['<div class="note-popover popover in">', '<div class="arrow"></div>', '<div class="popover-content note-children-container"></div>', "</div>"].join(""), function (t, e) { var n = void 0 !== e.direction ? e.direction : "bottom"; t.addClass(n), e.hideArrow && t.find(".arrow").hide() }), Ue = Te('<div class="checkbox"></div>', function (t, e) { t.html(["<label" + (e.id ? ' for="note-' + e.id + '"' : "") + ">", '<input type="checkbox"' + (e.id ? ' id="note-' + e.id + '"' : ""), e.checked ? " checked" : "", ' aria-checked="' + (e.checked ? "true" : "false") + '"/>', e.text ? e.text : "", "</label>"].join("")) }), je = function (t, e) { return t.match(/^</) ? t : "<" + (e = e || "i") + ' class="' + t + '"></' + e + ">" }; e().summernote = e().extend(e().summernote, { ui_template: function (t) { return { editor: Ie, toolbar: $e, editingArea: Ne, codable: Pe, editable: Re, statusbar: Le, airEditor: Ae, airEditable: Fe, buttonGroup: De, dropdown: He, dropdownButtonContents: ze, dropdownCheck: Be, dialog: Me, popover: Oe, checkbox: Ue, icon: je, options: t, palette: function (e, n) { return Te('<div class="note-color-palette"></div>', function (e, n) { for (var o = [], i = 0, r = n.colors.length; i < r; i++) { for (var a = n.eventName, s = n.colors[i], l = n.colorsName[i], c = [], u = 0, d = s.length; u < d; u++) { var h = s[u], f = l[u]; c.push(['<button type="button" class="note-color-btn"', 'style="background-color:', h, '" ', 'data-event="', a, '" ', 'data-value="', h, '" ', 'title="', f, '" ', 'aria-label="', f, '" ', 'data-toggle="button" tabindex="-1"></button>'].join("")) } o.push('<div class="note-color-row">' + c.join("") + "</div>") } e.html(o.join("")), n.tooltip && e.find(".note-color-btn").tooltip({ container: n.container || t.container, trigger: "hover", placement: "bottom" }) })(e, n) }, button: function (n, o) { return Te('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1"></button>', function (n, o) { o && o.tooltip && n.attr({ title: o.tooltip, "aria-label": o.tooltip }).tooltip({ container: o.container || t.container, trigger: "hover", placement: "bottom" }).on("click", function (t) { e()(t.currentTarget).tooltip("hide") }), o && o.codeviewButton && n.addClass("note-codeview-keep") })(n, o) }, toggleBtn: function (t, e) { t.toggleClass("disabled", !e), t.attr("disabled", !e) }, toggleBtnActive: function (t, e) { t.toggleClass("active", e) }, onDialogShown: function (t, e) { t.one("shown.bs.modal", e) }, onDialogHidden: function (t, e) { t.one("hidden.bs.modal", e) }, showDialog: function (t) { t.modal("show") }, hideDialog: function (t) { t.modal("hide") }, createLayout: function (e) { var n = (t.airMode ? Ae([Ne([Pe(), Fe()])]) : "bottom" === t.toolbarPosition ? Ie([Ne([Pe(), Re()]), $e(), Le()]) : Ie([$e(), Ne([Pe(), Re()]), Le()])).render(); return n.insertAfter(e), { note: e, editor: n, toolbar: n.find(".note-toolbar"), editingArea: n.find(".note-editing-area"), editable: n.find(".note-editable"), codable: n.find(".note-codable"), statusbar: n.find(".note-statusbar") } }, removeLayout: function (t, e) { t.html(e.editable.html()), e.editor.remove(), t.show() } } }, interface: "bs3" }) })(), i })() });
!function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return f({type:O.error,iconClass:g().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=g()),v=e("#"+t.containerId),v.length?v:(n&&(v=c(t)),v)}function i(e,t,n){return f({type:O.info,iconClass:g().iconClasses.info,message:e,optionsOverride:n,title:t})}function o(e){w=e}function s(e,t,n){return f({type:O.success,iconClass:g().iconClasses.success,message:e,optionsOverride:n,title:t})}function a(e,t,n){return f({type:O.warning,iconClass:g().iconClasses.warning,message:e,optionsOverride:n,title:t})}function r(e){var t=g();v||n(t),l(e,t)||u(t)}function d(t){var i=g();return v||n(i),t&&0===e(":focus",t).length?void h(t):void(v.children().length&&v.remove())}function u(t){for(var n=v.children(),i=n.length-1;i>=0;i--)l(e(n[i]),t)}function l(t,n){return t&&0===e(":focus",t).length?(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t)}}),!0):!1}function c(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),v.appendTo(e(t.target)),v}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function m(e){w&&w(e)}function f(t){function i(t){return!e(":focus",l).length||t?(clearTimeout(O.intervalId),l[r.hideMethod]({duration:r.hideDuration,easing:r.hideEasing,complete:function(){h(l),r.onHidden&&"hidden"!==b.state&&r.onHidden(),b.state="hidden",b.endTime=new Date,m(b)}})):void 0}function o(){(r.timeOut>0||r.extendedTimeOut>0)&&(u=setTimeout(i,r.extendedTimeOut),O.maxHideTime=parseFloat(r.extendedTimeOut),O.hideEta=(new Date).getTime()+O.maxHideTime)}function s(){clearTimeout(u),O.hideEta=0,l.stop(!0,!0)[r.showMethod]({duration:r.showDuration,easing:r.showEasing})}function a(){var e=(O.hideEta-(new Date).getTime())/O.maxHideTime*100;f.width(e+"%")}var r=g(),d=t.iconClass||r.iconClass;if("undefined"!=typeof t.optionsOverride&&(r=e.extend(r,t.optionsOverride),d=t.optionsOverride.iconClass||d),r.preventDuplicates){if(t.message===C)return;C=t.message}T++,v=n(r,!0);var u=null,l=e("<div/>"),c=e("<div/>"),p=e("<div/>"),f=e("<div/>"),w=e(r.closeHtml),O={intervalId:null,hideEta:null,maxHideTime:null},b={toastId:T,state:"visible",startTime:new Date,options:r,map:t};return t.iconClass&&l.addClass(r.toastClass).addClass(d),t.title&&(c.append(t.title).addClass(r.titleClass),l.append(c)),t.message&&(p.append(t.message).addClass(r.messageClass),l.append(p)),r.closeButton&&(w.addClass("toast-close-button").attr("role","button"),l.prepend(w)),r.progressBar&&(f.addClass("toast-progress"),l.prepend(f)),l.hide(),r.newestOnTop?v.prepend(l):v.append(l),l[r.showMethod]({duration:r.showDuration,easing:r.showEasing,complete:r.onShown}),r.timeOut>0&&(u=setTimeout(i,r.timeOut),O.maxHideTime=parseFloat(r.timeOut),O.hideEta=(new Date).getTime()+O.maxHideTime,r.progressBar&&(O.intervalId=setInterval(a,10))),l.hover(s,o),!r.onclick&&r.tapToDismiss&&l.click(i),r.closeButton&&w&&w.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),i(!0)}),r.onclick&&l.click(function(){r.onclick(),i()}),m(b),r.debug&&console&&console.log(b),l}function g(){return e.extend({},p(),b.options)}function h(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),C=void 0))}var v,w,C,T=0,O={error:"error",info:"info",success:"success",warning:"warning"},b={clear:r,remove:d,error:t,getContainer:n,info:i,options:{},subscribe:o,success:s,version:"2.1.0",warning:a};return b}()})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)});
//# sourceMappingURL=toastr.js.map