//Build number: 1699468022493

!function e(t,r,i){function n(s,a){if(!r[s]){if(!t[s]){var p="function"==typeof require&&require;if(!a&&p)return p(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return n(r?r:e)},l,l.exports,e,t,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t,r){"use strict";var i=e("config/init"),n=e("config/extend-natives"),o=e("loaders/load-components"),s=e("loaders/load-project");$.when(s()).then(function(){$.when(o(),n()).then(i)})},{"config/extend-natives":25,"config/init":27,"loaders/load-components":57,"loaders/load-project":61}],2:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/messages"),o=e("config/formbuilder"),s={hidePropertiesErrors:function(e){var t=e;t.find("div.input-properties__form__question").removeClass("has-error has-feedback"),t.find("div.input-properties__form__question > i").addClass("hidden"),t.find("div.input-properties__form__question span.input-properties__form__error").text(""),t.find(".input-properties__tabs .nav-tabs i").addClass("invisible"),t.find(".input-properties__tabs .nav-tabs i").parent().removeClass("validation-error")},hidePossibleAnswersErrors:function(e){var t=e,r=t.dom.properties_panel.find(".input-properties__form__possible-answers__list");$(r).each(function(e,t){$(t).find(".input-properties__form__possible-answers__list__possible_answer_item").removeClass("has-error has-feedback"),$(t).find(".input-properties__form__error").addClass("hidden").text("")}),t.dom.is_valid&&(t.dom.properties_panel.find(".input-properties__tabs .nav-tabs i").addClass("invisible"),t.dom.properties_panel.find(".input-properties__tabs .nav-tabs i").parent().removeClass("validation-error"))},hideTabButtonsErrors:function(){},hideAdvancedPropertiesErrors:function(e,t){var r,i=t,n=i.length,s=o.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e.ref+'"]').find(".input-properties__form__advanced-properties");for(r=0;r<n;r++)s.find("div.input-properties__form__advanced-properties__"+i[r]).removeClass("has-error has-feedback"),s.find("div.input-properties__form__advanced-properties__"+i[r]+" i").addClass("hidden"),s.find("div.input-properties__form__advanced-properties__"+i[r]+" span.input-properties__form__error").addClass("hidden").text("")},hideJumpsErrors:function(e){var t=e,r=["when","answer","goto"];$(t).each(function(e,t){$(r).each(function(e,r){$(t).find(".input-properties__form__jumps__logic--"+r).removeClass("has-error").find(".input-properties__form__error").addClass("hidden").text("")})})},showQuestionTextErrors:function(e,t){var r=e,n=t;r.find("div.input-properties__form__question").addClass("has-error has-feedback"),r.find("div.input-properties__form__question i").removeClass("hidden").hide().fadeIn(i.ANIMATION_FAST),r.find("div.input-properties__form__question span.input-properties__form__error").removeClass("hidden").text(n).hide().fadeIn(i.ANIMATION_FAST),r.find(".input-properties__tabs .nav-tabs i:first").removeClass("invisible").fadeIn(i.ANIMATION_FAST),r.find(".input-properties__tabs .nav-tabs i:first").parent().addClass("validation-error")},showFormNameErrors:function(e,t){var r=e,i=t;r.find(".modal-body .input-properties__form__error").removeClass("hidden").text(i).hide().fadeIn(300)},hideFormNameErrors:function(e){var t=e;t.find(".modal-body .input-properties__form__error").addClass("hidden").text("")},showPossibleAnswerErrors:function(e,t){var r=e,i=r.parents().eq(9),n=t;r.find(".input-properties__form__possible-answers__list__possible_answer_item").addClass("has-error has-feedback"),r.find(".input-properties__form__error").removeClass("hidden").text(n).hide().fadeIn(300),i.find(".input-properties__tabs .nav-tabs i:first").removeClass("invisible").hide().fadeIn(300),i.find(".input-properties__tabs .nav-tabs i:first").parent().addClass("validation-error")},showSingleAdvancedPropertyError:function(e,t,r){var i=t,n=r,o=e;o.find("div.input-properties__form__advanced-properties__"+i).addClass("has-error has-feedback"),o.find("div.input-properties__form__advanced-properties__"+i+" i").removeClass("hidden").hide().fadeIn(300),o.find("div.input-properties__form__advanced-properties__"+i+" span.input-properties__form__error").removeClass("hidden").text(n).hide().fadeIn(300),o.parent().parent().find(".nav-tabs").find("i.advanced-error").removeClass("invisible").hide().fadeIn(300),o.parent().parent().find(".nav-tabs").find("i.advanced-error").parent().addClass("validation-error")},showSingleJumpErrors:function(t,r){var i=r,o=t,s=e("helpers/ui");void 0===i.when&&o.find(".input-properties__form__jumps__logic--when").addClass("has-error").find(".input-properties__form__error").removeClass("hidden").text(n.error.JUMP_CONDITION_NOT_SELECTED),void 0===i.answer_ref&&o.find(".input-properties__form__jumps__logic--answer").addClass("has-error ").find(".input-properties__form__error").removeClass("hidden").text(n.error.JUMP_ANSWER_NOT_SELECTED),void 0===i.to&&o.find(".input-properties__form__jumps__logic--goto").addClass("has-error ").find(".input-properties__form__error").removeClass("hidden").text(n.error.JUMP_DESTINATION_NOT_SELECTED),i.has_valid_destination||o.find(".input-properties__form__jumps__logic--goto").addClass("has-error").find(".input-properties__form__error").removeClass("hidden").text(n.error.JUMP_DESTINATION_NOT_SELECTED),void 0,s.input_properties_panel.showJumpTabError(o)},showBranchInputsErrors:function(t,r){var i=t,n=r,s=o.branch.current_input_ref,a=e("helpers/ui");i.find(".input-properties__form__error--branch-error").removeClass("invisible").text(n),a.inputs_collection.showInputInvalidIcon(s)},showGroupInputsErrors:function(t,r){var i=t,n=r,s=o.branch.current_input_ref,a=e("helpers/ui");i.find(".input-properties__form__error--group-error").removeClass("invisible").text(n),a.inputs_collection.showInputInvalidIcon(s)},hideBranchInputsErrors:function(e){e.find(".input-properties__form__error--branch-error").addClass("invisible").text("&nbsp;")},hideGroupInputsErrors:function(e){e.find(".input-properties__form__error--group-error").addClass("invisible").text("&nbsp;")}};t.exports=s},{"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/ui":36}],3:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("helpers/utils"),o=e("config/consts"),s=e("template"),a=(e("factory/input-factory"),{pushInput:function(e){var t,r;if(e.jumps=[],e.is_title=!1,i.is_editing_branch&&i.is_editing_group){var o=n.getInputCurrentIndexByRef(i.current_input_ref),s=n.getBranchInputCurrentIndexByRef(o,i.group.active_group_ref);i.project_definition.data.project.forms[i.current_form_index].inputs[o].branch[s].group.push(e)}else i.is_editing_branch||i.is_editing_group||i.project_definition.data.project.forms[i.current_form_index].inputs.push(e),i.is_editing_branch&&(t=n.getInputObjectByRef(i.branch.active_branch_ref).branch,t.push(e)),i.is_editing_group&&(r=n.getInputObjectByRef(i.group.active_group_ref).group,r.push(e))},appendInputToDom:function(e){var t,r,n=this,o=n.createInputHTML(e);i.is_editing_branch&&i.is_editing_group?(r=i.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+i.group.active_group_ref+'"]').find(".group-sortable"),r.append(o.collection)):(i.is_editing_branch||i.is_editing_group||i.dom.inputs_collection_sortable.append(o.collection),i.is_editing_branch&&(t=i.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+i.branch.active_branch_ref+'"]').find(".branch-sortable"),t.append(o.collection)),i.is_editing_group&&(r=i.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+i.group.active_group_ref+'"]').find(".group-sortable"),r.append(o.collection))),i.dom.input_properties_forms_wrapper.append(o.panels)},createInputHTML:function(t){var r,n=e("actions/parse"),a=e("factory/input-factory"),p=i.current_form_index,c=i.project_definition.data.project.forms[p].inputs,l=a.createInputToolHTML(t),_="";if(t.type===o.BRANCH_TYPE){var u=n.getBranchInputsHTML(t,c.length-1);l=l.replace("{{branch-content}}",u.collection),_+=u.panels}if(t.type===o.GROUP_TYPE){var d=n.getGroupInputsHTML(t,c.length-1,null);l=l.replace("{{group-content}}",d.collection),_+=d.panels}return r=s.getInputPropertiesPanelHTML(t),_+=r,{collection:l,panels:_}},createPossibleAnswersCopy:function(e){var t=[];return $.each(e,function(e,r){t[e]={},t[e].answer=r.answer,t[e].answer_ref=n.generateUniqID()}),t},createInputCopy:function(t){var r=e("factory/input-factory"),i=this,s=n.generateInputCopyRef(),a=r.createInput(t.type,s),p=[];for(var c in a)if(t.hasOwnProperty(c)&&"ref"!==c)switch(c){case o.BRANCH_TYPE:a.branch=CircularJSON.parse(CircularJSON.stringify(t.branch));break;case o.GROUP_TYPE:a.group=CircularJSON.parse(CircularJSON.stringify(t.group));break;default:a[c]=t[c]}return p=i.createBranchCopy(a.ref,a.branch,t),i.createGroupCopy(a.ref,a.group,t),$.inArray(a.type,o.MULTIPLE_ANSWER_TYPES)!==-1&&(a.possible_answers=i.createPossibleAnswersCopy(a.possible_answers),""!==t["default"]&&null!==t["default"]&&(a["default"]=i.getDefaultValueFromInputCopy(t,a))),a.type===o.BRANCH_TYPE?i.updateBranchJumps(a.branch,p):a.jumps=[],a},updateBranchJumps:function(e,t){var r,i=this;$(e).each(function(e,n){r=[],n.jumps.length>0&&$(n.jumps).each(function(s,a){$.inArray(n.type,o.MULTIPLE_ANSWER_TYPES)!==-1?r.push({when:a.when,to:i.getJumpToValueFromRefMap(t,a.to),answer_ref:t[e].answer_refs[a.answer_ref]}):r.push({when:a.when,to:i.getJumpToValueFromRefMap(t,a.to),answer_ref:null})}),n.jumps=r})},createGroupCopy:function(e,t,r){var i=[];$(t).each(function(t,s){var a={};if(i[t]=s,i[t].ref=n.generateBranchGroupInputRef(e),$.inArray(s.type,o.MULTIPLE_ANSWER_TYPES)!==-1){var p=[];$.each(s.possible_answers,function(e,t){var r=n.generateUniqID();p[e]={},p[e].answer=t.answer,p[e].answer_ref=r,a[t.answer_ref]=r}),s.possible_answers=p,""!==s["default"]&&null!==s["default"]&&$.inArray(s.type,o.MULTIPLE_ANSWER_TYPES)!==-1&&(s["default"]=a[r.group[t]["default"]])}})},createBranchCopy:function(e,t,r){var i,s,a,p,c,l=[],_=[],u=[];return $(t).each(function(d,f){l[d]=f,l[d].ref=n.generateBranchGroupInputRef(e),_[d]={jumps:f.jumps,answer_refs:{}},_[d].old_ref=r.branch[d].ref,_[d].new_ref=l[d].ref,$.inArray(f.type,o.MULTIPLE_ANSWER_TYPES)!==-1?(i=[],s=[],a={},$.each(f.possible_answers,function(e,t){var r=n.generateUniqID();a[t.answer_ref]=r,i[e]={},i[e].answer=t.answer,i[e].answer_ref=r}),f.possible_answers=i,p=a):p=null,_[d].answer_refs=p,""!==f["default"]&&null!==f["default"]&&$.inArray(f.type,o.MULTIPLE_ANSWER_TYPES)!==-1&&(f["default"]=p[f["default"]]),$(f.group).each(function(e,r){var i={};u[e]=r,u[e].ref=n.generateBranchGroupInputRef(t[d].ref),$.inArray(r.type,o.MULTIPLE_ANSWER_TYPES)!==-1&&(c=[],$.each(r.possible_answers,function(e,t){var r=n.generateUniqID();c[e]={},c[e].answer=t.answer,c[e].answer_ref=r,i[t.answer_ref]=r}),r.possible_answers=c,""!==r["default"]&&null!==r["default"]&&$.inArray(r.type,o.MULTIPLE_ANSWER_TYPES)!==-1&&(r["default"]=i[f.group[e]["default"]]))})}),_},getDefaultValueFromInputCopy:function(e,t){var r=-1;return $(e.possible_answers).each(function(t,i){i.answer_ref===e["default"]&&(r=t)}),t.possible_answers[r].answer_ref},getJumpToValueFromRefMap:function(e,t){var r=null;return t===o.JUMP_TO_END_OF_FORM_REF?r=o.JUMP_TO_END_OF_FORM_REF:$(e).each(function(e,i){if(i.old_ref===t)return r=i.new_ref,!1}),r}});t.exports=a},{"actions/parse":5,"config/consts":24,"config/formbuilder":26,"factory/input-factory":31,"helpers/utils":37,template:62}],4:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/messages"),o=(e("actions/validation"),e("config/formbuilder")),s=e("helpers/utils"),a={addJump:function(e){var t=e,r=o.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+t.ref+'"]').find(".input-properties__form__jumps .input-properties__form__jumps__list"),n="",s=t.jumps.length;i.MULTIPLE_ANSWER_TYPES.indexOf(t.type)>-1&&t.jumps.length>=t.possible_answers.length||(r.parent().find(".input-properties__form__jumps__no-jumps-message").addClass("hidden"),n+=i.MULTIPLE_ANSWER_TYPES.indexOf(t.type)===-1?o.dom.partials.jump_list_item_always_jump:o.dom.partials.jump_list_item,n=n.replace(/{{input-ref-logic-when}}/g,s+"-"+t.ref+"-logic-when"),n=n.replace(/{{input-ref-logic-answer}}/g,s+"-"+t.ref+"-logic-answer"),n=n.replace(/{{input-ref-logic-goto}}/g,s+"-"+t.ref+"-logic-goto"),r.append(n),t.jumps.push({}),o.dom.inputs_collection.find('.input[data-input-ref="'+t.ref+'"]'),o.dom.inputs_collection.find('.input[data-input-ref="'+t.ref+'"] .input-inner'),o.dom.inputs_collection.find('.input[data-input-ref="'+t.ref+'"] .input-inner .jump-state').removeClass("invisible"))},removeJump:function(e,t){var r=e,i=t.parent(),n=i.parent(),s=i.index();i.remove(),r.jumps.splice(s-1,1),0===n.find("li").length&&(n.parent().find(".input-properties__form__jumps__no-jumps-message").removeClass("hidden"),o.dom.inputs_collection.find('.input[data-input-ref="'+r.ref+'"] .input-inner .jump-state').addClass("invisible"))},listJumpPossibleAnswers:function(e,t){var r=e,i=t,n="";i.savePossibleAnswers(),r.empty(),$(i.possible_answers).each(function(e,t){n+='<option value="',n+=t.answer_ref+'">',n+=t.answer.trunc(50),n+="</option>"}),r.append(n)},listJumpConditions:function(e){var t=e,r=i.JUMP_CONDITIONS,n="";t.empty(),$(r).each(function(e){n+='<option value="',n+=this.key+'">',n+=this.text,n+="</option>"}),t.append(n)},listJumpDestinations:function(e,t){var r=e,o=t;r.empty(),$(o).each(function(e,t){var o,a="";""===t.question?o=t.type===i.BRANCH_TYPE?n.error.NO_BRANCH_HEADER_YET:n.error.NO_QUESTION_TEXT_YET:t.type===i.README_TYPE?(a=s.decodeHtml(t.question),a=s.stripTags(a),o=a.trunc(50)):o=t.question.trunc(50),r.append('<option value="'+t.ref+'">'+o+" </option>")})},refreshInputJumpsDom:function(e,t){var r=o.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e.ref+'"]').find(".input-properties__form__jumps__logic--goto select option:selected"),n="",a=s.getJumpAvailableDestinations(e,t);$(e.jumps).each(function(e,t){$(a).each(function(o,a){if(t.to===a.ref)return a.type===i.README_TYPE?(n=s.decodeHtml(a.question),n=s.stripTags(n),$(r[e]).text(n.trunc(50))):$(r[e]).text(a.question),!1})})}};t.exports=a},{"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/utils":37}],5:[function(e,t,r){"use strict";var i=(e("config/consts"),e("helpers/ui"),e("helpers/utils"),e("config/formbuilder"),e("factory/input-factory"),e("factory/input-prototype"),e("factory/form-factory"),e("template"),e("actions/validation"),{getBranchInputsHTML:e("actions/parse/methods/getBranchInputsHTML"),getGroupInputsHTML:e("actions/parse/methods/getGroupInputsHTML"),renderInputs:e("actions/parse/methods/renderInputs"),renderProject:e("actions/parse/methods/renderProject"),renderChildForms:e("actions/parse/methods/renderChildForms"),initFormbuilder:e("actions/parse/methods/initFormbuilder")}),n={action:"",renderInputs:function(e){return i.renderInputs(e)},getBranchInputsHTML:function(e,t){return i.getBranchInputsHTML(e,t)},getGroupInputsHTML:function(e,t,r){return i.getGroupInputsHTML(e,t,r)},renderProject:function(e,t){return i.renderProject(e,t)},initFormbuilder:function(){return i.initFormbuilder()},renderChildForm:function(e){return i.renderChildForms(e)}};t.exports=n},{"actions/parse/methods/getBranchInputsHTML":6,"actions/parse/methods/getGroupInputsHTML":7,"actions/parse/methods/initFormbuilder":8,"actions/parse/methods/renderChildForms":9,"actions/parse/methods/renderInputs":10,"actions/parse/methods/renderProject":11,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/form-factory":30,"factory/input-factory":31,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37,template:62}],6:[function(e,t,r){"use strict";var i=e("helpers/ui"),n=e("config/formbuilder"),o=e("template"),s=e("config/consts"),a=function(t,r){var a,p,c=e("factory/input-factory"),l=this,_=t,u=r,d=i.inputs_collection.getEmptyCollectionSortableHTML(s.BRANCH_TYPE),f="",m="",h="";return n.current_input_ref=_.ref,$.each(_.branch,function(e,t){p=c.createInputToolHTML(t),f+=p,a=JSON.parse(JSON.stringify(t)),t=c.createInput(a.type,a.ref);for(var r in t)a.hasOwnProperty(r)&&(t[r]=a[r]);if(t.dom.is_valid=!0,n.project_definition.data.project.forms[n.current_form_index].inputs[u].branch[e]=t,t.type===s.GROUP_TYPE){n.is_editing_group=!0;var i=l.getGroupInputsHTML(t,u,e);f=f.replace("{{group-content}}",i.collection),m+=i.panels,n.is_editing_group=!1}s.MULTIPLE_ANSWER_TYPES.indexOf(t.type)>-1&&(n.possible_answers_pagination[t.ref]={},n.possible_answers_pagination[t.ref].page=1),h=o.getInputPropertiesPanelHTML(t),m+=h}),d=d.replace("{{branch-inputs}}",f),{collection:d,panels:m}};t.exports=a},{"config/consts":24,"config/formbuilder":26,"factory/input-factory":31,"helpers/ui":36,template:62}],7:[function(e,t,r){"use strict";var i=e("helpers/ui"),n=e("config/formbuilder"),o=e("template"),s=e("config/consts"),a=function(t,r,a){var p,c,l=e("factory/input-factory"),_=t,u=r,d=a,f=i.inputs_collection.getEmptyCollectionSortableHTML(s.GROUP_TYPE),m="",h="",b="";return n.current_input_ref=_.ref,$.each(_.group,function(e,t){c=l.createInputToolHTML(t),m+=c,p=JSON.parse(JSON.stringify(t)),t=l.createInput(p.type,p.ref);for(var r in t)p.hasOwnProperty(r)&&(t[r]=p[r]);t.dom.is_valid=!0,null===d?n.project_definition.data.project.forms[n.current_form_index].inputs[u].group[e]=t:n.project_definition.data.project.forms[n.current_form_index].inputs[u].branch[d].group[e]=t,s.MULTIPLE_ANSWER_TYPES.indexOf(t.type)>-1&&(n.possible_answers_pagination[t.ref]={},n.possible_answers_pagination[t.ref].page=1),h=o.getInputPropertiesPanelHTML(t),b+=h}),f=f.replace("{{group-inputs}}",m),{collection:f,panels:b}};t.exports=a},{"config/consts":24,"config/formbuilder":26,"factory/input-factory":31,"helpers/ui":36,template:62}],8:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("helpers/ui"),o=e("helpers/utils"),s=e("config/formbuilder"),a=(e("factory/input-factory"),e("factory/form-factory")),p=(e("factory/input-prototype"),e("template"),e("actions/validation")),c=(e("ui-handlers/event-handler-callbacks/input-collection-branch-sortable-mousedown-callback"),function(){var e,t,r,c,l,_=this;if(s.current_input_ref=void 0,s.is_editing_branch=!1,s.is_editing_group=!1,s.dom.inputs_tools_draggable.filter(".input-branch").show(),s.dom.inputs_tools_draggable.filter(".input-group").show(),o.getSearchInputsTotal()>=i.LIMITS.search_inputs_max?n.input_tools.hideSearchInput():n.input_tools.showSearchInput(),s.dom.save_project_btn.off("click"),s.render_action===i.RENDER_ACTION_UNDO){if(r=s.previous_state,e=s.project_definition.data.project,t=e.forms.slice(),s.current_input_ref=void 0,$(t).each(function(e,t){a.updateFormbuilderDomReferences(t.ref),s.current_form_index=e,s.current_form_ref=t.ref,$(t.inputs).each(function(e,t){t.ref===r.active_input_ref&&(s.current_input_ref=r.active_input_ref),t.dom.is_valid||p.performValidation(t,!1)}),p.areFormInputsValid(e)?n.forms_tabs.showFormValidIcon(e):n.forms_tabs.showFormInvalidIcon(e)}),s.current_form_index=r.active_form_index,s.current_form_ref=r.active_form_ref,a.updateFormbuilderDomReferences(s.current_form_ref),s.is_editing_branch=r.was_editing_branch,s.is_editing_group=r.was_editing_group,s.is_editing_branch&&s.is_editing_group)void 0,c=o.getInputObjectByRef(r.active_branch_ref),l=o.getNestedGroupObjectByRef(c,r.active_group_ref),c.enterBranchSortable(),s.current_input_ref=r.active_branch_ref,s.branch.current_input_ref=r.active_group_ref,s.group.active_group_ref=r.active_group_ref,l.enterGroupSortable(!0);else if(s.is_editing_branch&&(c=o.getInputObjectByRef(r.active_branch_ref),c.enterBranchSortable(),r.active_branch_input_ref&&$('.input[data-input-ref="'+r.active_branch_input_ref+'"]').trigger("mousedown"),s.dom.input_properties_forms_wrapper.find('.nav-tabs .nav-tabs__tab-btn-item a[href="'+r.active_properties_tab+'"]').tab("show")),s.is_editing_group){var u=o.getInputObjectByRef(r.active_group_ref);u.enterGroupSortable(),r.active_group_input_ref&&$('.input[data-input-ref="'+r.active_group_input_ref+'"]').trigger("mousedown"),s.dom.input_properties_forms_wrapper.find('.nav-tabs .nav-tabs__tab-btn-item a[href="'+r.active_properties_tab+'"]').tab("show")}s.is_editing_branch||s.is_editing_group||(n.forms_tabs.toggleFormTabsButtons({enable:!0}),s.dom.inputs_tools_draggable.draggable("option","connectToSortable",".sortable"),a.unbindFormPanelsEvents(),a.updateFormbuilderDomReferences(s.project_definition.data.project.forms[s.current_form_index].ref),a.bindFormPanelsEvents(),s.dom.forms_tabs.find("a[data-form-index="+r.active_form_index+"]").tab("show"),s.current_input_ref&&(s.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+s.current_input_ref+'"]').addClass("active"),s.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+s.current_input_ref+'"]').removeClass("hidden"),s.dom.input_properties_forms_wrapper.find('.nav-tabs .nav-tabs__tab-btn-item a[href="'+r.active_properties_tab+'"]').tab("show"),s.dom.input_properties_forms_wrapper.find(".input-properties__no-input-selected").hide())),_.deferred.resolve()}s.render_action===i.RENDER_ACTION_DO&&(s.current_form_index=0,s.current_form_ref=s.project_definition.data.project.forms[0].ref,a.updateFormbuilderDomReferences(s.project_definition.data.project.forms[0].ref),s.project_definition.data.project.forms.length===i.MAX_NUMBER_OF_NESTED_CHILD_FORMS&&s.dom.forms_tabs.find(".main__tabs_add-form").parent().hide(),_.deferred.resolve())});t.exports=c},{"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/form-factory":30,"factory/input-factory":31,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37,template:62,"ui-handlers/event-handler-callbacks/input-collection-branch-sortable-mousedown-callback":84}],9:[function(e,t,r){"use strict";var i=(e("config/consts"),e("helpers/ui"),e("helpers/utils"),e("config/formbuilder")),n=(e("factory/input-factory"),e("factory/input-prototype"),e("factory/form-factory")),o=(e("template"),function(e){var t,r=e,o=r.shift(),s=this;i.current_form_index++,$.when(n.createChildForm(o.name,o.ref,i.current_form_index,!1)).then(function(){t=s.renderInputs(o.inputs),i.project_definition.data.project.forms[i.current_form_index].inputs=t.slice(),i.dom.inputs_collection.find(".input-properties__no-questions-message").addClass("hidden"),i.dom.input_properties_buttons.fadeOut(),r.length>0?s.renderChildForms(r):s.initFormbuilder()})});t.exports=o},{"config/consts":24,"config/formbuilder":26,"factory/form-factory":30,"factory/input-factory":31,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37,template:62}],10:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/formbuilder"),o=e("template"),s=function(t){var r,s,a,p=this,c=t,l=[],_="",u="";return $.each(c,function(t,c){var d=e("factory/input-factory");r=d.createInputToolHTML(c),_+=r,s=JSON.parse(JSON.stringify(c)),c=d.createInput(s.type,s.ref),n.render_action===i.RENDER_ACTION_DO&&(void 0,c.dom.is_valid=!0);for(var f in c)s.hasOwnProperty(f)&&(c[f]=s[f]);if(n.project_definition.data.project.forms[n.current_form_index].inputs[t]=c,c.type===i.BRANCH_TYPE){n.is_editing_branch=!0,n.branch.active_branch_header=c.question,n.branch.active_branch_ref=c.ref;var m=p.getBranchInputsHTML(c,t);_=_.replace("{{branch-content}}",m.collection),u+=m.panels,n.is_editing_branch=!1,n.branch.active_branch_ref=null,n.branch.active_branch_ref=null}if(c.type===i.GROUP_TYPE){n.is_editing_group=!0;var h=p.getGroupInputsHTML(c,t,null);_=_.replace("{{group-content}}",h.collection),u+=h.panels,n.is_editing_group=!1}i.MULTIPLE_ANSWER_TYPES.indexOf(c.type)>-1&&(n.possible_answers_pagination[c.ref]={},n.possible_answers_pagination[c.ref].page=1),a=o.getInputPropertiesPanelHTML(c),u+=a,n.dom.input_properties.find(".panel-body form").hide(),l.push(c)}),n.dom.inputs_collection_sortable.append(_),n.dom.input_properties_forms_wrapper.append(u),l};t.exports=s},{"config/consts":24,"config/formbuilder":26,"factory/input-factory":31,template:62}],11:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("helpers/ui"),o=e("helpers/utils"),s=e("config/formbuilder"),a=(e("factory/input-factory"),e("factory/form-factory")),p=(e("factory/input-prototype"),e("template"),e("actions/validation")),c=function(e){var t,r=this,c=e.data.project.forms.slice();return r.deferred=new $.Deferred,s.render_action===i.RENDER_ACTION_UNDO&&(void 0,a.updateFormbuilderDomReferences(c[0].ref)),s.current_form_index=0,t=r.renderInputs(c[0].inputs),t.length>0&&s.dom.inputs_collection.find(".input-properties__no-questions-message").addClass("hidden"),0===o.getTitleCount(t)&&t.length>0&&n.inputs_collection.toggleTitleWarning(0,!1),p.areFormInputsValid(0)&&(n.forms_tabs.showFormValidIcon(0),s.dom.inputs_collection.find(".inputs-collection__export-form").removeClass("disabled"),s.dom.inputs_collection.find(".inputs-collection__print-as-pdf").removeClass("disabled")),0===t.length?(s.dom.inputs_collection.find(".inputs-collection__export-form").addClass("disabled"),s.dom.inputs_collection.find(".inputs-collection__print-as-pdf").addClass("disabled")):(s.dom.inputs_collection.find(".inputs-collection__export-form").removeClass("disabled"),s.dom.inputs_collection.find(".inputs-collection__print-as-pdf").removeClass("disabled")),s.project_definition.data.project.forms[0].inputs=t.slice(),c.shift(),c.length>0?r.renderChildForms(c):r.initFormbuilder(),r.deferred.promise()};t.exports=c},{"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/form-factory":30,"factory/input-factory":31,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37,template:62}],12:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/toast"),o=e("config/consts"),s=e("config/messages"),a=e("template/methods/getPossibleAnswersPage"),p={init:function(e){var t=this,r=i.dom.input_properties.find('.panel-body form[data-input-ref="'+e.ref+'"]').find(".possible-answers__list_pager"),p=i.possible_answers_pagination[e.ref].page,c=Math.ceil(e.possible_answers.length/o.LIMITS.possible_answers_per_page);r.removeClass("hidden"),r.find(".possible-answers__list_pager__current").html(p),r.find(".possible-answers__list_pager__total").html(c);var l=r.find(".possible-answers__list_pager__prev"),_=r.find(".possible-answers__list_pager__next");i.dom.input_properties.find('.panel-body form[data-input-ref="'+e.ref+'"]').find(".input-properties__form__possible-answers__list").parent().css("min-height","325px");var u=!1;_.off().on("click",function(){void 0;var p;return t.areValidPossibleAnswersInDOM(e)?void(u||(u=!0,e.savePossibleAnswers(),i.possible_answers_pagination[e.ref].page<c?(p=i.possible_answers_pagination[e.ref].page+1,i.possible_answers_pagination[e.ref].page=p,a(e,p),r.find(".possible-answers__list_pager__current").html(p),window.setTimeout(function(){u=!1},o.ANIMATION_SLOW)):u=!1)):(n.showError(s.error.POSSIBLE_ANSWERS_INVALID),!1)}),l.off().on("click",function(){void 0;var p;return t.areValidPossibleAnswersInDOM(e)?void(u?u=!1:(u=!0,e.savePossibleAnswers(),i.possible_answers_pagination[e.ref].page>1&&(p=i.possible_answers_pagination[e.ref].page-1,i.possible_answers_pagination[e.ref].page=p,a(e,p),r.find(".possible-answers__list_pager__current").html(p),window.setTimeout(function(){u=!1},o.ANIMATION_SLOW)))):(n.showError(s.error.POSSIBLE_ANSWERS_INVALID),!1)})},tearDown:function(e){var t=i.dom.input_properties.find('.panel-body form[data-input-ref="'+e.ref+'"]').find(".possible-answers__list_pager");i.dom.input_properties.find('.panel-body form[data-input-ref="'+e.ref+'"]').find(".input-properties__form__possible-answers__list").parent().css("min-height","auto"),t.addClass("hidden"),i.possible_answers_pagination[e.ref].page=1},areValidPossibleAnswersInDOM:function(e){var t=!0,r=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e.ref+'"]'),n=r.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list li");return n.each(function(e,r){var i=$(r).find("div input"),n=i.val();if(n=n.replaceAll(">","﹥"),n=n.replaceAll("<","﹤"),""===n)return t=!1,!1}),t},recalculatePagination:function(e){var t=i.possible_answers_pagination[e.ref].page,r=Math.ceil(e.possible_answers.length/o.LIMITS.possible_answers_per_page),n=i.dom.input_properties.find('.panel-body form[data-input-ref="'+e.ref+'"]').find(".possible-answers__list_pager");n.find(".possible-answers__list_pager__current").html(t),n.find(".possible-answers__list_pager__total").html(r),e.possible_answers.length<=o.LIMITS.possible_answers_per_page&&n.addClass("hidden")},recalculatePossibleAnswersDOM:function(e){var t,r,n,s=this,p=e.dom.properties_panel.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list"),c=p.find("li");i.possible_answers_pagination[e.ref].page;c.length===o.LIMITS.possible_answers_per_page-1&&e.possible_answers.length>c.length&&(r=i.dom.partials.possible_answer_list_item,r=r.replace("{{answer}}",t.answer),r=r.replace("{{answer-ref}}",t.answer_ref),r=i.dom.partials.possible_answer_list_item,r=r.replace("{{answer}}",t.answer),r=r.replace("{{answer-ref}}",t.answer_ref),p.append(r),s.recalculatePagination(e)),0===c.length&&(i.possible_answers_pagination[e.ref].page--,n=i.possible_answers_pagination[e.ref].page,a(e,n),s.recalculatePagination(e))}};t.exports=p},{"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"template/methods/getPossibleAnswersPage":72}],13:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("helpers/ui"),o=e("helpers/utils"),s=e("config/consts"),a=e("actions/validation"),p=e("helpers/import-form-validation"),c=e("config/messages"),l=e("config/toast"),_=e("ui-handlers/event-handler-callbacks/confirm-import-possible-answers-callback"),u=e("template/methods/getPossibleAnswersPage"),d=e("actions/possible-answers-pager"),f=e("ui-handlers/event-handler-callbacks/save-project-click-callback"),m=e("template/methods/getPossibleAnswersList"),h=e("actions/undo"),b={addPossibleAnswer:function(e){var t,r,p,_=e,f=i.dom.partials.possible_answer_list_item,m=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+_.ref+'"]'),h=!0;if(t=m.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list"),p=t.find("li div input"),p.each(function(e,t){if(!a.isPossibleAnswerValid($(t).val()).is_valid)return h=!1,!1}),!h)return void l.showError(c.error.POSSIBLE_ANSWER_EMPTY);if(t.find("li div span button").prop("disabled",!1),r=o.generateUniqID(),f=f.replace("{{answer}}",s.POSSIBILE_ANSWER_PLACEHOLDER),f=f.replace("{{answer-ref}}",r),_.possible_answers.length>=s.LIMITS.possible_answers_per_page){var b=Math.ceil((_.possible_answers.length+1)/s.LIMITS.possible_answers_per_page);_.savePossibleAnswers(),i.possible_answers_pagination[_.ref].page=b,u(_,b),p=m.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list li"),p.length>s.LIMITS.possible_answers_per_page-1&&(u(_,b+1),p=m.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list li ")),t.append(f).fadeIn(s.ANIMATION_FAST),_.possible_answers.push({answer:s.POSSIBILE_ANSWER_PLACEHOLDER,answer_ref:r}),_.savePossibleAnswers(),d.init(_),d.recalculatePagination(_)}else t.append(f).fadeIn(s.ANIMATION_FAST),_.savePossibleAnswers();switch(_.type){case s.SEARCH_SINGLE_TYPE:case s.SEARCH_MULTIPLE_TYPE:_.possible_answers.length>=s.LIMITS.possible_answers_max_search&&n.input_properties_panel.toggleAddAnswerBtn(!0);break;case s.CHECKBOX_TYPE:case s.RADIO_TYPE:case s.DROPDOWN_TYPE:_.possible_answers.length>=s.LIMITS.possible_answers_max&&n.input_properties_panel.toggleAddAnswerBtn(!0);
}},removePossibleAnswer:function(e,t){var r,o,a=e,p=t,c=i.possible_answers_pagination[a.ref].page;a.dom.properties_panel=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+a.ref+'"]'),r=a.dom.properties_panel.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list"),o=r.find("li"),1!==a.possible_answers.length&&o.eq(p).fadeOut(200,function(){var e=(c-1)*s.LIMITS.possible_answers_per_page;switch($(this).remove(),a.possible_answers.splice(e+p,1),1===a.possible_answers.length&&r.find("li div span button").prop("disabled",!0),a.type){case s.SEARCH_SINGLE_TYPE:case s.SEARCH_MULTIPLE_TYPE:a.possible_answers.length<s.LIMITS.possible_answers_max_search&&n.input_properties_panel.toggleAddAnswerBtn(!1),d.recalculatePossibleAnswersDOM(a);break;case s.CHECKBOX_TYPE:case s.RADIO_TYPE:case s.DROPDOWN_TYPE:a.possible_answers.length<s.LIMITS.possible_answers_max&&n.input_properties_panel.toggleAddAnswerBtn(!1),d.recalculatePossibleAnswersDOM(a),a.updatePossibleInitialAnswers()}})},updateJumpPossibleAnswers:function(e,t){var r,i=e,n=t,o=i.possible_answers.length,s=n.find(".input-properties__form__jumps__list .input-properties__form__jumps__list-item .input-properties__form__jumps__logic--answer select");s.each(function(e){var t=$(this),n=t.find("option:selected"),s=window.parseInt(n.val(),10);for(r=0;r<o;r++)s===i.possible_answers[r].answer_id&&n.text(s+" - "+i.possible_answers[r].answer);void 0,void 0})},updatePossibleInitialAnswers:function(e){var t,r,n=e;n.dom.advanced_properties_wrapper=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+n.ref+'"]').find(".input-properties__form__advanced-properties"),t=n.dom.advanced_properties_wrapper.find("div.panel-body div.input-properties__form__advanced-properties__default select"),r=t.find("option:selected"),n["default"]=r.val()},listPossibleInitialAnswers:function(e){var t,r,n=e,o="";n.dom.properties_panel=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+n.ref+'"]'),t=n.dom.properties_panel.find(".input-properties__form__possible-answers .panel-body ul.input-properties__form__possible-answers__list li"),void 0,n.dom.advanced_properties_wrapper=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+n.ref+'"]').find(".input-properties__form__advanced-properties"),r=n.dom.advanced_properties_wrapper.find("div.panel-body div.input-properties__form__advanced-properties__default select"),r.empty(),r.append('<option value="">None</option>'),n.possible_answers.forEach(function(e){var t=e.answer_ref,i=e.answer;o=t===n["default"]?"selected":"",r.append('<option value="'+t+'" '+o+" >"+i+"</option>")})},exportPossibleAnswersCSV:function(){var e,t,r=[];if(e=o.getActiveInput(),0===e.possible_answers.length)return!1;if(!p.arePossibleAnswersValid(e.possible_answers,e.type))return!1;t=e.question.trunc(20)+"__possible_answers.csv",$(e.possible_answers).each(function(e,t){r[e]=[t.answer]});var i=Papa.unparse({fields:[e.question],data:r},{quotes:!1,quoteChar:"",delimiter:",",header:!0,newline:"\r\n"});return{data:i,filename:t}},importCSVFile:function(t){var r,p,u=t[0];e("template/methods/getPossibleAnswersHTML");if(i.dom.overlay.fadeIn(0),i.isOpeningFileBrowser=!1,!u)return i.dom.overlay.fadeOut(s.ANIMATION_FAST),void toastr.error(c.error.CSV_FILE_INVALID);if(r=u.name.split("."),p=r[r.length-1],p!==s.CSV_FILE_EXTENSION)return i.dom.overlay.fadeOut(s.ANIMATION_FAST),void toastr.error(c.error.CSV_FILE_INVALID);var m=new FileReader;m.onload=function(t){var r=t.target.result,p=Papa.parse(r,{header:!0,delimiter:","}),u=p.meta.fields,m=e("actions/undo"),h=$("#csv-import-possible_answers");return 0===p.data.length?(i.dom.overlay.fadeOut(s.ANIMATION_FAST),void toastr.error(c.error.CSV_FILE_INVALID)):(h.modal(),h.off().on("shown.bs.modal",function(){var e,t,r,b=$("#csv-import-possible_answers").find(".possible-answers-column-picker"),g="",v=null,E=s.LIMITS.possible_answers_max,I=o.getActiveInput();I.type!==s.SEARCH_SINGLE_TYPE&&I.type!==s.SEARCH_MULTIPLE_TYPE||(E=s.LIMITS.possible_answers_max_search),b.find(".btn").html('Pick column <span class="caret"></span>'),b.find(".btn").val(""),h.find(".possible_answers__first-row-headers input").prop("checked",!0),h.find(".possible_answers__append-or-replace input#replace").prop("checked",!0),h.find(".possible_answers-perform-import").attr("disabled",!0),i.dom.overlay.fadeOut(s.ANIMATION_FAST),$(u).each(function(e,t){g+="<li>",g+='<a href="#">'+t.trunc(25)+"</a>",g+="</li>"}),b.find(".dropdown-menu").empty().append(g),b.find(".dropdown-menu li").off().on("click",function(){$(this).parents(".possible-answers-column-picker").find(".btn").html($(this).text()+' <span class="caret"></span>'),$(this).parents(".possible-answers-column-picker").find(".btn").val($(this).data("value")),v=$(this).index(),h.find(".possible_answers-perform-import").attr("disabled",!1)}),$(".possible_answers-perform-import").off().on("click",function(){i.dom.overlay.fadeIn(0),t=h.find(".possible_answers__append-or-replace").find("#replace").is(":checked"),r=h.find(".possible_answers__first-row-headers").find(".checkbox input").is(":checked"),e={userWantstoReplaceAnswers:t,doesFirstRowContainsHeaders:r,input:I,importedJson:p,selectedHeaderIndex:v},_(e)?(h.modal("hide"),n.input_properties_panel.toggleAddAnswerBtn(I.possible_answers.length>=E),d.recalculatePagination(I),a.areAllInputsValid(i.project_definition)&&(n.navbar.toggleSaveProjectBtn(s.BTN_ENABLED),i.dom.save_project_btn.off().on("click",f)),window.setTimeout(function(){i.dom.overlay.fadeOut(s.ANIMATION_FAST),l.showSuccess(c.success.POSSIBLE_ANSWERS_IMPORTED),m.pushState(!1)},s.ANIMATION_SUPER_SLOW)):window.setTimeout(function(){i.dom.overlay.fadeOut(s.ANIMATION_FAST),l.showError(c.error.POSSIBLE_ANSWERS_INVALID)},s.ANIMATION_SUPER_SLOW)})}),void h.find('button[data-dismiss="modal"]').one("click",function(){h.modal("hide")}))},m.readAsText(u)},orderPossibleAnswers:function(e){var t=o.getActiveInput(),r=t.possible_answers;switch(i.possible_answers_pagination[t.ref].page=1,i.dom.overlay.fadeIn(0),e){case s.POSSIBLE_ANSWERS_ORDER.AZ:r=r.sort(function(e,t){return e.answer.localeCompare(t.answer,void 0,{ignorePunctuation:!0,numeric:!0})});break;case s.POSSIBLE_ANSWERS_ORDER.ZA:r=r.sort(function(e,t){return t.answer.localeCompare(e.answer,void 0,{ignorePunctuation:!0,numeric:!0})});break;case s.POSSIBLE_ANSWERS_ORDER.SHUFFLE:r=o.shuffleArray(r)}var a,p=m(r),c=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+t.ref+'"]');a=c.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list"),a.empty().hide().append(p).fadeIn(s.ANIMATION_FAST),d.recalculatePagination(t),h.pushState(!1),n.navbar.toggleSaveProjectBtn(s.BTN_ENABLED),i.dom.save_project_btn.off().on("click",f),window.setTimeout(function(){i.dom.overlay.fadeOut(s.ANIMATION_FAST)},s.ANIMATION_SUPER_SLOW)},deleteAllAnswers:function(){var t,r=o.generateUniqID(),a=e("actions/undo");i.dom.overlay.fadeIn(0),t=o.getActiveInput();var p,c=i.dom.partials.possible_answer_list_item,l=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+t.ref+'"]');p=l.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list"),c=c.replace("{{answer}}",s.POSSIBILE_ANSWER_PLACEHOLDER),c=c.replace("{{answer-ref}}",r),c=c.replace("{{disabled}}",s.DISABLED_STATE),p.empty().hide().append(c).fadeIn(s.ANIMATION_FAST),t.possible_answers=[{answer_ref:o.generateUniqID(),answer:s.POSSIBILE_ANSWER_PLACEHOLDER}],a.pushState(!1),n.navbar.toggleSaveProjectBtn(s.BTN_ENABLED),i.dom.save_project_btn.off().on("click",f),n.input_properties_panel.toggleAddAnswerBtn(!1),d.tearDown(t),window.setTimeout(function(){i.dom.overlay.fadeOut(s.ANIMATION_FAST)},s.ANIMATION_SUPER_SLOW)}};t.exports=b},{"actions/possible-answers-pager":12,"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"helpers/import-form-validation":35,"helpers/ui":36,"helpers/utils":37,"template/methods/getPossibleAnswersHTML":70,"template/methods/getPossibleAnswersList":71,"template/methods/getPossibleAnswersPage":72,"ui-handlers/event-handler-callbacks/confirm-import-possible-answers-callback":78,"ui-handlers/event-handler-callbacks/save-project-click-callback":97}],14:[function(e,t,r){"use strict";var i=e("actions/save/module.saveAllInputProperties"),n=e("actions/save/module.saveProperties"),o=e("actions/save/module.savePossibleAnswers"),s=e("actions/save/module.saveAdvancedProperties"),a=e("actions/save/module.saveJumps"),p=e("actions/save/module.saveUniqueness"),c=e("actions/save/module.doCleaningBeforeSaving"),l={saveUniqueness:function(e){return p(e)},saveAllInputProperties:function(e){return i(e)},saveProperties:function(e){return n(e)},savePossibleAnswers:function(e){return o(e)},saveAdvancedProperties:function(e){return s(e)},saveJumps:function(e){return a(e)},doCleaningBeforeSaving:function(e){return c(e)}};t.exports=l},{"actions/save/module.doCleaningBeforeSaving":15,"actions/save/module.saveAdvancedProperties":16,"actions/save/module.saveAllInputProperties":17,"actions/save/module.saveJumps":18,"actions/save/module.savePossibleAnswers":19,"actions/save/module.saveProperties":20,"actions/save/module.saveUniqueness":21}],15:[function(e,t,r){"use strict";var i=(e("config/consts"),e("config/formbuilder"),e("helpers/utils")),n=function(e){var t="",r=!0;return $(e).each(function(e,n){$(n.inputs).each(function(e,o){n.inputs[e].question=i.replaceWordChars(o.question);var s=i.getJumpAvailableDestinationsAsKeys(e,o,n.inputs,!1);$(o.jumps).each(function(e,i){s[i.to]||(t=o.question,r=!1),o.jumps[e]={to:i.to,when:i.when,answer_ref:i.answer_ref}}),$(o.branch).each(function(e,n){delete n.dom,o.branch[e].question=i.replaceWordChars(n.question),s=i.getJumpAvailableDestinationsAsKeys(e,n,o.branch,!0),$(n.jumps).each(function(e,i){s[i.to]||(t=" (branch) "+n.question,r=!1),n.jumps[e]={to:i.to,when:i.when,answer_ref:i.answer_ref}}),$(n.group).each(function(e,t){n.group[e].question=i.replaceWordChars(t.question),delete t.dom})}),$(o.group).each(function(e,t){o.group[e].question=i.replaceWordChars(t.question),delete t.dom}),void 0,delete o.dom})}),{invalid_jumps_question:t,all_jumps_valid:r}};t.exports=n},{"config/consts":24,"config/formbuilder":26,"helpers/utils":37}],16:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/formbuilder"),o=function(t){var r,o=e("actions/save");t.dom.advanced_properties_wrapper=n.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+t.ref+'"]').find(".input-properties__form__advanced-properties"),t.hideAdvancedPropertiesErrors(),t.type!==i.README_TYPE&&(t["default"]=t.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default input").val(),t["default"]=""===t["default"]?null:t["default"],t["default"]&&(t["default"]=t["default"].replace(/(<([^>]+)>)/gi,""),t.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default input").val(t["default"])),t.regex=t.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__regex input").val(),t.regex=""===t.regex?null:t.regex,t.regex&&(t.regex=t.regex.replace(/(<([^>]+)>)/gi,""),t.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__regex input").val(t.regex)),t.verify=t.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__double-entry input").is(":checked"),o.saveUniqueness(t)),r=t.isInitialAnswerValid(),r.is_valid||(t.dom.is_valid=!1,t.showAdvancedPropertiesErrors(i.DEFAULT_PROPERTY,r.error.message))};t.exports=o},{"actions/save":14,"config/consts":24,"config/formbuilder":26}],17:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/formbuilder"),o=(e("helpers/ui"),function(t){var r,o,s,a,p,c=t,l=e("helpers/ui"),_=e("helpers/utils"),u=e("actions/validation");c.saveProperties(),i.MULTIPLE_ANSWER_TYPES.indexOf(c.type)!==-1&&c.savePossibleAnswers(),i.MEDIA_ANSWER_TYPES.indexOf(c.type)===-1&&c.type!==i.BRANCH_TYPE&&c.type!==i.GROUP_TYPE&&c.saveAdvancedProperties(),c.jumps.length>0&&c.saveJumps(),c.type===i.BRANCH_TYPE&&c.dom.is_valid&&(l.inputs_collection.showInputQuestionPreview(c.ref,c.question.trunc(50)),c.validateBranchInputs()),c.type===i.GROUP_TYPE&&c.dom.is_valid&&(l.inputs_collection.showInputQuestionPreview(c.ref,c.question.trunc(50)),c.validateGroupInputs()),n.is_editing_branch&&n.is_editing_group?(r=_.getInputObjectByRef(n.branch.active_branch_ref),o=_.getNestedGroupObjectByRef(r,n.group.active_group_ref),a=u.validateGroupInputs(o),a.is_valid?(o.dom.is_valid=!0,l.inputs_collection.showInputValidIcon(o.ref),p=r.validateBranchInputs()):(l.inputs_collection.showInputInvalidIcon(o.ref),o.dom.is_valid=!1)):(n.is_editing_branch&&(r=_.getInputObjectByRef(n.branch.active_branch_ref),s=u.validateBranchInputs(r),s.is_valid?(l.inputs_collection.showInputValidIcon(r.ref),r.dom.is_valid=!0):(l.inputs_collection.showInputInvalidIcon(r.ref),r.dom.is_valid=!1)),n.is_editing_group&&(o=_.getInputObjectByRef(n.group.active_group_ref),a=u.validateGroupInputs(o),a.is_valid?(o.dom.is_valid=!0,l.inputs_collection.showInputValidIcon(o.ref)):(l.inputs_collection.showInputInvalidIcon(o.ref),o.dom.is_valid=!1)))});t.exports=o},{"actions/validation":23,"config/consts":24,"config/formbuilder":26,"helpers/ui":36,"helpers/utils":37}],18:[function(e,t,r){"use strict";var i=(e("config/consts"),e("config/formbuilder")),n=function(t){var r=(e("helpers/ui"),e("actions/undo")),n=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+t.ref+'"]').find(".input-properties__form__jumps .input-properties__form__jumps__list"),o=n.find("li"),s={are_valid:null,when:null,to:null,answer_ref:null,type:null};t.hideJumpsErrors(o),t.jumps=[],o.each(function(e){s.has_valid_destination=!0,s.type=t.type,s.when=$(this).find(".input-properties__form__jumps__logic--when select option:selected").val(),s.to=$(this).find(".input-properties__form__jumps__logic--goto select option:selected").val(),s.answer_ref=$(this).find(".input-properties__form__jumps__logic--answer select option:selected").val(),s.are_valid=t.isJumpValid(s),s.are_valid||(t.showSingleJumpErrors($(this),s),t.dom.is_valid=!1),t.jumps[e]={to:s.to,when:s.when,answer_ref:s.answer_ref||null}}),r.pushState()};t.exports=n},{"actions/undo":22,"config/consts":24,"config/formbuilder":26,"helpers/ui":36}],19:[function(e,t,r){"use strict";var i,n=e("config/consts"),o=e("config/formbuilder"),s=e("config/messages");i=function(e){var t,r,i,a=e,p=o.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+a.ref+'"]'),c=p.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list li"),l=[],_=o.possible_answers_pagination[a.ref].page,u=(_-1)*n.LIMITS.possible_answers_per_page;a.dom.properties_panel=o.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+a.ref+'"]'),a.hidePossibleAnswersErrors(c),c.each(function(e,n){var o=$(n).find("div input");return t=o.val(),t=t.replaceAll(">","﹥"),t=t.replaceAll("<","﹤"),o.attr("value",t),o.val(t),r=o.attr("data-answer-ref"),l.includes(r)?(a.dom.is_valid=!1,a.showPossibleAnswerErrors($(n),s.error.POSSIBLE_ANSWER_DUPLICATED_IDENTIFIER),!1):(l.push(r),a.possible_answers[u+e]={answer:t,answer_ref:r},i=a.isPossibleAnswerValid(t),void(i.is_valid||(a.dom.is_valid=!1,a.showPossibleAnswerErrors($(n),i.error.message))))})},t.exports=i},{"config/consts":24,"config/formbuilder":26,"config/messages":28}],20:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/formbuilder"),o=e("helpers/utils"),s=function(e){var t,r=e;r.dom.properties_panel=n.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+r.ref+'"]'),r.dom.is_valid=!0,r.hidePropertiesErrors(),r.type===i.README_TYPE?(r.question=r.dom.properties_panel.find("div.input-properties__form__question textarea").val().trim(),r.question=r.question.replace(/\s\s+/g," ").replace(/&nbsp;/g,""),r.question=o.encodeHtml(r.question)):(r.question=r.dom.properties_panel.find("div.input-properties__form__question input").val(),r.question=r.question.replaceAll(">","﹥"),r.question=r.question.replaceAll("<","﹤"),r.dom.properties_panel.find("div.input-properties__form__question input").val(r.question),r.is_required=r.dom.properties_panel.find("div.input-properties__form__required-flag input").is(":checked"),r.is_title=r.dom.properties_panel.find("div.input-properties__form__title-flag input").is(":checked")),t=r.isQuestionTextValid(),t.is_valid||(r.dom.is_valid=!1,r.dom.error=t.error.message,r.showPropertiesErrors(t.error.message))};t.exports=s},{"config/consts":24,"config/formbuilder":26,"helpers/utils":37}],21:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/formbuilder"),o=function(e){var t=e.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__uniqueness input:checked");0===n.current_form_index?e.uniqueness=t.length>0?i.UNIQUESS_FORM:i.UNIQUESS_NONE:t.length>0?e.uniqueness=t.hasClass("uniqueness-hierarchy")?i.UNIQUESS_HIERARCHY:i.UNIQUESS_FORM:e.uniqueness=i.UNIQUESS_NONE};t.exports=o},{"config/consts":24,"config/formbuilder":26}],22:[function(e,t,r){"use strict";var i,n=e("config/formbuilder"),o=e("actions/parse"),s=e("config/consts"),a=e("helpers/ui"),p=(e("factory/form-factory"),e("helpers/utils"),{execute:function(){n.render_action=s.RENDER_ACTION_UNDO,n.dom.overlay.fadeIn(s.ANIMATION_FAST,function(){n.state.length>1&&n.state.pop(),n.previous_state=CircularJSON.parse(CircularJSON.stringify(n.state[n.state.length-1])),n.dom.forms_tabs_content.find(".main__tabs-content-tabpanel").not(":first").remove(),n.dom.forms_tabs_content.find(".inputs-collection .sortable .input").remove(),n.dom.forms_tabs_content.find(".main__tabs-content-tabpanel .input-properties .input-properties__form").remove(),n.dom.forms_tabs.find(".main__tabs__form-btn").not(":first").remove(),n.project_definition=n.previous_state.project_definition,$.when(o.renderProject(n.project_definition)).then(function(){window.setTimeout(function(){n.dom.overlay.fadeOut(s.ANIMATION_FAST,function(){})},s.ANIMATION_SLOW),1===n.state.length&&a.navbar.toggleUndoBtn(s.BTN_DISABLED),n.render_action=s.RENDER_ACTION_DO,n.possible_answers.enabled_sortable=[]})})},pushState:function(e){function t(){n.state.length>=s.LIMITS.max_states&&n.state.shift(),r.project_definition=Flatted.parse(Flatted.stringify(n.project_definition)),r.active_input_ref=n.current_input_ref,r.active_form_index=n.current_form_index,r.active_form_ref=n.current_form_ref,r.active_properties_tab=n.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+r.active_input_ref+'"]').find(".nav-tabs .active a").attr("href"),n.is_editing_branch&&n.is_editing_group?(r.active_branch_ref=n.branch.active_branch_ref,r.active_group_ref=n.group.active_group_ref,r.active_input_ref=n.group.current_input_ref,r.active_properties_tab=n.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+r.active_input_ref+'"]').find(".nav-tabs .active a").attr("href")):(n.is_editing_branch&&(r.active_branch_ref=n.branch.active_branch_ref,n.branch.current_input_ref&&(r.active_branch_input_ref=n.branch.current_input_ref),r.active_properties_tab=n.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+r.active_branch_input_ref+'"]').find(".nav-tabs .active a").attr("href")),n.is_editing_group&&(r.active_group_ref=n.group.active_group_ref,n.group.current_input_ref&&(r.active_group_input_ref=n.group.current_input_ref),r.active_properties_tab=n.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+r.active_group_input_ref+'"]').find(".nav-tabs .active a").attr("href"))),r.was_editing_branch=n.is_editing_branch,r.was_editing_group=n.is_editing_group,n.state.push(r),void 0,void 0}var r={};n.render_action!==s.RENDER_ACTION_UNDO&&(1===n.state.length&&a.navbar.toggleUndoBtn(s.BTN_ENABLED),e?(clearTimeout(i),i=window.setTimeout(t,500)):t())}});t.exports=p},{"actions/parse":5,"config/consts":24,"config/formbuilder":26,"factory/form-factory":30,"helpers/ui":36,"helpers/utils":37}],23:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/messages"),o=e("config/formbuilder"),s=e("actions/save"),a=e("helpers/utils"),p=e("ui-handlers/event-handler-callbacks/save-project-click-callback"),c=e("helpers/import-form-validation"),l=e("config/toast"),_={isFormNameValid:function(e,t){var r=o.project_definition.data.project.forms,s=e.trim(),a={is_valid:!0,error:{message:null,type:i.QUESTION_PROPERTY}};return""===s?(a.is_valid=!1,a.error.message=n.error.FORM_NAME_EMPTY):i.FORM_NAME_REGEX.test(s)?t&&$(r).each(function(e,t){t.name.toLowerCase()===s.toLowerCase()&&(a.is_valid=!1,a.error.message=n.error.FORM_NAME_EXIST)}):(a.is_valid=!1,a.error.message=n.error.FORM_NAME_INVALID),a},isQuestionTextValid:function(e){var t=e.question,r=t.trim(),o={is_valid:!0,error:{message:null,type:i.QUESTION_PROPERTY}};return""===r&&(o.is_valid=!1,o.error.message=n.error.QUESTION_TEXT_EMPTY),e.type===i.README_TYPE&&(r=a.decodeHtml(r),r=r.replace(/(<([^>]+)>)/gi,""),r.trim().length>i.LIMITS.readme_length&&(o.is_valid=!1,o.error.message=n.error.QUESTION_LENGTH_LIMIT_EXCEEDED)),e.type!==i.README_TYPE&&r.length>i.LIMITS.question_length&&(o.is_valid=!1,o.error.message=n.error.QUESTION_LENGTH_LIMIT_EXCEEDED),o},isPossibleAnswerValid:function(e){var t=e.trim(),r={is_valid:!0,error:{message:null,type:i.QUESTION_PROPERTY}};return""===t&&(r.is_valid=!1,r.error.message=n.error.POSSIBLE_ANSWER_EMPTY),r},isInitialAnswerValid:function(e,t,r){var o=t||"",s=r,a=e,p={is_valid:!0,error:{message:null,type:i.DEFAULT_PROPERTY}};return o=o.trim(),s&&o&&(o.match(s)||(p.is_valid=!1,p.error.message=n.error.INITIAL_ANSWER_NOT_MATCHING_REGEX)),a===i.PHONE_TYPE,p},isValueInt:function(e){return e=parseFloat(e),Number(e)===e&&e%1===0},isValueFloat:function(e){return e=parseFloat(e),e===Number(e)&&e%1!==0},isMinMaxValueValid:function(e,t){var r=t,o={is_valid:!0,error:{message:null,type:i.MAX_VALUE_PROPERTY}};return e===i.INTEGER_TYPE&&""!==r&&(this.isValueInt(r)||(o.is_valid=!1,o.error.message=n.error.VALUE_MUST_BE_INTEGER)),o},isJumpValid:function(e,t){var r,n,s=e,p=t,c=!0;if(r=o.is_editing_branch?a.getInputObjectByRef(o.branch.active_branch_ref).branch:o.project_definition.data.project.forms[o.current_form_index].inputs,n=a.getJumpAvailableDestinations(p,r),i.MULTIPLE_ANSWER_TYPES.indexOf(s.type)!==-1?(void 0!==s.to&&void 0!==s.when||(c=!1),void 0===s.answer_ref&&("IS"!==s.when&&"IS_NOT"!==s.when||(c=!1))):void 0===s.to&&(c=!1),c){var l=n.map(function(e){return e.ref});l.indexOf(s.to)===-1?(c=!1,s.has_valid_destination=!1):delete s.has_valid_destination}return c},isPossibleAnswerlinkedToJump:function(e,t){var r,i=e,n=t,o=n.length,s=!1;for(r=0;r<o;r++)if(n[r].answer_id===i.answer_id){s=!0;break}return s},performValidation:function(t,r){var a,c,_=t,u=e("helpers/ui"),d=e("helpers/utils"),f=(e("actions/undo"),_.dom.is_valid?i.BTN_ENABLED:i.BTN_DISABLED);if(s.saveAllInputProperties(_),_.dom.is_valid){if(_.type===i.README_TYPE){c=d.decodeHtml(_.question);var m=d.replaceAllOccurrences(c,"&lt;","﹤");m=d.replaceAllOccurrences(m,"&gt;","﹥"),m=d.replaceAllOccurrences(m,"http://",""),m=d.replaceAllOccurrences(m,"https://",""),m=d.stripTags(m,i.README_ALLOWED_TAGS),_.question=d.encodeHtml(m),c=m.replace(/(<([^>]+)>)/gi," "),u.inputs_collection.showInputQuestionPreview(_.ref,'"'+c.trunc(i.LIMITS.question_preview_length)+'"')}else u.inputs_collection.showInputQuestionPreview(_.ref,_.question.trunc(i.LIMITS.question_preview_length));u.inputs_collection.showInputValidIcon(_.ref),_.type===i.README_TYPE?(c=d.decodeHtml(_.question),c=c.replace(/(<([^>]+)>)/gi," "),u.input_properties_panel.showInputQuestionPreview('"'+c.trunc(20))):u.input_properties_panel.showInputQuestionPreview(_.question.trunc(20)),r&&l.showSuccess(n.success.INPUT_VALID),this.areAllInputsValid(o.project_definition)?(u.navbar.toggleSaveProjectBtn(i.BTN_ENABLED),o.dom.save_project_btn.off().on("click",p),u.forms_tabs.showFormValidIcon(o.current_form_index),o.dom.inputs_collection.find(".inputs-collection__export-form").removeClass("disabled"),o.dom.inputs_collection.find(".inputs-collection__print-as-pdf").removeClass("disabled")):this.areFormInputsValid(o.current_form_index)?(u.forms_tabs.showFormValidIcon(o.current_form_index),o.dom.inputs_collection.find(".inputs-collection__export-form").removeClass("disabled"),o.dom.inputs_collection.find(".inputs-collection__print-as-pdf").removeClass("disabled")):(o.dom.inputs_collection.find(".inputs-collection__export-form").addClass("disabled"),o.dom.inputs_collection.find(".inputs-collection__print-as-pdf").addClass("disabled"))}else{if(_.question)a=_.dom.error?_.dom.error:_.question;else switch(_.type){case i.BRANCH_TYPE:a=n.error.NO_BRANCH_HEADER_YET;break;case i.GROUP_TYPE:a=n.error.NO_GROUP_HEADER_YET;break;default:a=n.error.NO_QUESTION_TEXT_YET}u.inputs_collection.showInputInvalidIcon(_.ref),u.inputs_collection.showInputQuestionPreview(_.ref,a),u.input_properties_panel.showInputQuestionPreview(a),r&&l.showError(n.error.INPUT_NOT_VALID,2e3),u.navbar.toggleSaveProjectBtn(i.BTN_DISABLED),o.dom.save_project_btn.off("click"),u.forms_tabs.showFormInvalidIcon(o.current_form_index),o.dom.inputs_collection.find(".inputs-collection__export-form").addClass("disabled"),o.dom.inputs_collection.find(".inputs-collection__print-as-pdf").addClass("disabled")}u.input_properties_panel.toggleCopyInputButton(_.ref,f)},areAllInputsValid:function(e){var t=!0,r=e.data.project.forms;e:for(var i=0;i<r.length;i++){if(0===r[i].inputs.length){t=!1;break}for(var n=0;n<r[i].inputs.length;n++)if(!r[i].inputs[n].dom.is_valid){t=!1;break e}}return t},areFormInputsValid:function(e){var t=!0,r=o.project_definition.data.project.forms[e];return 0===r.inputs.length&&(t=!1),$(r.inputs).each(function(e,r){if(!r.dom.is_valid)return t=!1,!1}),t},validateBranchInputs:function(e){var t={is_valid:!0,error:{message:null,type:i.DEFAULT_PROPERTY}},r=e;return 0===r.branch.length?(t.is_valid=!1,t.error.message=n.error.NO_BRANCH_INPUTS_FOUND):$(r.branch).each(function(e,r){if(!r.dom.is_valid)return t.is_valid=!1,t.error.message=n.error.INVALID_BRANCH_INPUTS,!1}),t},validateGroupInputs:function(e){var t={is_valid:!0,error:{message:null,type:i.DEFAULT_PROPERTY}},r=e;return 0===r.group.length?(t.is_valid=!1,t.error.message=n.error.NO_GROUP_INPUTS_FOUND):$(r.group).each(function(e,r){if(!r.dom.is_valid)return t.is_valid=!1,t.error.message=n.error.INVALID_GROUP_INPUTS,!1}),t},validateJumpsAfterSorting:function(t){for(var r,n,s,a=this,p=e("helpers/ui"),c=t,l=0;l<c.length;l++){var _=c[l],u=!0;r=o.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+_.ref+'"]').find(".input-properties__form__jumps .input-properties__form__jumps__list"),n=r.find("li"),_.hideJumpsErrors(n);for(var d=0;d<_.jumps.length;d++){var f=_.jumps[d];s=n.eq(d),a.isJumpValid(f,_)?p.input_properties_panel.hideJumpTabError(s):(_.showSingleJumpErrors(s,f),u=!1,p.inputs_collection.showInputInvalidIcon(_.ref))}_.dom.is_valid=a.isInputObjectValid(_)&&u,_.dom.is_valid?p.inputs_collection.showInputValidIcon(_.ref):p.inputs_collection.showInputInvalidIcon(_.ref)}a.areFormInputsValid(o.current_form_index)?(p.forms_tabs.showFormValidIcon(o.current_form_index),o.dom.inputs_collection.find(".inputs-collection__export-form").removeClass("disabled"),o.dom.inputs_collection.find(".inputs-collection__print-as-pdf").removeClass("disabled")):(p.forms_tabs.showFormInvalidIcon(o.current_form_index),o.dom.inputs_collection.find(".inputs-collection__export-form").addClass("disabled"),o.dom.inputs_collection.find(".inputs-collection__print-as-pdf").addClass("disabled")),a.areAllInputsValid(o.project_definition)?p.navbar.toggleSaveProjectBtn(i.BTN_ENABLED):p.navbar.toggleSaveProjectBtn(i.BTN_DISABLED)},isInputObjectValid:function(e){var t=this,r=!0;return t.isQuestionTextValid(e).is_valid||(r=!1),e.type===i.INTEGER_TYPE&&(""!==e.min&&(t.isValueInt(e.min)||(r=!1)),""!==e.max&&(t.isValueInt(e.max)||(r=!1)),r&&""!==e.min&&""!==e.max&&parseFloat(e.min)>parseFloat(e.max)&&(r=!1),""!==e["default"]&&(t.isValueInt(e["default"])?(""!==e.min&&parseInt(e["default"],0)<e.min&&(r=!1),""!==e.min&&parseInt(e["default"],0)>e.max&&(r=!1)):r=!1)),e.type===i.DECIMAL_TYPE&&(""!==e.min&&(t.isValueFloat(e.min)||t.isValueInt(e.min)||(r=!1)),""!==e.max&&(t.isValueFloat(e.max)||t.isValueInt(e.max)||(r=!1)),r&&""!==e.min&&""!==e.max&&parseFloat(e.min)>parseFloat(e.max)&&(r=!1),""!==e["default"]&&(t.isValueFloat(e["default"])||t.isValueInt(e["default"])?(""!==e.min&&parseFloat(e["default"])<e.min&&(r=!1),""!==e.min&&parseFloat(e["default"])>e.max&&(r=!1)):r=!1)),i.MULTIPLE_ANSWER_TYPES.indexOf(e.type!==-1)&&$(e.possible_answers).each(function(e,i){t.isPossibleAnswerValid(i.answer).is_valid||(r=!1)}),e.type===i.GROUP_TYPE&&0===e.group.length&&(r=!1),e.type===i.BRANCH_TYPE&&0===e.branch.length&&(r=!1),r},validateBeforeSaving:function(e,t){var r={is_valid:!0,error:{message:null}},o="",s=!0,p=!0;$(t).each(function(t,r){if(!c.isValidInput(e,r,!1,!1))return void 0,o=r.question.trunc(50),s=!1,!1});var l;return s?(l=a.getInputsTotal(t),l>i.INPUTS_MAX_ALLOWED?r={is_valid:!1,error:{message:n.error.TOO_MANY_QUESTIONS_FOR_CURRENT_FORM+l+", limit is "+i.INPUTS_MAX_ALLOWED+"!"}}:a.isMaxTitleLimitExceeded(t)?r={is_valid:!1,error:{message:n.error.TOO_MANY_TITLES}}:($(t).each(function(e,t){if(a.isMaxTitleLimitExceeded(t.branch))return p=!1,!1}),p?c.areJumpsDestinationsValid(t)?a.getSearchInputsTotal()>i.LIMITS.search_inputs_max?r={is_valid:!1,error:{message:n.error.TOO_MANY_SEARCH_QUESTIONS}}:r:r={is_valid:!1,error:{message:n.error.JUMPS_INVALID}}:r={is_valid:!1,error:{message:n.error.TOO_MANY_TITLES+" (branch)"}})):r={is_valid:!1,error:{message:o}}}};t.exports=_},{"actions/save":14,"actions/undo":22,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"helpers/import-form-validation":35,"helpers/ui":36,"helpers/utils":37,"ui-handlers/event-handler-callbacks/save-project-click-callback":97}],24:[function(e,t,r){"use strict";void 0;var i={PROJECT_URL:"",PROJECT_LOGO_URL:"",BACK_URL:"",API_DEVELOPMENT_GET_PATH:"../project/",API_DEVELOPMENT_POST_PATH:"../postdump/",API_DEVELOPMENT_PROJECT:"project.json",API_PRODUCTION_PATH:"api/internal/formbuilder/",API_MEDIA_PATH:"api/internal/media/",API_PROJECT_LOGO_QUERY_STRING:"?type=photo&name=logo.jpg&format=project_mobile_logo",API_DEVELOPMENT_SERVER:"http://localhost/~mmenegazzo/epicollect5-server/public",FORMBUIlDER_ROOT_FOLDER:"epicollect5-formbuilder",PROJECT_NAME_MAX_LENGHT:100,FORM_NAME_MAX_LENGHT:50,INPUTS_MAX_ALLOWED:300,TAB_FORM_NAME_MAX_DISPLAY_LENGHT:22,INPUTS_COLLECTION_FORM_NAME_MAX_DISPLAY_LENGHT:22,INPUTS_COLLECTION_BRANCH_NAME_MAX_DISPLAY_LENGHT:25,INPUTS_COLLECTION_GROUP_NAME_MAX_DISPLAY_LENGHT:25,MAX_NUMBER_OF_NESTED_CHILD_FORMS:5,ANIMATION_FAST:100,ANIMATION_NORMAL:150,ANIMATION_SLOW:500,ANIMATION_SUPER_SLOW:1e3,FORM_NAME_REGEX:/^[\w\-\s]+$/,FORM_HIERARCHY_TYPE:"hierarchy",FORM_TYPE:"form",UNIQUESS_NONE:"none",UNIQUESS_FORM:"form",UNIQUESS_HIERARCHY:"hierarchy",NAMESPACE_PREFIX:"ec5_",TEXT_TYPE_ICON:"fa-text-width",TEXTAREA_TYPE_ICON:"fa-sticky-note-o",NUMERIC_TYPE_ICON:"fa-hashtag",INTEGER_TYPE_ICON:"fa-hashtag",DECIMAL_TYPE_ICON:"fa-hashtag",DATE_TYPE_ICON:"fa-calendar",TIME_TYPE_ICON:"fa-clock-o",RADIO_TYPE_ICON:"fa-dot-circle-o",README_TYPE_ICON:"fa-file-text-o",CHECKBOX_TYPE_ICON:"fa-check-square-o",DROPDOWN_TYPE_ICON:"fa-caret-square-o-down",BARCODE_TYPE_ICON:"fa-barcode",LOCATION_TYPE_ICON:"fa-map-marker",AUDIO_TYPE_ICON:"fa-microphone",VIDEO_TYPE_ICON:"fa-video-camera",PHOTO_TYPE_ICON:"fa-camera-retro",PHONE_TYPE_ICON:"fa-phone",BRANCH_TYPE_ICON:"fa-clone",GROUP_TYPE_ICON:"fa-align-justify",SEARCH_SINGLE_TYPE_ICON:"fa-search",
SEARCH_MULTIPLE_TYPE_ICON:"fa-search",TEXT_TYPE:"text",TEXTAREA_TYPE:"textarea",INTEGER_TYPE:"integer",DECIMAL_TYPE:"decimal",DATE_TYPE:"date",TIME_TYPE:"time",RADIO_TYPE:"radio",CHECKBOX_TYPE:"checkbox",DROPDOWN_TYPE:"dropdown",BARCODE_TYPE:"barcode",LOCATION_TYPE:"location",AUDIO_TYPE:"audio",VIDEO_TYPE:"video",PHOTO_TYPE:"photo",BRANCH_TYPE:"branch",GROUP_TYPE:"group",README_TYPE:"readme",PHONE_TYPE:"phone",SEARCH_SINGLE_TYPE:"searchsingle",SEARCH_MULTIPLE_TYPE:"searchmultiple",DATE_FORMAT_1:"dd/MM/YYYY",DATE_FORMAT_2:"MM/dd/YYYY",DATE_FORMAT_3:"YYYY/MM/dd",DATE_FORMAT_4:"MM/YYYY",DATE_FORMAT_5:"dd/MM",TIME_FORMAT_1:"HH:mm:ss",TIME_FORMAT_2:"hh:mm:ss",TIME_FORMAT_3:"HH:mm",TIME_FORMAT_4:"hh:mm",TIME_FORMAT_5:"mm:ss",DEFAULT_PROPERTY:"default",QUESTION_PROPERTY:"question",MIN_VALUE_PROPERTY:"min",MAX_VALUE_PROPERTY:"max",SHOW_JUMPS:"Show jumps",HIDE_JUMPS:"Hide jumps",JUMP_TO_END_OF_FORM_REF:"END",JUMP_TO_END_OF_FORM_LABEL:"End of form",POSSIBILE_ANSWERS_CUSTOM_ID:"pa_custom_id",POSSIBILE_ANSWER_PLACEHOLDER:"I am a placeholder answer",USE_ANSWER_AS_TITLE:"Use answer as title",MAX_TITLE_LIMIT_REACHED:"Limit of 3 titles reached",VIEWS_PATH:"views/",BTN_ENABLED:"btn-enabled",BTN_DISABLED:"btn-disabled",ENABLED_STATE:"enabled",DISABLED_STATE:"disabled",RENDER_ACTION_UNDO:"undo",RENDER_ACTION_DO:"do",RENDER_ACTION_VALIDATE:"validate",FORM_FILE_ACCEPTED_TYPE:"application/json",FORM_FILE_EXTENSION:"json",CSV_FILE_ACCEPTED_TYPES:["text/csv","application/vnd.ms-excel"],CSV_FILE_EXTENSION:"csv"};i.MULTIPLE_ANSWER_TYPES=[i.RADIO_TYPE,i.CHECKBOX_TYPE,i.DROPDOWN_TYPE,i.SEARCH_MULTIPLE_TYPE,i.SEARCH_SINGLE_TYPE],i.SINGLE_ANSWER_TYPES=[i.TEXT_TYPE,i.TEXTAREA_TYPE,i.DATE_TYPE,i.TIME_TYPE,i.INTEGER_TYPE,i.DECIMAL_TYPE,i.BARCODE_TYPE,i.README_TYPE,i.PHONE_TYPE],i.MEDIA_ANSWER_TYPES=[i.AUDIO_TYPE,i.PHOTO_TYPE,i.VIDEO_TYPE,i.LOCATION_TYPE],i.VERIFY_ALLOWED_TYPES=[i.TEXT_TYPE,i.TEXTAREA_TYPE,i.INTEGER_TYPE,i.DECIMAL_TYPE,i.BARCODE_TYPE,i.PHONE_TYPE],i.UNIQUENESS_ALLOWED_TYPES=[i.TEXT_TYPE,i.TEXTAREA_TYPE,i.DATE_TYPE,i.TIME_TYPE,i.INTEGER_TYPE,i.DECIMAL_TYPE,i.BARCODE_TYPE,i.PHONE_TYPE],i.REQUIRED_ALLOWED_TYPES=[i.TEXT_TYPE,i.TEXTAREA_TYPE,i.DATE_TYPE,i.TIME_TYPE,i.INTEGER_TYPE,i.DECIMAL_TYPE,i.BARCODE_TYPE,i.PHONE_TYPE,i.RADIO_TYPE,i.CHECKBOX_TYPE,i.DROPDOWN_TYPE,i.SEARCH_MULTIPLE_TYPE,i.SEARCH_SINGLE_TYPE],i.JUMP_CONDITIONS=[{key:"NO_ANSWER_GIVEN",text:"no answer given"},{key:"IS",text:"answer is"},{key:"IS_NOT",text:"answer is NOT"},{key:"ALL",text:"always"}],i.LIMITS={question_length:255,readme_length:1e3,default_answer_length:255,regex_length:50,min_value_length:50,max_value_length:50,possible_answers_max:300,possible_answers_max_search:1e3,titles_max:3,max_states:10,possible_answer_ref_length:13,possible_answer_max_length:150,possible_answers_per_page:100,search_inputs_max:5,question_preview_length:80},i.SUMMERNOTE_OPTIONS={placeholder:"Type here...",toolbar:[["style",["bold","italic","underline"]]]},i.REGEX={only_letters:"^[a-zA-Z]*$",only_digits:"^[0-9]+$",limit_length_20:"^.{1,20}$",possible_answer_ref:"^[a-zA-Z0-9]{13}$",input_ref:"^[a-zA-Z0-9-_]{60}$"},i.README_ALLOWED_TAGS=["<br>","<p>","<b>","<strong>","<i>","<em>","<u>"],i.POSSIBLE_ANSWERS_ORDER={AZ:"az",ZA:"za",SHUFFLE:"shuffle"},t.exports=i},{}],25:[function(e,t,r){"use strict";var i=function(){Array.prototype.move=function(e,t){var r,i;if(e=parseInt(e,10),t=parseInt(t,10),e!==t&&e>=0&&e<=this.length&&t>=0&&t<=this.length){if(i=this[e],e<t)for(r=e;r<t;r++)this[r]=this[r+1];else for(r=e;r>t;r--)this[r]=this[r-1];this[t]=i}},String.prototype.trunc=function(e){return this.substr(0,e-1)+(this.length>=e?"...":"")},String.prototype.startsWith||(String.prototype.startsWith=function(e){return!this.indexOf(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var r;if(null===this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),o>=n)return-1;for(r=Math.max(o>=0?o:n-Math.abs(o),0);r<n;){if(r in i&&i[r]===e)return r;r++}return-1})};t.exports=i},{}],26:[function(e,t,r){"use strict";var i={current_form_ref:"",current_form_index:"",current_input_ref:"",is_sorting:!1,from_index:0,to_index:0,possible_answers:{enabled_sortable:[],from_index:0,to_index:0},state:[],dom:{input_properties:"",input_properties_forms_wrapper:"",input_properties_buttons:"",input_properties_no_input_selected:"",inputs_collection:"",inputs_collection_sortable:"",partials:{},input_properties_views:{}},branch:{},project_definition:{},setup:function(e,t,r){i.current_form_ref=e,i.current_form_index=0,i.possible_answers_pagination={},i.dom={overlay:$(".wait-overlay"),loader:$(".loader"),navbar:$(".navbar"),forms_tabs:$(".main .main__tabs"),forms_tabs_content:$(".main .main__tabs-content"),save_project_btn:$(".main__tabs-btns .btn-group .main__tabs__save-project-btn"),undo_btn:$(".main__tabs-btns .btn-group .main__tabs__undo-btn"),main_container:$(".container-fluid"),input_properties:$("#"+e+"-input-properties.input-properties"),input_properties_forms_wrapper:$("#"+e+"-input-properties.input-properties > .panel > .panel-body.input_properties__forms_wrapper"),input_properties_buttons:$("#"+e+"-input-properties .input-properties__buttons"),input_properties_no_input_selected:$(".input-properties__no-input-selected"),inputs_collection:$("#"+e+"-inputs-collection.inputs-collection"),inputs_collection_sortable:$("#"+e+"-inputs-collection.inputs-collection .panel .panel-body"),inputs_tools_draggable:$("ul#inputs-tools-list li div.input")},$.isEmptyObject(i.dom.partials)&&t&&(i.dom.partials=t),$.isEmptyObject(i.dom.input_properties_views)&&r&&(i.dom.input_properties_views=r),i.isOpeningFileBrowser=!1,void 0}};t.exports=i},{}],27:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/formbuilder"),o=e("ui-handlers/draggable"),s=e("ui-handlers/sortable"),a=e("ui-handlers/event-handler-callbacks/input-properties-click-callback"),p=e("ui-handlers/event-handler-callbacks/input-collection-sortable-mousedown-callback"),c=e("ui-handlers/event-handler-callbacks/input-properties-focus-callback"),l=e("ui-handlers/event-handler-callbacks/input-properties-change-callback"),_=e("ui-handlers/event-handler-callbacks/input-properties-title-checkbox-callback"),u=e("ui-handlers/event-handler-callbacks/form-tab-click-callback"),d=e("ui-handlers/event-handler-callbacks/modal-form-callback"),f=e("ui-handlers/event-handler-callbacks/export-form-click-callback"),m=e("ui-handlers/event-handler-callbacks/print-as-pdf-click-callback"),h=e("ui-handlers/event-handler-callbacks/import-form-click-callback"),b=e("ui-handlers/event-handler-callbacks/delete-all-questions-click-callback"),g=e("ui-handlers/event-handler-callbacks/save-project-click-callback"),v=e("ui-handlers/event-handler-callbacks/input-properties-keyup-callback"),E=e("ui-handlers/event-handler-callbacks/modal-regex-callback"),I=e("ui-handlers/event-handler-callbacks/input-properties-advanced-tab-click-callback"),T=e("config/messages"),A=e("actions/parse"),w=e("helpers/ui"),P=e("helpers/utils"),N=e("actions/undo"),O=function(){var e=n.project_definition.data.project.name,t=n.project_definition.data.project.forms[0].name;window.toastr.options={closeButton:!0,positionClass:"toast-top-center",showDuration:"200",hideDuration:"300",timeOut:"2000"},P.isSafari&&(CircularJSON=P.JSONPolyfill),$(".navbar-back-button").on("click",function(){P.goBack()}),$(".main__tabs__undo-btn").off().on("click",function(){N.execute()}),n.dom.inputs_collection.disableSelection(),o(),s(),n.dom.input_properties.off().on("click","button.btn, .possible_answer-more-action",a),n.dom.input_properties.on("click",".advanced-tab",I),n.dom.inputs_collection_sortable.on("mousedown","div.input",p),n.dom.input_properties.on("focus","select",c),n.dom.input_properties.on("change","select",l),n.dom.input_properties.on("change",".input-properties__form__title-flag input",_),n.dom.forms_tabs.on("click",'a[data-toggle="tab"]',u),n.dom.save_project_btn.off().on("click",g),n.dom.inputs_collection.on("click",".inputs-collection__export-form",function(e){return!$(e.target).parent().hasClass(i.DISABLED_STATE)&&void f()}),n.dom.inputs_collection.on("click",".inputs-collection__print-as-pdf",function(e){return!$(e.target).parent().hasClass(i.DISABLED_STATE)&&void m()}),n.dom.inputs_collection.find(".inputs-collection__form-import input").off("change").on("change",function(){h(this.files),$(this).val(null)}),n.dom.inputs_collection.on("click",".inputs-collection__delete-all-questions",function(e){b()}),n.dom.input_properties.off("keyup").on("keyup",".input-properties__form__question input, .input-properties__form__possible-answers__list__possible_answer_item input",v),$(document).on("hidden.bs.modal",function(e){$("a").blur()}),n.dom.navbar.find(".navbar-project-name span").text(e),void 0,void 0,P.setProjectLogoUrl(),n.dom.navbar.find(".navbar-project-name img").attr("src",i.PROJECT_LOGO_URL),n.dom.inputs_collection.find(".inputs-collection__header__edit-state").text(T.labels.EDITING_FORM),n.dom.inputs_collection.find(".inputs-collection__header__element-name").text(t.trunc(i.INPUTS_COLLECTION_FORM_NAME_MAX_DISPLAY_LENGHT)),n.dom.input_properties.find(".question-preview").text(""),w.forms_tabs.setFirstFormTabName(t),n.dom.input_properties_buttons.fadeOut(),$('[data-toggle="popover"]').popover(),$('[data-toggle="tooltip"]').tooltip(),$(".main__modal--edit-form-name").on("show.bs.modal",d),$("#info-regex").on("show.bs.modal",E),n.render_action=i.RENDER_ACTION_DO,$.when(A.renderProject(n.project_definition)).then(function(){var e={project_definition:JSON.parse(JSON.stringify(n.project_definition)),active_input_ref:null,active_form_index:0,active_form_ref:n.project_definition.data.project.forms[0].ref};n.state.push(e),n.dom.loader.fadeOut(i.ANIMATION_FAST),n.dom.navbar.removeClass("hidden").hide().fadeIn(i.ANIMATION_FAST),n.dom.main_container.removeClass("hidden").hide().fadeIn(i.ANIMATION_FAST)}),$(window).on("beforeunload",function(){return"Are you sure you want to leave?"}),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)})};t.exports=O},{"actions/parse":5,"actions/undo":22,"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/ui":36,"helpers/utils":37,"ui-handlers/draggable":77,"ui-handlers/event-handler-callbacks/delete-all-questions-click-callback":79,"ui-handlers/event-handler-callbacks/export-form-click-callback":81,"ui-handlers/event-handler-callbacks/form-tab-click-callback":82,"ui-handlers/event-handler-callbacks/import-form-click-callback":83,"ui-handlers/event-handler-callbacks/input-collection-sortable-mousedown-callback":87,"ui-handlers/event-handler-callbacks/input-properties-advanced-tab-click-callback":88,"ui-handlers/event-handler-callbacks/input-properties-change-callback":89,"ui-handlers/event-handler-callbacks/input-properties-click-callback":90,"ui-handlers/event-handler-callbacks/input-properties-focus-callback":91,"ui-handlers/event-handler-callbacks/input-properties-keyup-callback":92,"ui-handlers/event-handler-callbacks/input-properties-title-checkbox-callback":93,"ui-handlers/event-handler-callbacks/modal-form-callback":94,"ui-handlers/event-handler-callbacks/modal-regex-callback":95,"ui-handlers/event-handler-callbacks/print-as-pdf-click-callback":96,"ui-handlers/event-handler-callbacks/save-project-click-callback":97,"ui-handlers/sortable":100}],28:[function(e,t,r){"use strict";var i=e("config/consts"),n={labels:{EDITING_FORM:"Form > ",EDITING_BRANCH:"Branch > ",EDITING_GROUP:"Group > ",EDITING_NESTED_GROUP:" Group: ",EXIT_EDITING:"Back",ADD_BRANCH_INPUTS_HERE:"Add branch questions here",ADD_GROUP_INPUTS_HERE:"Add group questions here"},success:{INPUT_VALID:"Question valid!",FORM_IMPORTED:"Form import succeeded!",POSSIBLE_ANSWERS_IMPORTED:"Possible answers import succeeded!",PROJECT_SAVED:"Project saved!",JUMP_DELETED:"Jump deleted!",INPUT_COPIED:"Question copied!"},error:{FORM_CANNOT_BE_DELETED:"Form cannot be deleted",FORM_NAME_EMPTY:"Form name cannot be empty",FORM_NAME_INVALID:"Form name is invalid",FORM_FILE_INVALID:"Form file is invalid",FORM_IS_INVALID:"Form is invalid",FORM_NAME_EXIST:"Form name exists",INPUT_NOT_VALID:"Question NOT valid!",INPUT_NOT_SELECTED:"No question selected",POSSILE_ANSWERS_CUSTOM_ID_CANNOT_SWITCH_BACK:"Cannot switch back to basic mode",QUESTION_TEXT_EMPTY:"This field cannot be empty",POSSIBLE_ANSWER_EMPTY:"Answer text cannot be empty",POSSIBLE_ANSWER_DUPLICATED_IDENTIFIER:"Duplicated identifier, please remove",VALUE_MUST_BE_INTEGER:"Value must be an integer",MIN_MUST_BE_SMALLER_THAN_MAX:"Min value must be smaller than Max",INITIAL_ANSWER_OUT_OF_RANGE:"Value is out of range",INITIAL_ANSWER_NOT_MATCHING_REGEX:"Value does not match regex",INITIAL_ANSWER_NOT_PHONE_NUMBER:"Value is not a phone number",NO_QUESTION_TEXT_YET:"No question text yet",NO_BRANCH_HEADER_YET:"No branch header yet",NO_GROUP_HEADER_YET:"No group header yet",NO_BRANCH_INPUTS_FOUND:"No branch questions found",NO_GROUP_INPUTS_FOUND:"No group questions found",INVALID_BRANCH_INPUTS:"There are invalid branch questions",INVALID_GROUP_INPUTS:"There are invalid group questions",JUMP_CONDITION_NOT_SELECTED:"You must choose a condition",JUMP_ANSWER_NOT_SELECTED:"You must choose an answer",JUMP_DESTINATION_NOT_SELECTED:"You must choose a valid destination",JUMP_DESTINATION_INVALID:"Invalid destination",PROJECT_NOT_SAVED:"Project error!",JUMP_INVALID:"Invalid jump on question:",JUMPS_INVALID:"Some jumps are invalid",POSSIBLE_ANSWERS_INVALID:"Some possible answers are invalid",CSV_FILE_INVALID:"CSV file is invalid!",BROWSER_NOT_SUPPORTED:"Browser not supported",MAX_QUESTIONS_LIMIT_REACHED:"Questions limit reached for this form!",TOO_MANY_SEARCH_QUESTIONS:"Too many search questions, only "+i.LIMITS.search_inputs_max+"  per project are allowed!",TOO_MANY_TITLES:"Too many titles",TOO_MANY_QUESTIONS_FOR_CURRENT_FORM:"Too many questions for this form: ",QUESTION_LENGTH_LIMIT_EXCEEDED:"Characters limit exceeded"},warning:{POSSIBILE_ANSWER_HAS_LINKED_JUMP:"There is a jump linked to this answer, please remove it first!",INPUT_DELETED:"Question deleted!",FORM_DELETED:"Form deleted!",SEARCH_INPUTS_LIMIT_REACHED:"Search questions limit reached!"}};t.exports=n},{"config/consts":24}],29:[function(e,t,r){"use strict";var i={closeButton:!0,positionClass:"toast-top-center",preventDuplicates:!0,onclick:null,showDuration:500,hideDuration:500,extendedTimeOut:0,showMethod:"fadeIn",hideMethod:"fadeOut"},n={showSuccess:function(e){i.timeOut=2e3,window.toastr.options=i,window.toastr.success(e)},showError:function(e,t){i.timeOut=t||0,window.toastr.options=i,window.toastr.error(e)},showWarning:function(e,t){i.timeOut=t||0,window.toastr.options=i,window.toastr.warning(e)},clear:function(){window.toastr.clear()}};t.exports=n},{}],30:[function(e,t,r){"use strict";var i,n,o=e("config/formbuilder"),s=e("helpers/ui"),a=e("helpers/utils"),p=e("config/consts"),c=e("config/messages"),l=e("ui-handlers/event-handler-callbacks/input-properties-click-callback"),_=e("ui-handlers/event-handler-callbacks/input-properties-focus-callback"),u=e("ui-handlers/event-handler-callbacks/delete-form-click-callback"),d=e("ui-handlers/event-handler-callbacks/export-form-click-callback"),f=e("ui-handlers/event-handler-callbacks/print-as-pdf-click-callback"),m=e("ui-handlers/event-handler-callbacks/input-collection-sortable-mousedown-callback"),h=e("ui-handlers/event-handler-callbacks/input-properties-keyup-callback"),b=e("ui-handlers/event-handler-callbacks/input-properties-title-checkbox-callback"),g=e("ui-handlers/event-handler-callbacks/delete-all-questions-click-callback"),v=e("ui-handlers/event-handler-callbacks/save-project-click-callback"),E=e("actions/validation"),I={createTabButton:function(){var e=s.forms_tabs.getFormTabButtonHTML(i),t=o.dom.forms_tabs.find("li.main__tabs__form-btn");t.eq(t.length-1).after(e)},createChildForm:function(e,t,r,l){var _=this,u=new $.Deferred;return i={},i.name=e,i.slug=a.slugify(e),i.ref=t,i.type=p.FORM_HIERARCHY_TYPE,o.current_form_index=r,o.current_form_ref=i.ref,n=o.project_definition.data.project.forms,_.createTabButton(),l?(i.inputs=[],o.project_definition.data.project.forms[r]=i):s.forms_tabs.showFormValidIcon(o.current_form_index),$.when(s.forms_tabs.getFormTabContentHTML(i)).then(function(e){o.dom.forms_tabs_content.append(e),_.updateFormbuilderDomReferences(i.ref),o.dom.inputs_collection.find(".inputs-collection__header__edit-state").text(c.labels.EDITING_FORM),o.dom.inputs_collection.find(".inputs-collection__header__element-name").text(i.name.trunc(p.INPUTS_COLLECTION_FORM_NAME_MAX_DISPLAY_LENGHT-2*n.length)),s.input_properties_panel.showInputQuestionPreview(""),o.dom.inputs_collection.find(".inputs-collection__buttons .inputs-collection__buttons--remove-form").prop("disabled",!1),l&&(o.dom.forms_tabs.find('li a[href="#'+i.ref+'-tabpanel"]').tab("show"),_.bindFormPanelsEvents()),u.resolve()}),u.promise()},removeForm:function(e,t,r){o.project_definition.data.project.forms.pop(),o.dom.forms_tabs_content.find("#"+t+"-tabpanel").remove(),r.remove(),o.current_form_index--,o.current_form_ref=e,t=e,I.updateFormbuilderDomReferences(t),0!==o.current_form_index&&o.dom.inputs_collection.find(".inputs-collection__buttons .inputs-collection__buttons--remove-form").prop("disabled",!1),o.project_definition.data.project.forms.length<p.MAX_NUMBER_OF_NESTED_CHILD_FORMS&&o.dom.forms_tabs.find(".main__tabs_add-form").parent().show(),s.forms_tabs.resizeFormTabs(),E.areAllInputsValid(o.project_definition)&&(s.navbar.toggleSaveProjectBtn(p.BTN_ENABLED),o.dom.save_project_btn.off().on("click",v))},updateFormbuilderDomReferences:function(e){var t=e;o.dom.input_properties=$("#"+t+"-input-properties.input-properties"),o.dom.input_properties_forms_wrapper=$("#"+t+"-input-properties.input-properties > .panel > .panel-body.input_properties__forms_wrapper"),o.dom.input_properties_buttons=$("#"+t+"-input-properties .input-properties__buttons"),o.dom.input_properties_no_input_selected=$(".input-properties__no-input-selected"),o.dom.inputs_collection=$("#"+t+"-inputs-collection.inputs-collection"),o.dom.inputs_collection_sortable=$("#"+t+"-inputs-collection.inputs-collection .panel .panel-body")},bindFormPanelsEvents:function(){var t=e("ui-handlers/sortable"),r=e("ui-handlers/event-handler-callbacks/import-form-click-callback");t(),o.dom.inputs_collection_sortable.on("mousedown","div.input",m),o.dom.input_properties.off("click").on("click","button.btn, .possible_answer-more-action",l),o.dom.input_properties.on("focus","select",_),o.dom.inputs_collection.find(".inputs-collection__buttons--remove-form").off("click").on("click",u),o.dom.inputs_collection.find(".inputs-collection__export-form").off("click").on("click",function(e){return!$(e.target).parent().hasClass(p.DISABLED_STATE)&&void d()}),o.dom.inputs_collection.on("click",".inputs-collection__delete-all-questions",function(e){g()}),o.dom.inputs_collection.find(".inputs-collection__print-as-pdf").off("click").on("click",function(e){return!$(e.target).parent().hasClass(p.DISABLED_STATE)&&void f()}),o.dom.inputs_collection.find(".inputs-collection__form-import input").off("change").on("change",function(){r(this.files),$(this).val(null)}),o.dom.input_properties.on("keyup",".input-properties__form__question input",h),o.dom.input_properties.on("change",".input-properties__form__title-flag input",b)},unbindFormPanelsEvents:function(){o.dom.input_properties.off(),o.dom.inputs_collection.off(),o.dom.inputs_collection_sortable.data("ui-sortable")&&o.dom.inputs_collection_sortable.sortable("destroy"),o.dom.inputs_collection_sortable.off()}};t.exports=I},{"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/ui":36,"helpers/utils":37,"ui-handlers/event-handler-callbacks/delete-all-questions-click-callback":79,"ui-handlers/event-handler-callbacks/delete-form-click-callback":80,"ui-handlers/event-handler-callbacks/export-form-click-callback":81,"ui-handlers/event-handler-callbacks/import-form-click-callback":83,"ui-handlers/event-handler-callbacks/input-collection-sortable-mousedown-callback":87,"ui-handlers/event-handler-callbacks/input-properties-click-callback":90,"ui-handlers/event-handler-callbacks/input-properties-focus-callback":91,"ui-handlers/event-handler-callbacks/input-properties-keyup-callback":92,"ui-handlers/event-handler-callbacks/input-properties-title-checkbox-callback":93,"ui-handlers/event-handler-callbacks/print-as-pdf-click-callback":96,"ui-handlers/event-handler-callbacks/save-project-click-callback":97,"ui-handlers/sortable":100}],31:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("helpers/ui"),o=e("helpers/utils"),s=e("inputs/audio"),a=e("inputs/barcode"),p=e("inputs/branch"),c=e("inputs/checkbox"),l=e("inputs/date"),_=e("inputs/dropdown"),u=e("inputs/location"),d=e("inputs/integer"),f=e("inputs/photo"),m=e("inputs/phone"),h=e("inputs/radio"),b=e("inputs/text"),g=e("inputs/textarea"),v=e("inputs/readme"),E=e("inputs/time"),I=e("inputs/video"),T=e("inputs/group"),A=e("inputs/search"),w=e("config/formbuilder"),P=(e("actions/possible-answers"),e("actions/jumps"),e("template")),N={type:b,createInput:function(e,t){var r=e,n=t;switch(r){case i.AUDIO_TYPE:this.type=s;break;case i.BARCODE_TYPE:this.type=a;break;case i.BRANCH_TYPE:this.type=p;break;case i.CHECKBOX_TYPE:this.type=c;break;case i.DATE_TYPE:this.type=l;break;case i.DROPDOWN_TYPE:this.type=_;break;case i.GROUP_TYPE:this.type=T;break;case i.LOCATION_TYPE:this.type=u;break;case i.INTEGER_TYPE:this.type=d;break;case i.DECIMAL_TYPE:this.type=d;break;case i.PHONE_TYPE:this.type=m;break;case i.PHOTO_TYPE:this.type=f;break;case i.RADIO_TYPE:this.type=h;break;case i.TEXT_TYPE:this.type=b;break;case i.TEXTAREA_TYPE:this.type=g;break;case i.README_TYPE:this.type=v;break;case i.TIME_TYPE:this.type=E;break;case i.VIDEO_TYPE:this.type=I;break;case i.SEARCH_SINGLE_TYPE:this.type=A;break;case i.SEARCH_MULTIPLE_TYPE:this.type=A}return new this.type(n)},removeInput:function(t){var r=(e("actions/undo"),t),s=o.getInputCurrentIndexByRef(r),a=o.getInputObjectByRef(r);w.project_definition.data.project.forms[w.current_form_index].inputs.splice(s,1),w.dom.input_properties.find('div.panel-body form[data-input-ref="'+r+'"]').fadeOut(i.ANIMATION_FAST).remove(),w.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+r+'"]').fadeOut(i.ANIMATION_FAST).remove(),w.dom.input_properties_no_input_selected.fadeIn(i.ANIMATION_FAST),w.dom.input_properties_buttons.fadeOut(i.ANIMATION_FAST),w.current_input_ref=void 0,a.type!==i.SEARCH_SINGLE_TYPE&&a.type!==i.SEARCH_MULTIPLE_TYPE||o.getSearchInputsTotal()<=i.LIMITS.search_inputs_max-1&&n.input_tools.showSearchInput()},removeBranchInput:function(e,t){var r=e,s=o.getInputCurrentIndexByRef(r),a=t,p=o.getBranchInputCurrentIndexByRef(s,a),c=w.current_form_index,l=w.project_definition.data.project.forms[c].inputs[s].branch,_=l.splice(p,1)[0];w.dom.input_properties.find('div.panel-body form[data-input-ref="'+a+'"]').fadeOut(i.ANIMATION_FAST).remove(),w.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+a+'"]').fadeOut(i.ANIMATION_FAST).remove(),w.dom.input_properties_no_input_selected.fadeIn(i.ANIMATION_FAST),w.dom.input_properties_buttons.fadeOut(i.ANIMATION_FAST),0===l.length&&(w.dom.inputs_collection_sortable.find(".active-branch").find(".input-properties__no-branch-questions-message").show(),n.inputs_collection.showInputInvalidIcon(w.branch.active_branch_ref),n.forms_tabs.showFormInvalidIcon(w.current_form_index)),w.branch.current_input_ref=void 0,_.type!==i.SEARCH_SINGLE_TYPE&&_.type!==i.SEARCH_MULTIPLE_TYPE||o.getSearchInputsTotal()<=i.LIMITS.search_inputs_max-1&&n.input_tools.showSearchInput()},removeGroupInput:function(e,t){var r=e,s=o.getInputCurrentIndexByRef(r),a=t,p=o.getGroupInputCurrentIndexByRef(s,a),c=w.current_form_index,l=w.project_definition.data.project.forms[c].inputs[s].group,_=l.splice(p,1)[0];w.dom.input_properties.find('div.panel-body form[data-input-ref="'+a+'"]').fadeOut(i.ANIMATION_FAST).remove(),w.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+a+'"]').fadeOut(i.ANIMATION_FAST).remove(),w.dom.input_properties_no_input_selected.fadeIn(i.ANIMATION_FAST),w.dom.input_properties_buttons.fadeOut(i.ANIMATION_FAST),0===l.length&&(w.dom.inputs_collection_sortable.find(".active-group").find(".input-properties__no-group-questions-message").show(),n.inputs_collection.showInputInvalidIcon(w.group.active_group_ref),n.forms_tabs.showFormInvalidIcon(w.current_form_index)),w.group.current_input_ref=void 0,_.type!==i.SEARCH_SINGLE_TYPE&&_.type!==i.SEARCH_MULTIPLE_TYPE||o.getSearchInputsTotal()<=i.LIMITS.search_inputs_max-1&&n.input_tools.showSearchInput()},removeNestedGroupInput:function(e,t){var r=t,s=w.current_form_index,a=o.getInputCurrentIndexByRef(w.current_input_ref),p=o.getInputObjectByRef(w.branch.active_branch_ref),c=o.getBranchInputCurrentIndexByRef(a,w.branch.current_input_ref),l=o.getNestedGroupInputCurrentIndexByRef(p,r),_=w.project_definition.data.project.forms[s].inputs[a].branch[c].group,u=_.splice(l,1)[0];w.dom.input_properties.find('div.panel-body form[data-input-ref="'+r+'"]').fadeOut(i.ANIMATION_FAST).remove(),w.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+r+'"]').fadeOut(i.ANIMATION_FAST).remove(),w.dom.input_properties_no_input_selected.fadeIn(i.ANIMATION_FAST),w.dom.input_properties_buttons.fadeOut(i.ANIMATION_FAST),0===_.length&&(w.dom.inputs_collection_sortable.find(".active-group").find(".input-properties__no-group-questions-message").show(),n.inputs_collection.showInputInvalidIcon(w.group.active_group_ref),n.forms_tabs.showFormInvalidIcon(w.current_form_index)),w.group.current_input_ref=void 0,u.type!==i.SEARCH_SINGLE_TYPE&&u.type!==i.SEARCH_MULTIPLE_TYPE||o.getSearchInputsTotal()<=i.LIMITS.search_inputs_max-1&&n.input_tools.showSearchInput()},showGroupInputPropertiesDom:function(e){var t=w.current_form_index,r=w.current_input_ref,n=o.getInputCurrentIndexByRef(r),s=e,a=w.project_definition.data.project.forms[t].inputs[n].group[s],p=w.dom.input_properties_forms_wrapper,c=w.dom.input_properties_views[a.type];p.append(c).hide().fadeIn(i.ANIMATION_FAST)},showNestedGroupInputPropertiesDom:function(e){void 0;var t=w.current_form_index,r=o.getInputCurrentIndexByRef(w.current_input_ref),n=o.getBranchInputCurrentIndexByRef(r,w.group.active_group_ref),s=e,a=w.project_definition.data.project.forms[t].inputs[r].branch[n].group[s],p=w.dom.input_properties_forms_wrapper,c=w.dom.input_properties_views[a.type];p.append(c).hide().fadeIn(i.ANIMATION_FAST)},createInputToolHTML:function(e){return P.createInputToolHTML(e)},createPropertiesHTML:function(e){return P.createPropertiesHTML(e)},getAdvancedTabBtnHTML:function(e,t){return P.getAdvancedTabBtnHTML(e,t)},getJumpTabBtnHTML:function(e,t){return P.getJumpTabBtnHTML(e,t)}};t.exports=N},{"actions/jumps":4,"actions/possible-answers":13,"actions/undo":22,"config/consts":24,"config/formbuilder":26,"helpers/ui":36,"helpers/utils":37,"inputs/audio":38,"inputs/barcode":39,"inputs/branch":40,"inputs/checkbox":41,"inputs/date":42,"inputs/dropdown":43,"inputs/group":44,"inputs/integer":45,"inputs/location":46,"inputs/phone":47,"inputs/photo":48,"inputs/radio":49,"inputs/readme":50,"inputs/search":51,"inputs/text":52,"inputs/textarea":53,"inputs/time":54,"inputs/video":55,template:62}],32:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("actions/errors"),o=e("actions/jumps"),s=e("actions/save"),a=e("actions/possible-answers"),p=e("actions/validation"),c=e("config/formbuilder"),l=(e("helpers/ui"),e("helpers/utils"),e("template")),_=function(){};_.prototype.prepareAdvancedInputProperties=function(e){return l.prepareAdvancedInputProperties(e,this)},_.prototype.setAdvancedInputProperties=function(){this.dom.advanced_properties_wrapper=c.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+this.ref+'"]').find(".input-properties__form__advanced-properties"),this.dom.advanced_properties_wrapper.find('div.panel-body div.input-properties__form__advanced-properties__default select option[value="'+this["default"]+'"]').prop("selected",!0)},_.prototype.saveAdvancedProperties=function(){var e=this;e.dom.advanced_properties_wrapper=c.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e.ref+'"]').find(".input-properties__form__advanced-properties"),this["default"]=this.dom.advanced_properties_wrapper.find("div.panel-body div.input-properties__form__advanced-properties__default select option:selected").val(),"None"===this["default"]&&(this["default"]=null),e.type!==i.SEARCH_SINGLE_TYPE&&e.type!==i.SEARCH_MULTIPLE_TYPE||(e.type=this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__search input:checked").val())},_.prototype.hidePropertiesErrors=function(){n.hidePropertiesErrors(this.dom.properties_panel),n.hidePossibleAnswersErrors(this)},_.prototype.addPossibleAnswer=function(){a.addPossibleAnswer(this)},_.prototype.removePossibleAnswer=function(e){a.removePossibleAnswer(this,e)},_.prototype.savePossibleAnswers=function(){s.savePossibleAnswers(this)},_.prototype.showPossibleAnswerErrors=function(e,t){n.showPossibleAnswerErrors(e,t)},_.prototype.hidePossibleAnswersErrors=function(e){n.hidePossibleAnswersErrors(this,e)},_.prototype.isPossibleAnswerValid=function(e){return p.isPossibleAnswerValid(e)},_.prototype.updateJumpPossibleAnswers=function(e){a.updateJumpPossibleAnswers(this,e)},_.prototype.updatePossibleInitialAnswers=function(){a.updatePossibleInitialAnswers(this)},_.prototype.listPossibleInitialAnswers=function(){a.listPossibleInitialAnswers(this)},_.prototype.addJump=function(){var e=this;e.dom.add_jump_button=c.dom.input_properties.find('.panel-body form[data-input-ref="'+e.ref+'"]').find(".input-properties__form__jumps__add-jump"),$.when(o.addJump(e,!0)).then(function(){e.jumps.length===e.possible_answers.length&&e.dom.add_jump_button.attr("disabled",!0)})},_.prototype.removeJump=function(e){var t=this;t.dom.add_jump_button=c.dom.input_properties.find('.panel-body form[data-input-ref="'+t.ref+'"]').find(".input-properties__form__jumps__add-jump"),o.removeJump(t,e),0===t.jumps.length?t.dom.add_jump_button.attr("disabled",!1):t.jumps.length<t.possible_answers.length&&t.dom.add_jump_button.attr("disabled",!1)},t.exports=_},{"actions/errors":2,"actions/jumps":4,"actions/possible-answers":13,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"helpers/ui":36,"helpers/utils":37,template:62}],33:[function(e,t,r){"use strict";var i={ref:null,type:"",question:"",is_title:!1,is_required:!1,uniqueness:"none",regex:null,"default":null,verify:!1,max:null,min:null,datetime_format:null,set_to_current_datetime:!1,possible_answers:[],jumps:[],branch:[],group:[]};t.exports=i},{}],34:[function(e,t,r){"use strict";var i=(e("config/consts"),e("actions/errors")),n=e("actions/jumps"),o=e("actions/save"),s=e("actions/validation"),a=e("config/formbuilder"),p=(e("helpers/ui"),e("helpers/utils"),e("template"),function(){});p.prototype.prepareAdvancedInputProperties=function(){},p.prototype.isQuestionTextValid=function(){return s.isQuestionTextValid(this)},p.prototype.hideQuestionErrors=function(){this.hidePropertiesErrors()},p.prototype.showQuestionErrors=function(e){this.showPropertiesErrors(e)},p.prototype.isInitialAnswerValid=function(){return s.isInitialAnswerValid(this.type,this["default"],this.regex)},p.prototype.isJumpValid=function(e){return s.isJumpValid(e,this)},p.prototype.saveProperties=function(){o.saveProperties(this)},p.prototype.saveAdvancedProperties=function(){o.saveAdvancedProperties(this)},p.prototype.saveJumps=function(){o.saveJumps(this)},p.prototype.showPropertiesErrors=function(e){
i.showQuestionTextErrors(this.dom.properties_panel,e)},p.prototype.hidePropertiesErrors=function(){i.hidePropertiesErrors(this.dom.properties_panel)},p.prototype.showAdvancedPropertiesErrors=function(e,t){i.showSingleAdvancedPropertyError(this.dom.advanced_properties_wrapper,e,t)},p.prototype.hideAdvancedPropertiesErrors=function(){},p.prototype.addJump=function(){var e=this;e.dom.add_jump_button=a.dom.input_properties.find('.panel-body form[data-input-ref="'+e.ref+'"]').find(".input-properties__form__jumps__add-jump"),$.when(n.addJump(this)).then(function(){e.dom.add_jump_button.attr("disabled",!0)})},p.prototype.removeJump=function(e){var t=this;t.dom.add_jump_button=a.dom.input_properties.find('.panel-body form[data-input-ref="'+t.ref+'"]').find(".input-properties__form__jumps__add-jump"),n.removeJump(this,e),0===this.jumps.length&&this.dom.add_jump_button.attr("disabled",!1)},p.prototype.showSingleJumpErrors=function(e,t){i.showSingleJumpErrors(e,t)},p.prototype.hideJumpsErrors=function(e){i.hideJumpsErrors(e)},t.exports=p},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"helpers/ui":36,"helpers/utils":37,template:62}],35:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("helpers/utils"),o=[i.DATE_FORMAT_1,i.DATE_FORMAT_2,i.DATE_FORMAT_3,i.DATE_FORMAT_4,i.DATE_FORMAT_5],s=[i.TIME_FORMAT_1,i.TIME_FORMAT_2,i.TIME_FORMAT_3,i.TIME_FORMAT_4,i.TIME_FORMAT_5],a={hasValidFormStructure:function(e){var t={data:{id:"",type:"form",form:{ref:"",name:"",slug:"",type:"hierarchy",inputs:[]}}};return!!n.hasSameProps(t,e)&&("form"===e.data.type&&"hierarchy"===e.data.form.type)},areJumpsValid:function(e){var t=e.jumps,r=!0,o=e.possible_answers,s={to:"",when:"",answer_ref:""},a=new RegExp(i.REGEX.possible_answer_ref);return $.isArray(t)?$(t).each(function(t,p){var c=!1;if(!n.hasSameProps(s,p))return r=!1,!1;if(p.answer_ref&&!a.test(p.answer_ref))return r=!1,!1;if($.inArray(e.type,i.MULTIPLE_ANSWER_TYPES)>-1){if("ALL"!==p.when&&"NO_ANSWER_GIVEN"!==p.when&&($(o).each(function(e,t){p.answer_ref===t.answer_ref&&(c=!0)}),!c))return r=!1,!1}else if("ALL"!==p.when)return r=!1,!1;if(!p.to||!p.when||!p.answer_ref&&"ALL"!==p.when&&"NO_ANSWER_GIVEN"!==p.when)return r=!1,!1;var l=!1;return $(i.JUMP_CONDITIONS).each(function(e,t){if(t.key===p.when)return l=!0,!1}),l?void 0:(r=!1,!1)}):r=!1,r},areJumpsDestinationsValid:function(e){var t=!0;return $(e).each(function(r,i){var o=n.getJumpAvailableDestinationsAsKeys(r,i,e,!1);$(i.jumps).each(function(e,r){o[r.to]||(t=!1)}),$(i.branch).each(function(e,r){o=n.getJumpAvailableDestinationsAsKeys(e,r,i.branch,!0),$(r.jumps).each(function(e,r){o[r.to]||(t=!1)})})}),t},arePossibleAnswersValid:function(e,t){var r=new RegExp(i.REGEX.possible_answer_ref),o=[],s={answer:"",answer_ref:""};if(!$.isArray(e))return!1;if(e.length>i.LIMITS.possible_answers_max){if(t!==i.SEARCH_MULTIPLE_TYPE&&t!==i.SEARCH_SINGLE_TYPE)return!1;if(e.length>i.LIMITS.possible_answers_max_search)return!1}if(0===e.length)return!1;var a=!0;return $(e).each(function(t,p){if(o.push(p.answer_ref),"string"!=typeof p.answer_ref||"string"!=typeof p.answer)return a=!1,!1;if(p.answer_ref.length!==i.LIMITS.possible_answer_ref_length)return a=!1,!1;if(!r.test(p.answer_ref))return a=!1,!1;if(0===p.answer.length||p.answer.length>i.LIMITS.possible_answer_max_length)return a=!1,!1;if(""===p.answer)return a=!1,!1;if(p.answer=p.answer.replace(/(<([^>]+)>)/gi," "),!n.hasSameProps(s,p))return a=!1,!1;var c={},l=e.some(function(e){return c.hasOwnProperty(e.answer_ref)||c[e.answer_ref]===!1});return l?(a=!1,!1):void 0}),!!a},isValidInput:function(e,t,r,a){var p=this,c=!0,l=new RegExp(i.REGEX.input_ref),_="",u={ref:"",type:"",question:"",is_title:!0,is_required:!1,uniqueness:"",regex:null,"default":null,verify:!1,max:null,min:null,datetime_format:null,set_to_current_datetime:!1,possible_answers:[],jumps:[],branch:[],group:[]},d=[i.TEXT_TYPE,i.TEXTAREA_TYPE,i.INTEGER_TYPE,i.DECIMAL_TYPE,i.DATE_TYPE,i.TIME_TYPE,i.RADIO_TYPE,i.CHECKBOX_TYPE,i.DROPDOWN_TYPE,i.BARCODE_TYPE,i.LOCATION_TYPE,i.AUDIO_TYPE,i.VIDEO_TYPE,i.PHOTO_TYPE,i.BRANCH_TYPE,i.GROUP_TYPE,i.README_TYPE,i.PHONE_TYPE,i.SEARCH_SINGLE_TYPE,i.SEARCH_MULTIPLE_TYPE];if(!n.hasSameProps(u,t))return!1;if(!t.ref||"boolean"==typeof t.ref)return!1;if(!t.ref.startsWith(e))return!1;if(!l.test(t.ref))return!1;if(3!==t.ref.split("_").length)return!1;if($.inArray(t.type,d)<0||"string"!=typeof t.type)return!1;if(t.type===i.README_TYPE){if("string"!=typeof t.question||""===t.question)return!1;if(_=n.decodeHtml(t.question),_=_.replace(/(<([^>]+)>)/gi," "),_.length>i.LIMITS.readme_length)return!1}else{if(t.question.length>i.LIMITS.question_length||"string"!=typeof t.question||""===t.question)return!1;t.question=t.question.replace(/(<([^>]+)>)/gi," ")}if("boolean"!=typeof t.is_title)return!1;if("boolean"!=typeof t.is_required)return!1;if($.inArray(t.type,i.REQUIRED_ALLOWED_TYPES)<0&&t.is_required===!0)return!1;if($.inArray(t.type,i.UNIQUENESS_ALLOWED_TYPES)<0){if(t.uniqueness!==i.UNIQUESS_NONE)return!1}else if(r){if(t.uniqueness!==i.UNIQUESS_NONE&&t.uniqueness!=i.UNIQUESS_FORM)return!1}else if(t.uniqueness!==i.UNIQUESS_NONE&&t.uniqueness!==i.UNIQUESS_FORM&&t.uniqueness!=i.UNIQUESS_HIERARCHY)return!1;if(null!==t.regex&&""!==t.regex&&(t.regex.length>i.LIMITS.regex_length||"string"!=typeof t.regex))return!1;if(null!==t["default"]&&""!==t["default"]){if(t["default"].length>i.LIMITS.default_answer_length||"string"!=typeof t["default"])return!1;if($.inArray(t.type,i.MULTIPLE_ANSWER_TYPES)>-1){var f=!1;if($(t.possible_answers).each(function(e,r){if(r.answer_ref===t["default"])return f=!0,!1}),!f)return!1}else t["default"]=t["default"].replace(/(<([^>]+)>)/gi," ")}if("boolean"!=typeof t.verify)return!1;if(t.type===i.INTEGER_TYPE||t.type===i.DECIMAL_TYPE){if(t.min){if(t.type===i.INTEGER_TYPE&&!n.isInteger(parseInt(t.min)))return!1;if(t.type===i.DECIMAL_TYPE&&!$.isNumeric(t.min))return!1;if(t.min.toString().length>i.LIMITS.min_value_length)return!1}if(t.max){if(t.type===i.INTEGER_TYPE&&!n.isInteger(parseInt(t.max)))return!1;if(t.type===i.DECIMAL_TYPE&&!$.isNumeric(t.max))return!1;if(t.max.toString().length>i.LIMITS.max_value_length)return!1}if(t.min&&t.max){if(t.type===i.INTEGER_TYPE&&parseInt(t.min,10)>=parseInt(t.max,10))return!1;if(t.type===i.DECIMAL_TYPE&&parseFloat(t.min,10)>=parseFloat(t.max,10))return!1}}if(t.type===i.DATE_TYPE&&t.datetime_format&&$.inArray(t.datetime_format,o)<0)return!1;if(t.type===i.TIME_TYPE&&t.datetime_format&&$.inArray(t.datetime_format,s)<0)return!1;if(t.set_to_current_datetime){if("boolean"!=typeof t.set_to_current_datetime)return!1;if(t.set_to_current_datetime===!0&&t.type!==i.DATE_TYPE&&t.type!==i.TIME_TYPE)return!1}if($.inArray(t.type,i.MULTIPLE_ANSWER_TYPES)>-1&&!p.arePossibleAnswersValid(t.possible_answers,t.type))return!1;if(r||a){if(r){if(t.branch.length>0)return!1;if(!p.areJumpsValid(t.branch))return!1}if(a){if(t.group.length>0)return!1;if(t.jumps.length>0)return!1}}else{if(!p.areJumpsValid(t))return!1;if(!$.isArray(t.branch))return!1;if($(t.branch).each(function(t,r){p.isValidInput(e,r,!0,!1)}),!$.isArray(t.group))return!1;$(t.group).each(function(t,r){p.isValidInput(e,r,!1,!0)})}return c}};t.exports=a},{"config/consts":24,"helpers/utils":37}],36:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/messages"),o=e("config/consts"),s=(e("actions/jumps"),e("helpers/utils")),a=e("loaders/load-child-form-containers"),p={navbar:{toggleUndoBtn:function(e){e===o.BTN_DISABLED&&i.dom.undo_btn.attr("disabled",!0),e===o.BTN_ENABLED&&i.dom.undo_btn.attr("disabled",!1)},toggleSaveProjectBtn:function(e){e===o.BTN_DISABLED&&i.dom.save_project_btn.attr("disabled",!0),e===o.BTN_ENABLED&&i.dom.save_project_btn.attr("disabled",!1),e===o.BTN_ENABLED?i.dom.save_project_btn.find(".project-state").removeClass("fa-warning").addClass("fa-check"):i.dom.save_project_btn.find(".project-state").addClass("fa-warning").removeClass("fa-check")}},forms_tabs:{injectRefIntoFormTab:function(e){var t=$(".main .main__tabs li").first(),r=$(".main .main__tabs-content .main__tabs-content-tabpanel").first();t.find("a").attr("href","#"+e+"-tabpanel"),r.first().attr("id",e+"-tabpanel"),r.find(".inputs-collection").attr("id",e+"-inputs-collection"),r.find(".input-properties").attr("id",e+"-input-properties")},toggleFormTabsButtons:function(e){e.enable?i.dom.forms_tabs.find("li").not(".main__tabs-btns").each(function(e,t){$(t).removeClass("disabled disabled-tab")}):i.dom.forms_tabs.find("li").not(".main__tabs-btns").each(function(e,t){$(t).addClass("disabled disabled-tab")})},setFirstFormTabName:function(e){var t=i.project_definition.data.project.forms;i.dom.forms_tabs.find('.active a[data-form-index="0"]').text(e.trunc(o.TAB_FORM_NAME_MAX_DISPLAY_LENGHT-2*t.length)).append('&nbsp;<i class="form-state fa fa-exclamation-triangle"></i>')},showFormValidIcon:function(e){i.dom.forms_tabs.find("li a[data-form-index="+e+"] i.form-state").removeClass("fa-exclamation-triangle").addClass("fa-check")},showFormInvalidIcon:function(e){i.dom.forms_tabs.find("li a[data-form-index="+e+"] i.form-state").removeClass("fa-check").addClass("fa-exclamation-triangle")},getFormTabButtonHTML:function(e){var t="",r=i.current_form_index,n=i.project_definition.data.project.forms;return t+='<li role="presentation" class="main__tabs__form-btn">',t+='<a href="#'+e.ref+'-tabpanel" role="tab" data-toggle="tab" data-form-index="'+r+'">',t+=e.name.trunc(o.TAB_FORM_NAME_MAX_DISPLAY_LENGHT-2*n.length),t+='&nbsp;<i class="form-state fa fa-exclamation-triangle"></i>',t+="</a>",t+="</li>"},getFormTabContentHTML:function(e){var t="",r=new $.Deferred;return $.when(a()).then(function(i){t+='<div role="tabpanel" class="main__tabs-content-tabpanel tab-pane fade in active" id="'+e.ref+'-tabpanel">',t+='<div id="'+e.ref+'-inputs-collection" class="inputs-collection col-md-6">',t+=i.inputs_collection,t+="</div>",t+='<div id="'+e.ref+'-input-properties" class="input-properties col-md-6">',t+=i.inputs_properties,t+="</div>",t+="</div>",r.resolve(t)}),r.promise()},resizeFormTabs:function(){var e=i.project_definition.data.project.forms;i.dom.forms_tabs.find("li:lt("+e.length+")").each(function(t,r){var i=$(r).find("a i").hasClass("fa-check"),n=$(r).find("a"),s='&nbsp;<i class="form-state fa fa-check"></i>',a='&nbsp;<i class="form-state fa fa-exclamation-triangle"></i>';n.text(e[t].name.trunc(o.TAB_FORM_NAME_MAX_DISPLAY_LENGHT-2*e.length)),n.append(i?s:a)})}},inputs_collection:{toggleTitleWarning:function(e,t){var r=t?".active-branch .no-branch-title-set":".no-form-title-set";0===e?i.dom.inputs_collection_sortable.find(r).removeClass("hidden").animate({opacity:1,height:37},o.ANIMATION_FAST):i.dom.inputs_collection_sortable.find(r).animate({opacity:0,height:0},o.ANIMATION_FAST,function(){$(this).addClass("hidden")})},getInputStateIconsHTML:function(){var e="";return e+='<i class="question-state fa fa-exclamation-triangle fa-2x fa-fw pull-right"></i>',e+='<i class="jump-state fa fa-arrow-circle-o-down fa-2x fa-fw pull-right invisible"></i>'},showInputValidIcon:function(e){i.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+e+'"] i.question-state').first().removeClass("fa-exclamation-triangle").addClass("fa-check")},showInputInvalidIcon:function(e){i.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+e+'"] i.question-state').first().removeClass("fa-check").addClass("fa-exclamation-triangle")},showInputQuestionPreview:function(e,t){i.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+e+'"] > .input-inner > .question-preview').text(t.trunc(50))},toggleFormActionButtons:function(e){var t=i.dom.inputs_collection.find(".inputs-collection__buttons").find(".btn");e?t.attr("disabled",!1).show():t.attr("disabled",!0).hide()},getEmptyCollectionSortableHTML:function(e){var t="";return t+='<div class="'+e+'-sortable hidden">',e===o.BRANCH_TYPE&&(t+='<div class="warning-well no-branch-title-set hidden">No title set for this branch yet ',t+='<i class="fa fa-question-circle fa-2x fa-fw" data-toggle="modal" data-target="#info-title">',t+="</i>",t+="</div>"),t+='<span class="input-properties__no-'+e+'-questions-message" style="display: none;">',t+=e===o.BRANCH_TYPE?n.labels.ADD_BRANCH_INPUTS_HERE:n.labels.ADD_GROUP_INPUTS_HERE,t+="</span>",t+="{{"+e+"-inputs}}",t+="</div>"}},input_tools:{enable:function(){$("ul#inputs-tools-list li div.input").draggable("enable").removeClass("dragging-disabled")},disable:function(){$("ul#inputs-tools-list li div.input").draggable("disable").addClass("dragging-disabled")},hideSearchInput:function(){i.dom.inputs_tools_draggable.filter(".input-search").hide()},showSearchInput:function(){i.dom.inputs_tools_draggable.filter(".input-search").show()}},input_properties_panel:{toggleAddAnswerBtn:function(e){var t=s.getActiveInput(),r=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+t.ref+'"]');r.find(".input-properties__form__possible-answers__add-answer").attr("disabled",e)},setUniquenessProperty:function(e,t){var r=e,i=t;if(0===r)i.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__uniqueness input").prop("checked",i.uniquess!==o.UNIQUESS_NONE);else switch(i.uniqueness){case o.UNIQUESS_FORM:i.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__uniqueness input.uniqueness-form").prop("checked",!0);break;case o.UNIQUESS_HIERARCHY:i.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__uniqueness input.uniqueness-hierarchy").prop("checked",!0)}},showInputQuestionPreview:function(e){i.dom.input_properties.find(".panel .panel-heading .input-properties__header .question-preview").text(e)},toggleJumpTab:function(e,t){var r=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e+'"]').find(".input-properties__tabs").find(".nav-tabs").children().eq(2);t?r.removeClass("disabled disabled-tab"):r.addClass("disabled disabled-tab")},showJumpTabError:function(e){e.parents().eq(5).find(".nav-tabs").find("i.jumps-error").removeClass("invisible").hide().fadeIn(300),e.parents().eq(5).find(".nav-tabs").find("i.jumps-error").parent().addClass("validation-error")},hideJumpTabError:function(e){e.parents().eq(5).find(".nav-tabs").find("i.jumps-error").addClass("invisible"),e.parents().eq(5).find(".nav-tabs").find("i.jumps-error").parent().removeClass("validation-error")},toggleTitleCheckbox:function(e,t){var r=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+t+'"]').find(".input-properties__form__title-flag");switch(e){case o.DISABLED_STATE:r.find("label").addClass("disabled-checkbox"),r.find("input").attr("disabled",!0).addClass("disabled-checkbox"),r.find("span.title-label").text(o.MAX_TITLE_LIMIT_REACHED);break;case o.ENABLED_STATE:r.find("label").removeClass("disabled-checkbox"),r.find("input").attr("disabled",!1).removeClass("disabled-checkbox"),r.find("span.title-label").text(o.USE_ANSWER_AS_TITLE)}},toggleCopyInputButton:function(e,t){var r=i.dom.input_properties.find(".input-properties__buttons--copy-input");switch(t){case o.BTN_DISABLED:r.attr("disabled",!0);break;case o.BTN_ENABLED:r.attr("disabled",!1)}}},group:{toggleEditGroupButton:function(e,t){i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e+'"]').find(".input-properties__form__basic-properties").find(".input-properties__form__edit-group").attr("disabled",!t)},hideGroupInputsErrors:function(e){e.find(".input-properties__form__error--group-error").addClass("hidden").text("&nbsp;")}},branch:{toggleEditBranchButton:function(e,t){i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e+'"]').find(".input-properties__form__basic-properties").find(".input-properties__form__edit-branch").attr("disabled",!t)},hideBranchInputsErrors:function(e){e.find(".input-properties__form__error--branch-error").addClass("hidden").text("&nbsp;")},showBranchInputPropertiesDom:function(e){var t=i.current_form_index,r=i.current_input_ref,n=s.getInputCurrentIndexByRef(r),a=e,p=i.project_definition.data.project.forms[t].inputs[n].branch[a],c=i.dom.input_properties_forms_wrapper,l=i.dom.input_properties_views[p.type];c.append(l).hide().fadeIn(o.ANIMATION_FAST)}}};t.exports=p},{"actions/jumps":4,"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/utils":37,"loaders/load-child-form-containers":56}],37:[function(require,module,exports){"use strict";var consts=require("config/consts"),formbuilder=require("config/formbuilder"),utils={JSONPolyfill:{parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)},r={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},i=function(e){return r[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)},n=/[\\"\u0000-\u001F\u2028\u2029]/g;return function o(r){if(null==r)return"null";if("number"==typeof r)return isFinite(r)?r.toString():"null";if("boolean"==typeof r)return r.toString();if("object"==typeof r){if("function"==typeof r.toJSON)return o(r.toJSON());if(t(r)){for(var s="[",a=0;a<r.length;a++)s+=(a?", ":"")+o(r[a]);return s+"]"}if("[object Object]"===e.call(r)){var p=[];for(var c in r)r.hasOwnProperty(c)&&p.push(o(c)+": "+o(r[c]));return"{"+p.join(", ")+"}"}}return'"'+r.toString().replace(n,i)+'"'}}()},isSafari:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification),getContainersPath:function(){return consts.VIEWS_PATH+"containers/"},getPropertiesPath:function(){return consts.VIEWS_PATH+"properties/"},getPartialsPath:function(){return consts.VIEWS_PATH+"partials/"},goBack:function(){var e=window.location.href,t=window.location.protocol,r=e.replace(t+"//","").split("/"),i=r.pop(),n=r.join("/");return i.indexOf("formbuilder")!==-1&&void window.location.replace(t+"//"+n)},setProjectURL:function(){function e(){n=p[p.length-2],p.splice(p.length-3,3),r=a+"//"+p.join("/")+"/",i=consts.API_PRODUCTION_PATH,consts.PROJECT_URL=r+i+n,p.shift(),p.length>0?(o=p.join("/"),consts.VIEWS_PATH="/"+o+"/"+consts.VIEWS_PATH):consts.VIEWS_PATH="/"+consts.VIEWS_PATH}function t(){consts.PROJECT_URL=consts.API_DEVELOPMENT_GET_PATH+consts.API_DEVELOPMENT_PROJECT}var r,i,n,o,s=window.location.href,a=window.location.protocol,p=s.replace(a+"//","").split("/");void 0,p[0].indexOf("localhost")!==-1||p[0].indexOf("ngrok")?p.indexOf("epicollect5-formbuilder")!==-1?t():e():(e(),void 0)},setProjectLogoUrl:function(){void 0;var e,t,r,i=window.location.href,n=window.location.protocol,o=i.replace(n+"//","").split("/");r=o[o.length-2],o.splice(o.length-3,3),e=window.location.protocol+"//"+o.join("/")+"/",t=consts.API_MEDIA_PATH,consts.PROJECT_LOGO_URL=e+t+r+consts.API_PROJECT_LOGO_QUERY_STRING,void 0},generateFormRef:function(){return formbuilder.project_definition.data.project.ref+"_"+this.generateUniqID()},generateInputRef:function(e){return e+"_"+this.generateUniqID()},generateInputCopyRef:function(){var e;return formbuilder.is_editing_branch||formbuilder.is_editing_group||(e=utils.generateInputRef(formbuilder.current_form_ref)),formbuilder.is_editing_branch&&formbuilder.is_editing_group?e=utils.generateBranchGroupInputRef(formbuilder.branch.current_input_ref):(formbuilder.is_editing_branch&&(e=utils.generateBranchGroupInputRef(formbuilder.branch.active_branch_ref)),formbuilder.is_editing_group&&(e=utils.generateBranchGroupInputRef(formbuilder.group.active_group_ref))),e},generateBranchGroupInputRef:function(e){return e+"_"+this.generateUniqID()},generateUniqID:function(e,t){"undefined"==typeof e&&(e="");var r,i=function(e,t){return e=parseInt(e,10).toString(16),t<e.length?e.slice(e.length-t):t>e.length?Array(1+(t-e.length)).join("0")+e:e};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,r=e,r+=i(parseInt((new Date).getTime()/1e3,10),8),r+=i(this.php_js.uniqidSeed,5),t&&(r+=(10*Math.random()).toFixed(8).toString()),r},hasDuplicates:function(e){for(var t=[],r=0;r<e.length;++r){var i=e[r];if(t.indexOf(i)!==-1)return!0;t.push(i)}return!1},getInputCurrentIndexByRef:function(e){var t,r=formbuilder.project_definition.data.project.forms[formbuilder.current_form_index].inputs,i=r.length;for(t=0;t<i;t++)if(r[t].ref===e)return t},getBranchInputCurrentIndexByRef:function(e,t){var r=formbuilder.project_definition.data.project.forms[formbuilder.current_form_index].inputs[e].branch,i=-1;return $(r).each(function(e,r){if(r.ref===t)return i=e,!1}),i},getGroupInputCurrentIndexByRef:function(e,t){var r=formbuilder.project_definition.data.project.forms[formbuilder.current_form_index].inputs[e].group,i=-1;return $(r).each(function(e,r){if(r.ref===t)return i=e,!1}),i},getInputObjectByRef:function(e){var t,r=formbuilder.project_definition.data.project.forms[formbuilder.current_form_index].inputs,i=r.length;if(void 0===e)return!1;for(t=0;t<i;t++)if(r[t].ref===e)return r[t]},getBranchInputObjectByRef:function(e){var t,r=formbuilder.project_definition.data.project.forms[formbuilder.current_form_index].inputs,i=utils.getInputCurrentIndexByRef(formbuilder.current_input_ref),n=r[i].branch;return void 0!==e&&$(n).each(function(r,i){if(i.ref===e)return t=i,!1}),t},getNestedGroupInputObjectByRef:function(e,t){var r,i=t,n=e,o=formbuilder.group.active_group_ref;return $(n.branch).each(function(e,t){if(t.ref===o&&($(t.group).each(function(e,t){if(t.ref===i)return r=t,!1}),r))return!1}),r},getNestedGroupInputCurrentIndexByRef:function(e,t){var r,i=t,n=e,o=formbuilder.group.active_group_ref;return $(n.branch).each(function(e,t){if(t.ref===o&&($(t.group).each(function(e,t){if(t.ref===i)return r=e,!1}),r))return!1}),r},getGroupInputObjectByRef:function(e){var t,r=formbuilder.project_definition.data.project.forms[formbuilder.current_form_index].inputs,i=utils.getInputCurrentIndexByRef(formbuilder.current_input_ref),n=r[i].group;return void 0!==e&&$(n).each(function(r,i){if(i.ref===e)return t=i,!1}),t},getNestedGroupObjectByRef:function(e,t){var r;return $(e.branch).each(function(e,i){if(i.ref===t)return r=i,!1}),r},getBranchOwnerInputRef:function(e){var t=e.split("_");return t.pop(),t.join("_")},getGroupOwnerInputRef:function(e){var t=e.split("_");return t.pop(),t.join("_")},getInputToolIcon:function(e){var t;switch(e){case consts.AUDIO_TYPE:t=consts.AUDIO_TYPE_ICON;break;case consts.BARCODE_TYPE:t=consts.BARCODE_TYPE_ICON;break;case consts.BRANCH_TYPE:t=consts.BRANCH_TYPE_ICON;break;case consts.CHECKBOX_TYPE:t=consts.CHECKBOX_TYPE_ICON;break;case consts.DATE_TYPE:t=consts.DATE_TYPE_ICON;break;case consts.DROPDOWN_TYPE:t=consts.DROPDOWN_TYPE_ICON;break;case consts.GROUP_TYPE:t=consts.GROUP_TYPE_ICON;break;case consts.LOCATION_TYPE:t=consts.LOCATION_TYPE_ICON;break;case consts.INTEGER_TYPE:t=consts.NUMERIC_TYPE_ICON;break;case consts.DECIMAL_TYPE:t=consts.NUMERIC_TYPE_ICON;break;case consts.PHONE_TYPE:t=consts.PHONE_TYPE_ICON;break;case consts.PHOTO_TYPE:t=consts.PHOTO_TYPE_ICON;break;case consts.RADIO_TYPE:t=consts.RADIO_TYPE_ICON;break;case consts.README_TYPE:t=consts.README_TYPE_ICON;break;case consts.TEXT_TYPE:t=consts.TEXT_TYPE_ICON;break;case consts.TEXTAREA_TYPE:t=consts.TEXTAREA_TYPE_ICON;break;case consts.TIME_TYPE:t=consts.TIME_TYPE_ICON;break;case consts.VIDEO_TYPE:t=consts.VIDEO_TYPE_ICON;break;case consts.SEARCH_SINGLE_TYPE:t=consts.SEARCH_SINGLE_TYPE_ICON;break;case consts.SEARCH_MULTIPLE_TYPE:t=consts.SEARCH_MULTIPLE_TYPE_ICON}return t},slugify:function(e){var t=$.trim(e),r=t.replace(/[^a-z0-9-]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");return r.toLowerCase()},getInputsTotal:function(e){var t=0;return t+=e.length,$(e).each(function(e,r){r.type===consts.GROUP_TYPE&&(t+=r.group.length),r.type===consts.BRANCH_TYPE&&(t+=r.branch.length)}),t},getSearchInputsTotal:function(){var e=0,t=formbuilder.project_definition.data.project.forms;return $(t).each(function(t,r){$(r.inputs).each(function(t,r){r.type!==consts.SEARCH_MULTIPLE_TYPE&&r.type!==consts.SEARCH_SINGLE_TYPE||e++,r.type===consts.GROUP_TYPE&&$(r.group).each(function(t,r){r.type!==consts.SEARCH_MULTIPLE_TYPE&&r.type!==consts.SEARCH_SINGLE_TYPE||e++}),r.type===consts.BRANCH_TYPE&&$(r.branch).each(function(t,r){r.type!==consts.SEARCH_MULTIPLE_TYPE&&r.type!==consts.SEARCH_SINGLE_TYPE||e++,r.type===consts.GROUP_TYPE&&$(r.group).each(function(t,r){r.type!==consts.SEARCH_MULTIPLE_TYPE&&r.type!==consts.SEARCH_SINGLE_TYPE||e++})})})}),e},getJumpAvailableDestinations:function(e,t){var r,i,n,o=[];return formbuilder.is_editing_branch?(i=utils.getInputCurrentIndexByRef(formbuilder.branch.active_branch_ref),r=utils.getBranchInputCurrentIndexByRef(i,e.ref)):r=utils.getInputCurrentIndexByRef(e.ref),n=t.slice(r+2),$(n).each(function(e,t){o.push({ref:t.ref,question:t.question,type:t.type})}),o.push({ref:consts.JUMP_TO_END_OF_FORM_REF,question:consts.JUMP_TO_END_OF_FORM_LABEL,type:null}),o},getJumpAvailableDestinationsAsKeys:function(e,t,r){var i,n={};return i=r.slice(e+2),$(i).each(function(e,t){n[t.ref]=1}),n[consts.JUMP_TO_END_OF_FORM_REF]=1,n},isMaxTitleLimitReached:function(e){return this.getTitleCount(e)>=consts.LIMITS.titles_max},isMaxTitleLimitExceeded:function(e){return this.getTitleCount(e)>consts.LIMITS.titles_max},getTitleCount:function(e){var t=0;return $(e).each(function(e,r){r.is_title&&t++,r.type===consts.GROUP_TYPE&&$(r.group).each(function(e,r){r.is_title&&t++})}),t},encodeHtml:function(e){return e.replace(/[&<>"']/g,function(e){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[e]+";"})},decodeHtml:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},getPossibleAnswerLabel:function(e){var t="";return $(e.possible_answers).each(function(r,i){i.answer_ref===e["default"]&&(t=i.answer)}),t},hasSameProps:function(e,t,r){var i=this;return("object"!=typeof e||!Array.isArray(t))&&(!!Object.keys(t).every(function(t){return e.hasOwnProperty(t)})&&Object.keys(e).every(function(n){return"object"==typeof e[n]&&"object"==typeof t[n]&&null!==e[n]&&null!==t[n]?Array.isArray(e[n])?Array.isArray(t[n]):i.hasSameProps(e[n],t[n]):void 0!==t[n]&&(!r||typeof e[n]==typeof t[n])}))},isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},getActiveInput:function(){var e,t,r=this,i=formbuilder.current_input_ref;return formbuilder.is_editing_branch&&formbuilder.is_editing_group&&(t=r.getInputObjectByRef(formbuilder.branch.active_branch_ref),e=r.getNestedGroupInputObjectByRef(t,formbuilder.group.current_input_ref)),formbuilder.is_editing_branch&&!formbuilder.is_editing_group&&(e=r.getBranchInputObjectByRef(formbuilder.branch.current_input_ref)),!formbuilder.is_editing_branch&&formbuilder.is_editing_group&&(e=r.getGroupInputObjectByRef(formbuilder.group.current_input_ref)),formbuilder.is_editing_branch||formbuilder.is_editing_group||(e=r.getInputObjectByRef(i)),e},replaceWordChars:function(e){var t=e;return t=t.replace(/[\u2018\u2019\u201A]/g,"'"),t=t.replace(/[\u201C\u201D\u201E]/g,'"'),t=t.replace(/\u2026/g,"..."),t=t.replace(/[\u2013\u2014]/g,"-"),t=t.replace(/\u02C6/g,"^"),t=t.replace(/\u2039/g," "),t=t.replace(/\u203A/g," "),t=t.replace(/[\u02DC\u00A0]/g," "),t=t.replace(/\uFFFD/g," ")},getCurrentlySelectedInput:function(){var e,t=this,r=t.getInputObjectByRef(formbuilder.current_input_ref);return formbuilder.is_editing_branch&&formbuilder.is_editing_group?(e=t.getInputObjectByRef(formbuilder.branch.active_branch_ref),r=t.getNestedGroupInputObjectByRef(e,formbuilder.group.current_input_ref)):(formbuilder.is_editing_branch&&(r=t.getBranchInputObjectByRef(formbuilder.branch.current_input_ref)),formbuilder.is_editing_group&&(r=t.getGroupInputObjectByRef(formbuilder.group.current_input_ref))),r},stripTags:function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var r=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,i=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(i,"").replace(r,function(e,r){return t.indexOf("<"+r.toLowerCase()+">")>-1?e:""})},replaceAllOccurrences:function(e,t,r){return e.replace(new RegExp(t,"g"),r)},shuffleArray:function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e}};module.exports=utils},{"config/consts":24,"config/formbuilder":26}],38:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save"),e("actions/validation"),e("factory/input-properties")),o=e("factory/input-prototype"),s=(e("config/formbuilder"),function(e){$.extend(!0,this,n),this.ref=e,this.type=i.AUDIO_TYPE,this.dom={},this.dom.is_valid=!1});s.prototype=Object.create(o.prototype),t.exports=s},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-properties":33,"factory/input-prototype":34}],39:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("actions/errors"),o=(e("actions/jumps"),e("actions/save"),e("factory/input-properties")),s=e("factory/input-prototype"),a=(e("actions/validation"),e("config/formbuilder")),p=e("helpers/ui"),c=(e("helpers/utils"),function(e){$.extend(!0,this,o),this.ref=e,this.type=i.BARCODE_TYPE,this.dom={},this.dom.is_valid=!1});c.prototype=Object.create(s.prototype),c.prototype.setAdvancedInputProperties=function(){this.dom.advanced_properties_wrapper=a.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+this.ref+'"]').find(".input-properties__form__advanced-properties"),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default input").val(this["default"]),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__regex input").val(this.regex),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__double-entry input").prop("checked",this.verify),p.input_properties_panel.setUniquenessProperty(a.current_form_index,this)},c.prototype.hideAdvancedPropertiesErrors=function(){var e=[i.DEFAULT_PROPERTY];n.hideAdvancedPropertiesErrors(this,e)},t.exports=c},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],40:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("actions/errors"),o=e("config/messages"),s=(e("actions/jumps"),e("actions/save"),e("factory/input-properties")),a=e("factory/input-prototype"),p=e("actions/validation"),c=e("helpers/ui"),l=e("helpers/utils"),_=e("config/formbuilder"),u=e("ui-handlers/branch-sortable"),d=e("ui-handlers/event-handler-callbacks/input-collection-branch-sortable-mousedown-callback"),f=e("ui-handlers/event-handler-callbacks/input-collection-sortable-mousedown-callback"),m=function(e){$.extend(!0,this,s),this.ref=e,this.type=i.BRANCH_TYPE,this.dom={},this.dom.is_valid=!1};m.prototype=Object.create(a.prototype),m.prototype.isHeaderTextValid=function(){return this.isQuestionTextValid()},m.prototype.toggleEditButton=function(e){c.branch.toggleEditBranchButton(this.ref,e)},m.prototype.enterBranchSortable=function(){var t=this,r=e("actions/undo"),n=_.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+t.ref+'"]'),s=n.find(" > .input-inner"),a=c.inputs_collection.getEmptyCollectionSortableHTML(i.BRANCH_TYPE),p=l.getInputObjectByRef(t.ref).branch,m="";m+='<button class="btn btn-sm btn-default exit-branch-editing">',m+='<i class="fa fa-2x fa-fw fa-chevron-left "></i>',m+=o.labels.EXIT_EDITING,m+="</button>",_.branch={},_.dom.inputs_tools_draggable.draggable("option","connectToSortable",".branch-sortable"),_.is_editing_branch=!0,_.branch.active_branch_ref=t.ref,_.branch.active_branch_header=t.question,
n.off().on("mousedown","div.input",d),0===n.find(".branch-sortable").length?(a=a.replace("{{branch-inputs}}",""),n.append(a),n.find(".input-properties__no-branch-questions-message").show()):_.render_action===i.RENDER_ACTION_UNDO&&0===n.find(".branch-sortable > div").length&&n.find(".input-properties__no-group-questions-message").show(),n.find(".branch-sortable").sortable(u).disableSelection().removeClass("hidden"),n.find(".branch-sortable").find(".input.active").removeClass("active"),n.addClass("active-branch").removeClass("active"),s.find(".fa-clone").remove(),s.find("> .question-preview").remove(),s.prepend(m),c.forms_tabs.toggleFormTabsButtons({enable:!1}),t.showEditBranchUI(),n.find(".exit-branch-editing").one("click",function(){t.exitBranchSortable()}),_.dom.inputs_collection_sortable.data("ui-sortable")&&_.dom.inputs_collection_sortable.sortable("destroy"),_.dom.inputs_collection_sortable.off("mousedown").on("mousedown",".fa-chevron-left",f),c.inputs_collection.toggleTitleWarning(1,!1),c.inputs_collection.toggleTitleWarning(l.getTitleCount(p),!0),r.pushState()},m.prototype.exitBranchSortable=function(){var t,r=this,n=e("ui-handlers/sortable"),s=_.project_definition.data.project.forms[_.current_form_index].name,a=_.dom.inputs_collection_sortable.find(".input.active-branch"),u=a.find(".branch-sortable"),d=a.find(" > .input-inner"),m=_.project_definition.data.project.forms[_.current_form_index].inputs;_.branch.current_input_ref&&(t=l.getBranchInputObjectByRef(_.branch.current_input_ref),p.performValidation(t,!1)),a.removeClass("active-branch").addClass("active"),d.find(".exit-branch-editing").remove(),d.prepend('<span class="question-preview">'+r.question+"</span>"),d.prepend('<i class="fa fa-2x fa-fw fa-clone"></i>'),_.dom.inputs_collection_sortable.find(".input").not(".active").slideDown(i.ANIMATION_NORMAL),_.dom.inputs_collection.find(".inputs-collection__header__edit-state").text(o.labels.EDITING_FORM),_.dom.inputs_collection.find(".inputs-collection__header__element-name").text(s.trunc(i.INPUTS_COLLECTION_BRANCH_NAME_MAX_DISPLAY_LENGHT)),c.inputs_collection.toggleFormActionButtons(!0),c.input_properties_panel.toggleJumpTab(r.ref,!0),r.toggleEditButton(!0),_.dom.inputs_tools_draggable.draggable("option","connectToSortable",".sortable"),u.addClass("hidden"),_.dom.inputs_collection_sortable.off("mousedown").on("mousedown","div.input",f),n(),r.validateBranchInputs(),_.dom.input_properties_forms_wrapper.find(".input-properties__no-input-selected").hide(),_.dom.input_properties_forms_wrapper.find('.input-properties__form[data-input-ref="'+_.branch.current_input_ref+'"]').hide(),_.dom.input_properties_forms_wrapper.find('.input-properties__form[data-input-ref="'+_.branch.active_branch_ref+'"]').fadeIn(i.ANIMATION_FAST),_.dom.inputs_tools_draggable.filter(".input-branch").show(),_.is_editing_branch=!1,_.branch.current_input_ref=void 0,c.forms_tabs.toggleFormTabsButtons({enable:!0}),_.dom.input_properties_buttons.fadeIn(i.ANIMATION_FAST),c.inputs_collection.toggleTitleWarning(l.getTitleCount(m),!1)},m.prototype.showEditBranchUI=function(){var e=this;_.dom.inputs_collection_sortable.find(" > .input").not(".active-branch").slideUp(i.ANIMATION_NORMAL),_.dom.inputs_collection.find(".inputs-collection__header__edit-state").text(o.labels.EDITING_BRANCH),_.dom.inputs_collection.find(".inputs-collection__header__element-name").text(e.question.trunc(i.INPUTS_COLLECTION_BRANCH_NAME_MAX_DISPLAY_LENGHT)),c.inputs_collection.toggleFormActionButtons(!1),c.input_properties_panel.toggleJumpTab(e.ref,!1),_.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e.ref+'"]').hide(),_.dom.input_properties_forms_wrapper.find(".input-properties__no-input-selected").show(),_.dom.input_properties_buttons.fadeOut(i.ANIMATION_FAST),_.dom.inputs_tools_draggable.filter(".input-branch").hide()},m.prototype.validateBranchInputs=function(){var e=this,t=p.validateBranchInputs(e);e.dom.properties_panel=_.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e.ref+'"]'),t.is_valid?(e.dom.is_valid=!0,n.hideBranchInputsErrors(e.dom.properties_panel)):(n.showBranchInputsErrors(e.dom.properties_panel,t.error.message),e.dom.is_valid=!1)},t.exports=m},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37,"ui-handlers/branch-sortable":76,"ui-handlers/event-handler-callbacks/input-collection-branch-sortable-mousedown-callback":84,"ui-handlers/event-handler-callbacks/input-collection-sortable-mousedown-callback":87,"ui-handlers/sortable":100}],41:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save"),e("actions/possible-answers"),e("factory/input-properties")),o=e("factory/input-prototype"),s=e("factory/input-multiple-answers-prototype"),a=(e("actions/validation"),e("../config/formbuilder")),p=(e("helpers/ui"),e("helpers/utils")),c=function(e){$.extend(!0,this,n),this.ref=e,this.type=i.CHECKBOX_TYPE,this.possible_answers=[{answer:"I am a placeholder answer",answer_ref:p.generateUniqID()}],this.dom={},this.dom.is_valid=!1,a.possible_answers_pagination[this.ref]={},a.possible_answers_pagination[this.ref].page=1};c.prototype=$.extend({},o.prototype,s.prototype),t.exports=c},{"../config/formbuilder":26,"actions/errors":2,"actions/jumps":4,"actions/possible-answers":13,"actions/save":14,"actions/validation":23,"config/consts":24,"factory/input-multiple-answers-prototype":32,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],42:[function(e,t,r){"use strict";var i=e("../config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save")),o=e("factory/input-properties"),s=e("factory/input-prototype"),a=e("../config/formbuilder"),p=e("helpers/ui"),c=(e("helpers/utils"),function(e){$.extend(!0,this,o),this.ref=e,this.type=i.DATE_TYPE,this.dom={},this.dom.is_valid=!1});c.prototype=Object.create(s.prototype),c.prototype.setAdvancedInputProperties=function(){this.dom.advanced_properties_wrapper=a.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+this.ref+'"]').find(".input-properties__form__advanced-properties"),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default-to-current input").prop("checked",this.set_to_current_datetime),this.dom.advanced_properties_wrapper.find('div.input-properties__form__advanced-properties__dateformat input[name="dateformatRadio"][value="'+this.datetime_format+'"]').prop("checked",!0),p.input_properties_panel.setUniquenessProperty(a.current_form_index,this)},c.prototype.saveAdvancedProperties=function(){this.dom.advanced_properties_wrapper=a.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+this.ref+'"]').find(".input-properties__form__advanced-properties"),this.set_to_current_datetime=this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default-to-current input").is(":checked"),this.datetime_format=this.dom.advanced_properties_wrapper.find('div.input-properties__form__advanced-properties__dateformat input[name="dateformatRadio"]:checked').val(),n.saveUniqueness(this)},t.exports=c},{"../config/consts":24,"../config/formbuilder":26,"actions/errors":2,"actions/jumps":4,"actions/save":14,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],43:[function(e,t,r){"use strict";var i=e("../config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save"),e("factory/input-properties")),o=e("factory/input-prototype"),s=e("factory/input-multiple-answers-prototype"),a=(e("actions/validation"),e("../config/formbuilder")),p=(e("helpers/ui"),e("helpers/utils")),c=function(e){$.extend(!0,this,n),this.ref=e,this.type=i.DROPDOWN_TYPE,this.possible_answers=[{answer:"I am a placeholder answer",answer_ref:p.generateUniqID()}],this.dom={},this.dom.is_valid=!1,a.possible_answers_pagination[this.ref]={},a.possible_answers_pagination[this.ref].page=1};c.prototype=$.extend({},o.prototype,s.prototype),t.exports=c},{"../config/consts":24,"../config/formbuilder":26,"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"factory/input-multiple-answers-prototype":32,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],44:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("actions/errors"),o=e("config/messages"),s=(e("actions/jumps"),e("actions/save"),e("factory/input-properties")),a=e("factory/input-prototype"),p=e("actions/validation"),c=e("helpers/ui"),l=e("helpers/utils"),_=e("config/formbuilder"),u=e("ui-handlers/group-sortable"),d=e("ui-handlers/event-handler-callbacks/input-collection-branch-sortable-mousedown-callback"),f=e("ui-handlers/event-handler-callbacks/input-collection-group-sortable-mousedown-callback"),m=e("ui-handlers/event-handler-callbacks/input-collection-nested-group-sortable-mousedown-callback"),h=e("ui-handlers/event-handler-callbacks/input-collection-sortable-mousedown-callback"),b=function(e){$.extend(!0,this,s),this.ref=e,this.type=i.GROUP_TYPE,this.dom={},this.dom.is_valid=!1};b.prototype=Object.create(a.prototype),b.prototype.isHeaderTextValid=function(){return this.isQuestionTextValid()},b.prototype.toggleEditButton=function(e){c.group.toggleEditGroupButton(this.ref,e)},b.prototype.enterGroupSortable=function(t){var r=this,n=e("actions/undo"),s=_.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+r.ref+'"]'),a=s.find(" > .input-inner"),p=c.inputs_collection.getEmptyCollectionSortableHTML(i.GROUP_TYPE),l="",b=t?"exit-nested-group-editing":"exit-group-editing";l+='<button class="btn btn-sm btn-default '+b+'">',l+='<i class="fa fa-2x fa-fw fa-chevron-left "></i>',l+=o.labels.EXIT_EDITING,l+="</button>",$(".jump-tab").addClass("disabled disabled-tab"),_.group={},_.dom.inputs_tools_draggable.draggable("option","connectToSortable",".group-sortable"),_.is_editing_group=!0,_.group.active_group_ref=r.ref,t?s.off().on("mousedown","div.input",m):s.off().on("mousedown","div.input",f),0===s.find(".group-sortable").length?(p=p.replace("{{group-inputs}}",""),s.append(p),s.find(".input-properties__no-group-questions-message").show()):_.render_action===i.RENDER_ACTION_UNDO&&0===s.find(".group-sortable > div").length&&s.find(".input-properties__no-group-questions-message").show(),s.find(".group-sortable").sortable(u).disableSelection().removeClass("hidden"),s.find(".group-sortable").find(".input.active").removeClass("active"),s.addClass("active-group").removeClass("active"),a.find(".fa-align-justify").remove(),a.find("> .question-preview").remove(),a.prepend(l),c.forms_tabs.toggleFormTabsButtons({enable:!1}),t?r.showEditNestedGroupUI():r.showEditGroupUI(),s.find("."+b).one("click",function(){t?r.exitNestedGroupSortable():r.exitGroupSortable()}),void 0,_.render_action===i.RENDER_ACTION_DO&&_.dom.inputs_collection_sortable.sortable("destroy"),t?_.dom.inputs_collection_sortable.find(".active-branch.hidden-active-branch .branch-sortable").off("mousedown").on("mousedown",".fa-chevron-left",d):_.dom.inputs_collection_sortable.on("mousedown",".fa-chevron-left",h),n.pushState()},b.prototype.exitNestedGroupSortable=function(){void 0;var t,r=this,n=e("ui-handlers/branch-sortable"),s=_.dom.inputs_collection_sortable.find(".active-branch"),a=l.getInputObjectByRef(_.branch.active_branch_ref),u=a.question,f=_.dom.inputs_collection_sortable.find(".input.active-group"),m=f.find(".group-sortable"),h=f.find(" > .input-inner");_.group.current_input_ref&&(t=l.getNestedGroupInputObjectByRef(a,_.group.current_input_ref),p.performValidation(t,!1,_.project_definition)),s.find(".branch-sortable").sortable(n).disableSelection(),f.removeClass("active-group").addClass("active"),h.find(".exit-nested-group-editing").remove(),h.prepend('<span class="question-preview">'+r.question+"</span>"),h.prepend('<i class="fa fa-2x fa-fw fa-align-justify"></i>'),s.removeClass("hidden-active-branch").find(" > .input-inner > i").fadeIn(i.ANIMATION_FAST),s.find(" > .input-inner > .exit-branch-editing").fadeIn(i.ANIMATION_FAST),_.dom.inputs_collection_sortable.find(".active-branch").find(".branch-sortable").find(" > .input").not(".active-group").slideDown(i.ANIMATION_NORMAL),_.dom.inputs_collection.find(".inputs-collection__header__edit-state").text(o.labels.EDITING_BRANCH),_.dom.inputs_collection.find(".inputs-collection__header__element-name").text(u.trunc(i.INPUTS_COLLECTION_GROUP_NAME_MAX_DISPLAY_LENGHT)),r.toggleEditButton(!0),_.dom.inputs_tools_draggable.draggable("option","connectToSortable",".branch-sortable"),m.addClass("hidden"),_.dom.inputs_collection_sortable.find(".active-branch").off().on("mousedown","div.input",d),_.dom.inputs_collection_sortable.find(".active-branch > .branch-sortable").sortable(n),r.dom.is_valid?c.inputs_collection.showInputValidIcon(r.ref):c.inputs_collection.showInputInvalidIcon(r.ref),_.dom.input_properties.find(".panel-title span.question-preview").text(r.question.trunc(20)),_.dom.input_properties_forms_wrapper.find(".input-properties__no-input-selected").hide(),_.dom.input_properties_forms_wrapper.find('.input-properties__form[data-input-ref="'+_.group.current_input_ref+'"]').hide(),_.dom.input_properties_forms_wrapper.find('.input-properties__form[data-input-ref="'+_.group.active_group_ref+'"]').fadeIn(i.ANIMATION_FAST),_.dom.inputs_tools_draggable.filter(".input-group").show(),_.is_editing_group=!1,_.group.current_input_ref=void 0,$(".jump-tab").removeClass("disabled disabled-tab"),_.dom.input_properties_buttons.fadeIn(i.ANIMATION_FAST)},b.prototype.exitGroupSortable=function(){var t,r=this,n=e("ui-handlers/sortable"),s=_.project_definition.data.project.forms[_.current_form_index].name,a=_.dom.inputs_collection_sortable.find(".input.active-group"),u=a.find(".group-sortable"),d=a.find(" > .input-inner");_.group.current_input_ref&&(t=l.getGroupInputObjectByRef(_.group.current_input_ref),p.performValidation(t,!1,_.project_definition)),a.removeClass("active-group").addClass("active"),d.find(".exit-group-editing").remove(),d.prepend('<span class="question-preview">'+r.question+"</span>"),d.prepend('<i class="fa fa-2x fa-fw fa-align-justify"></i>'),_.dom.inputs_collection_sortable.find(".input").not(".active").slideDown(i.ANIMATION_NORMAL),_.dom.inputs_collection.find(".inputs-collection__header__edit-state").text(o.labels.EDITING_FORM),_.dom.inputs_collection.find(".inputs-collection__header__element-name").text(s.trunc(i.INPUTS_COLLECTION_GROUP_NAME_MAX_DISPLAY_LENGHT)),c.inputs_collection.toggleFormActionButtons(!0),c.input_properties_panel.toggleJumpTab(r.ref,!0),r.toggleEditButton(!0),_.dom.inputs_tools_draggable.draggable("option","connectToSortable",".sortable"),u.addClass("hidden"),_.dom.inputs_collection_sortable.off("mousedown").on("mousedown","div.input",h),n(),r.dom.is_valid?(c.inputs_collection.showInputQuestionPreview(r.ref,r.question.trunc(50)),c.inputs_collection.showInputValidIcon(r.ref)):c.inputs_collection.showInputInvalidIcon(r.ref),_.dom.input_properties_forms_wrapper.find(".input-properties__no-input-selected").hide(),_.dom.input_properties_forms_wrapper.find('.input-properties__form[data-input-ref="'+_.group.current_input_ref+'"]').hide(),_.dom.input_properties_forms_wrapper.find('.input-properties__form[data-input-ref="'+_.group.active_group_ref+'"]').fadeIn(i.ANIMATION_FAST),_.dom.inputs_tools_draggable.filter(".input-branch, .input-group").show(),_.is_editing_group=!1,_.group.current_input_ref=void 0,$(".jump-tab").removeClass("disabled disabled-tab"),$(".input-properties__form__title-flag").removeClass("hidden"),c.forms_tabs.toggleFormTabsButtons({enable:!0}),_.dom.input_properties_buttons.fadeIn(i.ANIMATION_FAST)},b.prototype.showEditGroupUI=function(){var e=this;_.dom.inputs_collection_sortable.find(" > .input").not(".active-group").slideUp(i.ANIMATION_NORMAL),_.dom.inputs_collection.find(".inputs-collection__header__edit-state").text(o.labels.EDITING_GROUP),_.dom.inputs_collection.find(".inputs-collection__header__element-name").text(e.question.trunc(i.INPUTS_COLLECTION_GROUP_NAME_MAX_DISPLAY_LENGHT)),c.inputs_collection.toggleFormActionButtons(!1),c.input_properties_panel.toggleJumpTab(e.ref,!1),_.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e.ref+'"]').hide(),_.dom.input_properties_forms_wrapper.find(".input-properties__no-input-selected").show(),_.dom.input_properties_buttons.fadeOut(i.ANIMATION_FAST),_.dom.inputs_tools_draggable.filter(".input-branch, .input-group").hide()},b.prototype.showEditNestedGroupUI=function(){var e=this,t=_.dom.inputs_collection_sortable.find(".active-branch");t.find(".branch-sortable").find(" > .input").not(".active-group").slideUp(i.ANIMATION_NORMAL),t.addClass("hidden-active-branch").find(" > .input-inner > i").hide(),t.find(".exit-branch-editing").hide(),t.off(),_.dom.inputs_collection.find(".inputs-collection__header__edit-state").text(o.labels.EDITING_BRANCH+o.labels.EDITING_NESTED_GROUP),_.dom.inputs_collection.find(".inputs-collection__header__element-name").text(e.question.trunc(i.INPUTS_COLLECTION_GROUP_NAME_MAX_DISPLAY_LENGHT)),_.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+e.ref+'"]').hide(),_.dom.input_properties_forms_wrapper.find(".input-properties__no-input-selected").show(),_.dom.input_properties_buttons.fadeOut(i.ANIMATION_FAST),_.dom.inputs_tools_draggable.filter(".input-branch, .input-group").hide()},b.prototype.validateGroupInputs=function(){var e=this,t=p.validateGroupInputs(e);t.is_valid?(e.dom.is_valid=!0,n.hideGroupInputsErrors(e.dom.properties_panel)):(n.showGroupInputsErrors(e.dom.properties_panel,t.error.message),e.dom.is_valid=!1)},t.exports=b},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37,"ui-handlers/branch-sortable":76,"ui-handlers/event-handler-callbacks/input-collection-branch-sortable-mousedown-callback":84,"ui-handlers/event-handler-callbacks/input-collection-group-sortable-mousedown-callback":85,"ui-handlers/event-handler-callbacks/input-collection-nested-group-sortable-mousedown-callback":86,"ui-handlers/event-handler-callbacks/input-collection-sortable-mousedown-callback":87,"ui-handlers/group-sortable":98,"ui-handlers/sortable":100}],45:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("actions/errors"),o=(e("actions/jumps"),e("actions/save")),s=e("config/messages"),a=e("factory/input-properties"),p=e("factory/input-prototype"),c=e("actions/validation"),l=e("config/formbuilder"),_=(e("helpers/ui"),e("helpers/utils"),e("template"),function(e){$.extend(!0,this,a),this.ref=e,this.type=i.INTEGER_TYPE,this.dom={},this.dom.is_valid=!1});_.prototype=Object.create(p.prototype),_.prototype.isInitialAnswerValid=function(){var e=c.isInitialAnswerValid(this.type,this["default"],this.regex);return e.is_valid&&this.type===i.INTEGER_TYPE&&""!==this["default"]&&(c.isValueInt(this["default"])||(e.is_valid=!1,e.error.message=s.error.VALUE_MUST_BE_INTEGER)),e},_.prototype.isMinValueValid=function(){return c.isMinMaxValueValid(this.type,this.min)},_.prototype.isMaxValueValid=function(){return c.isMinMaxValueValid(this.type,this.max)},_.prototype.saveAdvancedProperties=function(){var e,t,r;this.dom.advanced_properties_wrapper=l.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+this.ref+'"]').find(".input-properties__form__advanced-properties"),this.hideAdvancedPropertiesErrors(),this.type=this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__numeric input:checked").val(),this["default"]=this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default input").val(),this["default"]=this["default"].replace(/(<([^>]+)>)/gi,""),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default input").val(this["default"]),this.min=this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__min input").val(),this.min=this.min.replace(/(<([^>]+)>)/gi,""),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__min input").val(this.min),this.max=this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__max input").val(),this.max=this.max.replace(/(<([^>]+)>)/gi,""),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__max input").val(this.max),this.regex=this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__regex input").val(),this.regex=this.regex.replace(/(<([^>]+)>)/gi,""),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__regex input").val(this.regex),this.verify=this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__double-entry input").is(":checked"),e=this.isInitialAnswerValid(),e.is_valid||(this.dom.is_valid=!1,this.showAdvancedPropertiesErrors(i.DEFAULT_PROPERTY,e.error.message)),t=this.isMinValueValid(),t.is_valid||(this.dom.is_valid=!1,this.showAdvancedPropertiesErrors(i.MIN_VALUE_PROPERTY,t.error.message)),r=this.isMaxValueValid(),r.is_valid||(this.dom.is_valid=!1,this.showAdvancedPropertiesErrors(i.MAX_VALUE_PROPERTY,r.error.message)),t.is_valid&&r.is_valid&&""!==this.min&&""!==this.max&&parseFloat(this.min)>=parseFloat(this.max)&&(this.dom.is_valid=!1,this.showAdvancedPropertiesErrors(i.MIN_VALUE_PROPERTY,s.error.MIN_MUST_BE_SMALLER_THAN_MAX)),e.is_valid&&""!==this["default"]&&(t.is_valid&&""!==this.min&&parseFloat(this["default"])<parseFloat(this.min)&&(this.dom.is_valid=!1,this.showAdvancedPropertiesErrors(i.DEFAULT_PROPERTY,s.error.INITIAL_ANSWER_OUT_OF_RANGE)),r.is_valid&&""!==this.max&&parseFloat(this["default"])>parseFloat(this.max)&&(this.dom.is_valid=!1,this.showAdvancedPropertiesErrors(i.DEFAULT_PROPERTY,s.error.INITIAL_ANSWER_OUT_OF_RANGE))),o.saveUniqueness(this)},_.prototype.hideAdvancedPropertiesErrors=function(){var e=[i.DEFAULT_PROPERTY,i.MIN_VALUE_PROPERTY,i.MAX_VALUE_PROPERTY];n.hideAdvancedPropertiesErrors(this,e)},t.exports=_},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37,template:62}],46:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save"),e("factory/input-properties")),o=e("factory/input-prototype"),s=(e("actions/validation"),e("config/formbuilder"),function(e){$.extend(!0,this,n),this.ref=e,this.type=i.LOCATION_TYPE,this.dom={},this.dom.is_valid=!1});s.prototype=Object.create(o.prototype),t.exports=s},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-properties":33,"factory/input-prototype":34}],47:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("actions/errors"),o=(e("actions/jumps"),e("actions/save"),e("factory/input-properties")),s=e("factory/input-prototype"),a=(e("actions/validation"),e("config/formbuilder")),p=e("helpers/ui"),c=(e("helpers/utils"),function(e){$.extend(!0,this,o),this.ref=e,this.type=i.PHONE_TYPE,this.dom={},this.dom.is_valid=!1});c.prototype=Object.create(s.prototype),c.prototype.setAdvancedInputProperties=function(){this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default input").val(this["default"]),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__regex input").val(this.regex),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__double-entry input").prop("checked",this.verify),p.input_properties_panel.setUniquenessProperty(a.current_form_index,this)},c.prototype.hideAdvancedPropertiesErrors=function(){var e=[i.DEFAULT_PROPERTY];n.hideAdvancedPropertiesErrors(this,e)},t.exports=c},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],48:[function(e,t,r){"use strict";var i=e("../config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save"),e("factory/input-properties")),o=e("factory/input-prototype"),s=(e("actions/validation"),e("../config/formbuilder"),function(e){$.extend(!0,this,n),this.ref=e,this.type=i.PHOTO_TYPE,this.dom={},this.dom.is_valid=!1});s.prototype=Object.create(o.prototype),t.exports=s},{"../config/consts":24,"../config/formbuilder":26,"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"factory/input-properties":33,"factory/input-prototype":34}],49:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save"),e("actions/possible-answers"),e("factory/input-properties")),o=e("factory/input-prototype"),s=e("factory/input-multiple-answers-prototype"),a=(e("actions/validation"),e("config/formbuilder")),p=(e("helpers/ui"),e("helpers/utils")),c=function(e){$.extend(!0,this,n),this.ref=e,this.type=i.RADIO_TYPE,this.possible_answers=[{answer:"I am a placeholder answer",answer_ref:p.generateUniqID()}],this.dom={},this.dom.is_valid=!1,a.possible_answers_pagination[this.ref]={},a.possible_answers_pagination[this.ref].page=1};c.prototype=$.extend({},o.prototype,s.prototype),t.exports=c},{"actions/errors":2,"actions/jumps":4,"actions/possible-answers":13,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-multiple-answers-prototype":32,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],50:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save"),e("factory/input-properties")),o=e("factory/input-prototype"),s=(e("actions/validation"),e("config/formbuilder"),e("helpers/ui"),e("helpers/utils"),function(e){$.extend(!0,this,n),this.ref=e,this.type=i.README_TYPE,this.dom={},this.dom.is_valid=!1,this.is_title=!1,this.verify=!1,this.is_required=!1});s.prototype=Object.create(o.prototype),t.exports=s},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],51:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save"),e("actions/possible-answers"),e("factory/input-properties")),o=e("factory/input-prototype"),s=e("factory/input-multiple-answers-prototype"),a=(e("actions/validation"),e("config/formbuilder")),p=(e("helpers/ui"),e("helpers/utils")),c=function(e){$.extend(!0,this,n),this.ref=e,this.type=i.SEARCH_SINGLE_TYPE,this.possible_answers=[{answer:"I am a placeholder answer",answer_ref:p.generateUniqID()}],this.dom={},this.dom.is_valid=!1,a.possible_answers_pagination[this.ref]={},a.possible_answers_pagination[this.ref].page=1};c.prototype=$.extend({},o.prototype,s.prototype),t.exports=c},{"actions/errors":2,"actions/jumps":4,"actions/possible-answers":13,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-multiple-answers-prototype":32,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],52:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("actions/errors"),o=(e("actions/jumps"),e("actions/save"),e("factory/input-properties")),s=e("factory/input-prototype"),a=(e("actions/validation"),e("config/formbuilder")),p=e("helpers/ui"),c=(e("helpers/utils"),function(e){$.extend(!0,this,o),this.ref=e,this.type=i.TEXT_TYPE,this.dom={},this.dom.is_valid=!1});c.prototype=Object.create(s.prototype),c.prototype.setAdvancedInputProperties=function(){this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default input").val(this["default"]),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__regex input").val(this.regex),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__double-entry input").prop("checked",this.verify),p.input_properties_panel.setUniquenessProperty(a.current_form_index,this)},c.prototype.hideAdvancedPropertiesErrors=function(){var e=[i.DEFAULT_PROPERTY];n.hideAdvancedPropertiesErrors(this,e)},t.exports=c},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],53:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("actions/errors"),o=(e("actions/jumps"),e("actions/save"),e("factory/input-properties")),s=e("factory/input-prototype"),a=(e("actions/validation"),e("config/formbuilder")),p=e("helpers/ui"),c=(e("helpers/utils"),function(e){$.extend(!0,this,o),this.ref=e,this.type=i.TEXTAREA_TYPE,this.dom={},this.dom.is_valid=!1});c.prototype=Object.create(s.prototype),c.prototype.setAdvancedInputProperties=function(){this.dom.advanced_properties_wrapper=a.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+this.ref+'"]').find(".input-properties__form__advanced-properties"),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default input").val(this["default"]),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__regex input").val(this.regex),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__double-entry input").prop("checked",this.verify),p.input_properties_panel.setUniquenessProperty(a.current_form_index,this)},c.prototype.hideAdvancedPropertiesErrors=function(){var e=[i.DEFAULT_PROPERTY];n.hideAdvancedPropertiesErrors(this,e)},t.exports=c},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],54:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save")),o=e("factory/input-properties"),s=e("factory/input-prototype"),a=(e("actions/validation"),e("config/formbuilder")),p=e("helpers/ui"),c=(e("helpers/utils"),function(e){$.extend(!0,this,o),this.ref=e,this.type=i.TIME_TYPE,this.dom={},this.dom.is_valid=!1});c.prototype=Object.create(s.prototype),c.prototype.setAdvancedInputProperties=function(){this.dom.advanced_properties_wrapper=a.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+this.ref+'"]').find(".input-properties__form__advanced-properties"),this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default-to-current label input").prop("checked",this.set_to_current_datetime),this.dom.advanced_properties_wrapper.find('div.input-properties__form__advanced-properties__timeformat input[name="timeformatRadio"][value="'+this.datetime_format+'"]').prop("checked",!0),p.input_properties_panel.setUniquenessProperty(a.current_form_index,this)},c.prototype.saveAdvancedProperties=function(){a.current_form_index;this.dom.advanced_properties_wrapper=a.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+this.ref+'"]').find(".input-properties__form__advanced-properties"),this.set_to_current_datetime=this.dom.advanced_properties_wrapper.find("div.input-properties__form__advanced-properties__default-to-current input").is(":checked"),
this.datetime_format=this.dom.advanced_properties_wrapper.find('div.input-properties__form__advanced-properties__timeformat input[name="timeformatRadio"]:checked').val(),n.saveUniqueness(this)},t.exports=c},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],55:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("actions/errors"),e("actions/jumps"),e("actions/save"),e("factory/input-properties")),o=e("factory/input-prototype"),s=(e("actions/validation"),e("config/formbuilder"),e("helpers/ui"),e("helpers/utils"),function(e){$.extend(!0,this,n),this.ref=e,this.type=i.VIDEO_TYPE,this.dom={},this.dom.is_valid=!1});s.prototype=Object.create(o.prototype),t.exports=s},{"actions/errors":2,"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"factory/input-properties":33,"factory/input-prototype":34,"helpers/ui":36,"helpers/utils":37}],56:[function(e,t,r){"use strict";var i=e("config/consts.js"),n=(e("config/formbuilder"),e("helpers/utils")),o=function(){var e=new $.Deferred,t={},r=n.getContainersPath(),o=i.FORMBUILDER_VERSION;return $.when($.get(r+"inputs-collection.html?v="+o,function(e){t.inputs_collection=e}),$.get(r+"inputs-properties.html?v="+o,function(e){t.inputs_properties=e})).then(function(){e.resolve(t)}),e.promise()};t.exports=o},{"config/consts.js":24,"config/formbuilder":26,"helpers/utils":37}],57:[function(e,t,r){"use strict";var i=(e("config/consts"),e("config/formbuilder")),n=e("loaders/load-partials"),o=e("loaders/load-containers"),s=e("loaders/load-input-properties-views"),a=e("helpers/ui"),p=function(){var e=new $.Deferred;return $.when(o(),n(),s()).then(function(t,r,n){var o=i.project_definition.data.project.forms[0].ref;a.forms_tabs.injectRefIntoFormTab(o),i.setup(o,r,n),e.resolve()}),e.promise()};t.exports=p},{"config/consts":24,"config/formbuilder":26,"helpers/ui":36,"loaders/load-containers":58,"loaders/load-input-properties-views":59,"loaders/load-partials":60}],58:[function(e,t,r){"use strict";var i=e("config/consts.js"),n=e("helpers/utils"),o=function(){var e=new $.Deferred,t=n.getContainersPath(),r=i.FORMBUILDER_VERSION;return $.when($.get(t+"navbar.html?v="+r,function(e){$(".navbar").html(e)}),$.get(t+"inputs-tools.html?v="+r,function(e){$(".inputs-tools").html(e)}),$.get(t+"inputs-collection.html?v="+r,function(e){$(".inputs-collection").html(e)}),$.get(t+"inputs-properties.html?v="+r,function(e){$(".input-properties").html(e)})).then(function(){e.resolve()}),e.promise()};t.exports=o},{"config/consts.js":24,"helpers/utils":37}],59:[function(e,t,r){"use strict";var i=e("config/consts.js"),n=(e("helpers/ui"),e("helpers/utils")),o=function(){var e={},t=new $.Deferred,r=n.getPropertiesPath(),o=i.FORMBUILDER_VERSION;return $.when($.get(r+"properties-audio.html?v="+o,function(t){e.audio=t}),$.get(r+"properties-barcode.html?v="+o,function(t){e.barcode=t}),$.get(r+"properties-branch.html?v="+o,function(t){e.branch=t}),$.get(r+"properties-checkbox.html?v="+o,function(t){e.checkbox=t}),$.get(r+"properties-date.html?v="+o,function(t){e.date=t}),$.get(r+"properties-dropdown.html?v="+o,function(t){e.dropdown=t}),$.get(r+"properties-group.html?v="+o,function(t){e.group=t}),$.get(r+"properties-integer.html?v="+o,function(t){e.integer=t,e.decimal=t}),$.get(r+"properties-location.html?v="+o,function(t){e.location=t}),$.get(r+"properties-photo.html?v="+o,function(t){e.photo=t}),$.get(r+"properties-phone.html?v="+o,function(t){e.phone=t}),$.get(r+"properties-radio.html?v="+o,function(t){e.radio=t}),$.get(r+"properties-textarea.html?v="+o,function(t){e.textarea=t}),$.get(r+"properties-readme.html?v="+o,function(t){e.readme=t}),$.get(r+"properties-text.html?v="+o,function(t){e.text=t}),$.get(r+"properties-time.html?v="+o,function(t){e.time=t}),$.get(r+"properties-video.html?v="+o,function(t){e.video=t}),$.get(r+"properties-searchsingle.html?v="+o,function(t){e.searchsingle=t}),$.get(r+"properties-searchsingle.html?v="+o,function(t){e.searchmultiple=t})).then(function(){t.resolve(e)}),t.promise()};t.exports=o},{"config/consts.js":24,"helpers/ui":36,"helpers/utils":37}],60:[function(e,t,r){"use strict";var i=e("config/consts.js"),n=(e("helpers/ui"),e("helpers/utils")),o=function(){var e={},t=new $.Deferred,r=n.getPartialsPath(),o=i.FORMBUILDER_VERSION;return $.when($.get(r+"nav-tabs.html?v="+o,function(t){e.navtabs=t}),$.get(r+"basic-properties.html?v="+o,function(t){e.basic_properties=t}),$.get(r+"uniqueness-form-checkbox.html?v="+o,function(t){e.uniqueness_form_checkbox=t}),$.get(r+"uniqueness-hierarchy-checkboxes.html?v="+o,function(t){e.uniqueness_hierarchy_checkboxes=t}),$.get(r+"uniqueness-branch-checkbox.html?v="+o,function(t){e.uniqueness_branch_checkbox=t}),$.get(r+"exit-branchgroup-editing.html?v="+o,function(t){e.exit_branchgroup_editing=t}),$.get(r+"basic-media-properties.html?v="+o,function(t){e.basic_media_properties=t}),$.get(r+"basic-branch-properties.html?v="+o,function(t){e.basic_branch_properties=t}),$.get(r+"basic-group-properties.html?v="+o,function(t){e.basic_group_properties=t}),$.get(r+"basic-readme-properties.html?v="+o,function(t){e.basic_readme_properties=t}),$.get(r+"possible-answers-wrapper.html?v="+o,function(t){e.possible_answers_wrapper=t}),$.get(r+"possible-answer-list-item.html?v="+o,function(t){e.possible_answer_list_item=t}),$.get(r+"jumps-wrapper.html?v="+o,function(t){e.jumps_wrapper=t}),$.get(r+"jump-list-item.html?v="+o,function(t){e.jump_list_item=t}),$.get(r+"jump-list-item-always-jump.html?v="+o,function(t){e.jump_list_item_always_jump=t}),$.get(r+"modal-form.html?v="+o,function(t){e.modal_edit_form_name=t}),$.get(r+"input-tool.html?v="+o,function(t){e.input_tool=t})).then(function(){t.resolve(e)}),t.promise()};t.exports=o},{"config/consts.js":24,"helpers/ui":36,"helpers/utils":37}],61:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/consts"),o=e("helpers/utils"),s=function(){void 0;try{n.FORMBUILDER_VERSION=$("#formbuilder-version").data().version}catch(e){void 0,n.FORMBUILDER_VERSION=Date.now()}var t=new $.Deferred;return o.setProjectURL(),void 0,$.when($.ajax({url:n.PROJECT_URL+"?"+Date.now(),type:"GET",success:function(e){i.project_definition=e},error:function(e){void 0,i.project_definition=JSON.parse(pako.ungzip(window.atob(e.responseText),{to:"string"}))}})).then(function(){t.resolve()}).fail(function(){t.resolve()}),t.promise()};t.exports=s},{"config/consts":24,"config/formbuilder":26,"helpers/utils":37}],62:[function(e,t,r){"use strict";var i=(e("config/consts"),e("helpers/ui"),e("helpers/utils"),e("config/formbuilder"),{});i.replaceCommonAdvancedProperties=e("template/methods/replaceCommonAdvancedProperties"),i.createInputToolHTML=e("template/methods/createInputToolHTML"),i.prepareAdvancedInputPropertiesHTML=e("template/methods/prepareAdvancedInputPropertiesHTML"),i.getJumpTabBtnHTML=e("template/methods/getJumpTabBtnHTML"),i.getAdvancedTabBtnHTML=e("template/methods/getAdvancedTabBtnHTML"),i.createBasicPropertiesHTML=e("template/methods/createBasicPropertiesHTML"),i.getUniquenessHTML=e("template/methods/getUniquenessHTML"),i.getPossibleAnswersHTML=e("template/methods/getPossibleAnswersHTML"),i.getInputPropertiesPanelHTML=e("template/methods/getInputPropertiesPanelHTML"),i.createInputPropertiesHTML=e("template/methods/createInputPropertiesHTML"),i.getJumpsListHTML=e("template/methods/getJumpsListHTML");var n={replaceCommonAdvancedProperties:function(e,t){return i.replaceCommonAdvancedProperties(e,t)},createInputToolHTML:function(e){return i.createInputToolHTML(e)},prepareAdvancedInputPropertiesHTML:function(e,t){return i.prepareAdvancedInputPropertiesHTML(e,t)},getAdvancedTabBtnHTML:function(e,t){return i.getAdvancedTabBtnHTML(e,t)},getJumpTabBtnHTML:function(e,t){return i.getJumpTabBtnHTML(e,t)},createBasicPropertiesHTML:function(e){return i.createBasicPropertiesHTML(e)},getUniquenessHTML:function(e){return i.getUniquenessHTML(e)},getPossibleAnswersHTML:function(e){return i.getPossibleAnswersHTML(e)},getInputPropertiesPanelHTML:function(e){return i.getInputPropertiesPanelHTML(e)},createInputPropertiesHTML:function(e,t){return i.createInputPropertiesHTML(e,t)},getJumpsListHTML:function(e){return i.getJumpsListHTML(e)}};t.exports=n},{"config/consts":24,"config/formbuilder":26,"helpers/ui":36,"helpers/utils":37,"template/methods/createBasicPropertiesHTML":63,"template/methods/createInputPropertiesHTML":64,"template/methods/createInputToolHTML":65,"template/methods/getAdvancedTabBtnHTML":66,"template/methods/getInputPropertiesPanelHTML":67,"template/methods/getJumpTabBtnHTML":68,"template/methods/getJumpsListHTML":69,"template/methods/getPossibleAnswersHTML":70,"template/methods/getUniquenessHTML":73,"template/methods/prepareAdvancedInputPropertiesHTML":74,"template/methods/replaceCommonAdvancedProperties":75}],63:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/formbuilder"),o=e("helpers/utils"),s=function(e){var t,r=n.dom.partials,s=e.question,a=e.is_required?"checked":"",p=e.is_title?"checked":"",c=""===e.question?"disabled":"",l=""===e.question?"disabled":"",_=n.project_definition.data.project.forms[n.current_form_index].inputs,u=[];return n.is_editing_branch&&(u=o.getInputObjectByRef(n.branch.active_branch_ref).branch),i.SINGLE_ANSWER_TYPES.indexOf(e.type)===-1&&i.MULTIPLE_ANSWER_TYPES.indexOf(e.type)===-1||(e.type===i.README_TYPE?t=r.basic_readme_properties:(t=r.basic_properties,t=t.replace("{{required-flag-checked}}",a),t=t.replace("{{title-flag-checked}}",p),(n.is_editing_branch?o.isMaxTitleLimitReached(u):o.isMaxTitleLimitReached(_))?e.is_title?(t=t.replace("{{is-title-disabled}}",""),t=t.replace(/{{is-checkbox-disabled}}/g,""),t=t.replace("{{checkbox-title-label}}",i.USE_ANSWER_AS_TITLE)):(t=t.replace("{{is-title-disabled}}","disabled"),t=t.replace(/{{is-checkbox-disabled}}/g,"disabled-checkbox"),t=t.replace("{{checkbox-title-label}}",i.MAX_TITLE_LIMIT_REACHED)):(t=t.replace("{{is-title-disabled}}",""),t=t.replace(/{{is-checkbox-disabled}}/g,""),t=t.replace("{{checkbox-title-label}}",i.USE_ANSWER_AS_TITLE)))),i.MEDIA_ANSWER_TYPES.indexOf(e.type)!==-1&&(t=r.basic_media_properties),e.type===i.BRANCH_TYPE&&(t=r.basic_branch_properties,t=t.replace("{{branch-edit-disabled}}",c)),e.type===i.GROUP_TYPE&&(t=r.basic_group_properties,t=t.replace("{{group-edit-disabled}}",l)),t=t.replace(/{{input-ref-question}}/g,e.ref+"-question"),t=t.replace("{{basic-input-ref}}","basic-"+e.ref),t=t.replace("{{input-question-value}}",s)};t.exports=s},{"config/consts":24,"config/formbuilder":26,"helpers/utils":37}],64:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/consts"),o=(e("helpers/utils"),function(e,t){var r,o,s,a,p,c=this,l=t,_=e,u=i.dom.partials,d=n.MEDIA_ANSWER_TYPES.indexOf(_.type)!==-1,f=u.navtabs;return l=l.replace("{{input-ref}}",_.ref),l=l.replace("{{advanced-input-ref}}","advanced-"+_.ref),f=f.replace("{{#basic-input-ref}}","#basic-"+_.ref),r=d||_.type===n.BRANCH_TYPE||_.type===n.GROUP_TYPE||_.type===n.README_TYPE?c.getAdvancedTabBtnHTML(_.ref,!1):c.getAdvancedTabBtnHTML(_.ref,!0),f=f.replace("{{advanced-tab-btn}}",r),o=i.is_editing_group?c.getJumpTabBtnHTML(_.ref,!1):c.getJumpTabBtnHTML(_.ref,!0),f=f.replace("{{jumps-tab-btn}}",o),l=l.replace("{{nav-tabs}}",f),s=c.createBasicPropertiesHTML(_),l=l.replace("{{properties}}",s),a=u.jumps_wrapper,a=a.replace("{{jumps-input-ref}}","jumps-"+_.ref),_.jumps.length>0?(p=c.getJumpsListHTML(_),a=a.replace("{{no-jumps_message-hidden}}","hidden"),a=a.replace("{{jumps-list}}",p),a=n.MULTIPLE_ANSWER_TYPES.indexOf(_.type)>-1?_.jumps.length>=_.possible_answers.length?a.replace("{{add-jump-btn-state}}","disabled"):a.replace("{{add-jump-btn-state}}",""):a.replace("{{add-jump-btn-state}}","disabled")):(a=a.replace("{{jumps-list}}",""),a=a.replace("{{add-jump-btn-state}}",""),a=a.replace("{{no-jumps_message-hidden}}","")),l=l.replace("{{jumps}}",a),l=n.MULTIPLE_ANSWER_TYPES.indexOf(_.type)!==-1&&_.jumps.length>=_.possible_answers.length?l.replace("{{add-jump-btn-state}}",'disabled="disabled"'):l.replace("{{add-jump-btn-state}}",""),l=n.MULTIPLE_ANSWER_TYPES.indexOf(_.type)!==-1?l.replace("{{possible-answers}}",c.getPossibleAnswersHTML(_)):l.replace("{{possible-answers}}",""),n.UNIQUENESS_ALLOWED_TYPES.indexOf(_.type)!==-1&&(l=l.replace("{{uniqueness}}",c.getUniquenessHTML(_))),l});t.exports=o},{"config/consts":24,"config/formbuilder":26,"helpers/utils":37}],65:[function(e,t,r){"use strict";var i=e("helpers/utils"),n=e("config/consts"),o=e("config/messages"),s=function(e){var t="",r=i.getInputToolIcon(e.type),s=e.type===n.BRANCH_TYPE?"input-branch":"",a=e.type===n.GROUP_TYPE?"input-group":"",p=""===e.question?o.error.NO_QUESTION_TEXT_YET:e.question,c=e.jumps.length>0?"":"invisible";return e.type===n.README_TYPE&&(p=i.decodeHtml(e.question),p=p.replace(/(<([^>]+)>)/gi," "),p='"'+p+'"'),t+='<div class="input '+s+a+' ui-draggable ui-draggable-handle" ',t+='data-type="'+e.type+'" data-input-ref="'+e.ref+'">',t+='<div class="input-inner">',t+='<i class="fa fa-2x fa-fw '+r+'"></i>',t+='<span class="question-preview">'+p.trunc(n.LIMITS.question_preview_length)+"</span>",t+='<i class="question-state fa fa-check fa-2x fa-fw pull-right"></i>',t+='<i class="jump-state fa fa-arrow-circle-o-down fa-2x fa-fw pull-right '+c+'"></i>',e.type===n.BRANCH_TYPE&&(t+="{{branch-content}}"),e.type===n.GROUP_TYPE&&(t+="{{group-content}}"),t+="</div>",t+="</div>"};t.exports=s},{"config/consts":24,"config/messages":28,"helpers/utils":37}],66:[function(e,t,r){"use strict";var i=function(e,t){var r="";return t?(r+='<li role="presentation" class="nav-tabs__tab-btn-item advanced-tab">',r+='<a href="#advanced-'+e+'" role="tab" data-toggle="tab"> Advanced&nbsp;',r+='<i class="fa fa-exclamation fa-2x invisible advanced-error"></i>',r+="</a>",r+="</li>"):(r+='<li role="presentation" class="disabled disabled-tab nav-tabs__tab-btn-item">',r+='<a href="#" role="tab" > Advanced&nbsp;',r+='<i class="fa fa-exclamation fa-2x  invisible advanced-error"></i>',r+="</a>",r+="</li>"),r};t.exports=i},{}],67:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/formbuilder"),o=function(e){var t=this,r=e,o=i.MEDIA_ANSWER_TYPES.indexOf(r.type)!==-1,s=n.dom.input_properties_views[r.type];return s=t.createInputPropertiesHTML(r,s),r.type===i.BRANCH_TYPE&&r.type===i.GROUP_TYPE&&o||(s=t.prepareAdvancedInputPropertiesHTML(s,r)),s};t.exports=o},{"config/consts":24,"config/formbuilder":26}],68:[function(e,t,r){"use strict";var i=function(e,t){var r="";return t?(r+='<li role="presentation" class="jump-tab nav-tabs__tab-btn-item">',r+='<a href="#jumps-'+e+'" role="tab" data-toggle="tab" > Jumps&nbsp;',r+='<i class="fa fa-exclamation fa-2x invisible jumps-error"></i>',r+="</a>",r+="</li>"):(r+='<li role="presentation" class="jump-tab disabled disabled-tab nav-tabs__tab-btn-item">',r+='<a href="#" class="nav-tabs__jump" role="tab" > Jumps&nbsp;',r+='<i class="fa fa-exclamation fa-2x invisible jumps-error"></i>',r+="</a>",r+="</li>"),r};t.exports=i},{}],69:[function(e,t,r){"use strict";function i(e){return'<option value="'+e.answer_ref+'" selected="selected">'+e.answer+"</option>"}function n(e){var t="";return $(a.JUMP_CONDITIONS).each(function(r,i){if(i.key===e.when)return t=i.text,!1}),'<option value="'+e.when+'" selected="selected">'+t+"</option>"}function o(e){return'<option value="'+e.ref+'" selected="selected">'+e.question+"</option>"}var s=e("config/formbuilder"),a=e("config/consts"),p=e("helpers/utils"),c=function(e){var t,r,c="",l=[],_=e.ref.split("_");_.length>3?(_.pop(),l=p.getInputObjectByRef(_.join("_")).branch):l=s.project_definition.data.project.forms[s.current_form_index].inputs;var u=p.getJumpAvailableDestinations(e,l);return $(e.jumps).each(function(p,l){a.MULTIPLE_ANSWER_TYPES.indexOf(e.type)===-1?c+=s.dom.partials.jump_list_item_always_jump:(c+=s.dom.partials.jump_list_item,t=n(l),c=c.replace("{{logic-when-saved-option}}",t),$(e.possible_answers).each(function(e,t){t.answer_ref===l.answer_ref&&(r=i(t))}),c=c.replace("{{logic-answer-saved-option}}",r));var _="";"END"===l.to?_=o({ref:"END",question:"End of form"}):$(u).each(function(e,t){if(t.ref===l.to)return _=o(t),!1}),c=c.replace("{{logic-goto-saved-option}}",_),c=c.replace(/{{input-ref-logic-when}}/g,p+"-"+e.ref+"-logic-when"),c=c.replace(/{{input-ref-logic-goto}}/g,p+"-"+e.ref+"-logic-goto"),c=c.replace(/{{input-ref-logic-answer}}/g,p+"-"+e.ref+"-logic-answer")}),c};t.exports=c},{"config/consts":24,"config/formbuilder":26,"helpers/utils":37}],70:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/consts"),o=e("template/methods/getPossibleAnswersList"),s=function(e){var t=e,r=i.dom.partials.possible_answers_wrapper,s=o(t.possible_answers);return r=r.replace("{{possible-answers-list}}",s),r=t.possible_answers.length>=n.LIMITS.possible_answers_max?t.type===n.SEARCH_SINGLE_TYPE||t.type===n.SEARCH_MULTIPLE_TYPE?t.possible_answers.length>=n.LIMITS.possible_answers_max_search?r.replace("{{disabled}}","disabled"):r.replace("{{disabled}}",""):r.replace("{{disabled}}","disabled"):r.replace("{{disabled}}","")};t.exports=s},{"config/consts":24,"config/formbuilder":26,"template/methods/getPossibleAnswersList":71}],71:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/consts"),o=function(e){var t="",r="";return $(e).each(function(o,s){return o!==n.LIMITS.possible_answers_per_page&&(r=i.dom.partials.possible_answer_list_item,r=r.replace("{{answer-ref}}",s.answer_ref),r=r.replace("{{answer}}",s.answer),r=0===o&&1===e.length?r.replace("{{disabled}}","disabled"):r.replace("{{disabled}}",""),void(t+=r))}),t};t.exports=o},{"config/consts":24,"config/formbuilder":26}],72:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=(e("helpers/utils"),e("config/consts")),o=function(e,t){var r=e,o=t,s="",a="",p=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+r.ref+'"]'),c=p.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list"),l=(o-1)*n.LIMITS.possible_answers_per_page,_=o*n.LIMITS.possible_answers_per_page;c.find("li").remove();var u=r.possible_answers.slice(l,_);$(u).each(function(e,t){t.answer=t.answer.replace(/"/gi,"&quot;"),s=i.dom.partials.possible_answer_list_item,s=s.replace("{{answer-ref}}",t.answer_ref),s=s.replace("{{answer}}",t.answer),s=0===e&&1===r.possible_answers.length?s.replace("{{disabled}}","disabled"):s.replace("{{disabled}}",""),a+=s,""===t.answer}),c.hide().html(a).fadeIn(n.ANIMATION_SLOW)};t.exports=o},{"config/consts":24,"config/formbuilder":26,"helpers/utils":37}],73:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/consts"),o=function(e){function t(e){return e=u.uniqueness_hierarchy_checkboxes,o=i.project_definition.data.project.forms[l-1].name,e=e.replace(/{{parent-form-name}}/g,o),e=e.replace("{{input-ref-uniqueness-hierarchy}}",c.ref+"-uniqueness-hierarchy"),a=c.uniqueness===n.UNIQUESS_HIERARCHY?"checked":"",e=e.replace("{{input-ref-uniqueness-hierarchy-checked}}",a)}function r(e){return e=u.uniqueness_branch_checkbox,e=e.replace("{{branch-header}}",i.branch.active_branch_header)}var o,s,a,p="",c=e,l=i.current_form_index,_=i.project_definition.data.project.forms[l].name,u=i.dom.partials;return p=l>0?i.is_editing_branch?r(p):t(p):i.is_editing_branch?r(p):u.uniqueness_form_checkbox,p=p.replace("{{input-ref-uniqueness-form}}",c.ref+"-uniqueness-form"),s=c.uniqueness===n.UNIQUESS_FORM?"checked":"",p=p.replace("{{input-ref-uniqueness-form-checked}}",s),p=p.replace(/{{form-name}}/g,_)};t.exports=o},{"config/consts":24,"config/formbuilder":26}],74:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("helpers/utils"),o=function(e,t){function r(e){var r,n=6;for(null===t.datetime_format&&(t.type===i.TIME_TYPE?t.datetime_format=i[e.toUpperCase()+"_FORMAT_3"]:t.datetime_format=i[e.toUpperCase()+"_FORMAT_1"]),r=1;r<n;r++)m["is_checked_datetime_format_"+r]=t.datetime_format===i[e.toUpperCase()+"_FORMAT_"+r]?"checked":"",u=u.replace("{{is-checked-datetime-format-"+r+"}}",m["is_checked_datetime_format_"+r]);u=u.replace("{{input-ref-default-to-current}}",d+"-default-to-current"),u=u.replace("{{set-to-current-datetime}}",h)}function o(e){p="checked",c="",e===i.DECIMAL_TYPE&&(p="",c="checked"),u=u.replace("{{is-integer-checked}}",p),u=u.replace("{{is-decimal-checked}}",c),u=u.replace("{{input-ref-min-value}}",t.min),u=u.replace("{{input-ref-max-value}}",t.max),u=u.replace(/{{input-ref-integer}}/g,d+"-integer"),u=u.replace(/{{input-ref-decimal}}/g,d+"-decimal"),u=u.replace(/{{input-ref-min}}/g,d+"-min"),u=u.replace(/{{input-ref-max}}/g,d+"-max")}function s(e){l="checked",_="",e===i.SEARCH_MULTIPLE_TYPE&&(l="",_="checked"),u=u.replace("{{is-searchsingle-checked}}",l),u=u.replace("{{is-searchmultiple-checked}}",_)}function a(e,t){var r=t,i="";return r=r.replace(/{{input-ref-default}}/g,e.ref+"-default"),""===e["default"]||null===e["default"]?(r=r.replace(/{{selected}}/g,"selected"),r=r.replace(/{{initial-answer}}/g,"")):(i=n.getPossibleAnswerLabel(e),r=r.replace(/{{selected}}/g,""),r=r.replace(/{{initial-answer}}/g,'<option value="'+e["default"]+'"  selected >'+i+"</option>")),r}var p,c,l,_,u=e,d=t.ref,f=t.type,m={is_checked_datetime_format_1:"",is_checked_datetime_format_2:"",is_checked_datetime_format_3:"",is_checked_datetime_format_4:"",is_checked_datetime_format_5:""},h=t.set_to_current_datetime?"checked":"";switch(f){case i.DROPDOWN_TYPE:u=a(t,u);break;case i.RADIO_TYPE:u=a(t,u);break;case i.CHECKBOX_TYPE:u=a(t,u);break;case i.INTEGER_TYPE:u=this.replaceCommonAdvancedProperties(u,t),o(f);break;case i.DECIMAL_TYPE:u=this.replaceCommonAdvancedProperties(u,t),o(f);break;case i.DATE_TYPE:r(i.DATE_TYPE);break;case i.TIME_TYPE:r(i.TIME_TYPE);break;case i.SEARCH_SINGLE_TYPE:s(i.SEARCH_SINGLE_TYPE),u=a(t,u);break;case i.SEARCH_MULTIPLE_TYPE:s(i.SEARCH_MULTIPLE_TYPE),u=a(t,u);break;default:u=this.replaceCommonAdvancedProperties(u,t)}return u};t.exports=o},{"config/consts":24,"helpers/utils":37}],75:[function(e,t,r){"use strict";var i=function(e,t){var r=e,i=t,n=[{to_be_replaced:/{{input-ref-default}}/g,with_this:i.ref+"-default"},{to_be_replaced:/{{input-ref-regex}}/g,with_this:i.ref+"-regex"},{to_be_replaced:/{{input-ref-double-entry}}/g,with_this:i.ref+"-double-entry"},{to_be_replaced:"{{input-ref-default-value}}",with_this:null===i["default"]?"":i["default"]},{to_be_replaced:"{{input-ref-regex-value}}",with_this:null===i.regex?"":i.regex},{to_be_replaced:"{{input-ref-double-entry-checked}}",with_this:i.verify?"checked":""}];return $(n).each(function(e,t){r=r.replace(t.to_be_replaced,t.with_this)}),r};t.exports=i},{}],76:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/messages"),o=e("actions/validation"),s=e("helpers/ui"),a=e("helpers/utils"),p=e("config/consts"),c=e("template"),l=e("config/toast"),_=e("ui-handlers/possible-answers-sortable"),u=function(){var t;return{cursor:"move",items:".input",revert:100,containment:"parent",tolerance:"pointer",placeholder:"input-collection-drop-placeholder",receive:function(r,n){var c,l=(i.current_form_index,i.branch.current_input_ref),_=a.getInputObjectByRef(i.current_input_ref).branch,u=a.generateBranchGroupInputRef(i.current_input_ref),d=(_.length,n.item.attr("data-type")),f=e("factory/input-factory");return d!==p.BRANCH_TYPE&&(i.branch.current_input_ref=u,l&&o.performValidation(a.getBranchInputObjectByRef(l),!1),i.branch.collection_is_being_sorted=!1,t=f.createInput(d,u),c=i.dom.inputs_collection_sortable.find(".active"),c.removeClass("active"),_.push(t),s.navbar.toggleSaveProjectBtn(p.BTN_DISABLED),void s.forms_tabs.showFormInvalidIcon(i.current_form_index))},stop:function(r,u){var d,f,m=e("actions/undo"),h=i.current_form_index,b=i.branch.current_input_ref,g=i.current_input_ref,v=a.getInputCurrentIndexByRef(g),E=i.project_definition.data.project.forms[h].inputs,I=E[v].branch,T=n.error.NO_QUESTION_TEXT_YET,A=u.item.attr("data-type");a.getInputsTotal(E)>=p.INPUTS_MAX_ALLOWED&&s.input_tools.disable(),A===p.BRANCH_TYPE?u.item.remove():(A!==p.SEARCH_SINGLE_TYPE||i.branch.collection_is_being_sorted||a.getSearchInputsTotal()>=p.LIMITS.search_inputs_max&&(s.input_tools.hideSearchInput(),void 0,l.showWarning(n.warning.SEARCH_INPUTS_LIMIT_REACHED+"("+p.LIMITS.search_inputs_max+")")),u.item.removeAttr("style"),i.branch.to_index=0===u.item.index()?u.item.index():u.item.index()-2,i.dom.input_properties_no_input_selected.hide(),i.branch.collection_is_being_sorted?(I.move(i.branch.from_index,i.branch.to_index),o.validateJumpsAfterSorting(I),u.item.addClass("active")):(i.branch.from_index=I.length-1,I.move(i.branch.from_index,i.branch.to_index),u.item.addClass("active"),u.item.attr("data-input-ref",b),u.item.find(".input-inner").append(s.inputs_collection.getInputStateIconsHTML()),u.item.find("span.question-preview").text(T),d=a.getInputObjectByRef(i.branch.active_branch_ref),s.inputs_collection.showInputInvalidIcon(d.ref),i.dom.input_properties.find(".panel-body form").hide(),i.dom.input_properties.find(".panel-title span").text(T),f=c.getInputPropertiesPanelHTML(t),i.dom.input_properties_forms_wrapper.hide(),$(f).removeClass("hidden").appendTo(i.dom.input_properties_forms_wrapper),i.dom.input_properties_forms_wrapper.fadeIn(p.ANIMATION_FAST),i.dom.input_properties_buttons.fadeIn(p.ANIMATION_FAST),t.type===p.GROUP_TYPE,_(t))),i.render_action=p.RENDER_ACTION_DO,m.pushState(),A===p.README_TYPE&&$(".summernote").summernote(p.SUMMERNOTE_OPTIONS),s.inputs_collection.toggleTitleWarning(a.getTitleCount(I),!0)},start:function(e,t){void 0,i.branch.collection_is_being_sorted=!0,i.branch.from_index=0===t.item.index()?0:t.item.index()-2,i.dom.inputs_collection_sortable.removeClass("active")},scroll:!0,snap:!1,over:function(e,t){var r=i.branch.active_branch_ref,n=a.getInputObjectByRef(r);0===n.branch.length&&i.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+r+'"]').find(".input-properties__no-branch-questions-message").hide()}}};t.exports=u()},{"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"factory/input-factory":31,"helpers/ui":36,"helpers/utils":37,template:62,"ui-handlers/possible-answers-sortable":99}],77:[function(e,t,r){"use strict";var i=e("../config/formbuilder"),n=function(){$("ul#inputs-tools-list li div.input").draggable({connectToSortable:".sortable",helper:function(e){var t=e||window.event;return"SPAN"===$(t.target).prop("tagName")||"I"===$(t.target).prop("tagName")?$(t.target).parent().parent().clone().css({width:$(t.target).parent().width()}):$(t.target).hasClass("input-inner")?$(t.target).parent().clone().css({width:$(t.target).width()}):$(t.target).clone().css({width:$(t.target).width()})},snap:!1,revert:"invalid",revertDuration:100,zIndex:9999,appendTo:"body",stop:function(){i.collection_is_being_sorted=!1},start:function(e,t){"SPAN"===$(e.target).prop("tagName")||"I"===$(e.target).prop("tagName")?$(this).width($(e.target).parent().width()):$(this).width($(e.target).width()),i.collection_is_being_sorted=!1},scroll:!0}).disableSelection()};t.exports=n},{"../config/formbuilder":26}],78:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/formbuilder"),o=e("helpers/utils"),s=e("actions/possible-answers-pager"),a=e("template/methods/getPossibleAnswersList"),p=function(e){var t,r,p,c=e.selectedHeaderIndex,l=e.input,_=e.importedJson,u=_.meta.fields,d=e.userWantstoReplaceAnswers,f=e.doesFirstRowContainsHeaders,m=i.LIMITS.possible_answers_max;if(l.type!==i.SEARCH_SINGLE_TYPE&&l.type!==i.SEARCH_MULTIPLE_TYPE||(m=i.LIMITS.possible_answers_max_search),null===c)return!1;if(d&&(l.possible_answers=[]),!f){var h={};h[_.meta.fields[c]]=_.meta.fields[c],_.data.unshift(h)}return $(_.data).each(function(e,t){var r=t[u[c]];return l.possible_answers.length<m&&void 0!==r?(r=r.replace(/(<([^>]+)>)/gi," "),r=r.replace(/"/gi,"&quot;"),""!==r.trim()&&(r.length>i.LIMITS.possible_answer_max_length&&(r=r.substring(0,i.LIMITS.possible_answer_max_length)),l.possible_answers.push({answer:r,answer_ref:o.generateUniqID()})),void 0):(void 0,!1)}),t=a(l.possible_answers),r=n.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+l.ref+'"]'),p=r.find(".input-properties__form__possible-answers div ul.input-properties__form__possible-answers__list"),p.empty().hide().append(t).fadeIn(i.ANIMATION_FAST),p.find("li div span button").prop("disabled",!1),l.possible_answers.length>i.LIMITS.possible_answers_per_page?(n.possible_answers_pagination[l.ref].page=1,s.init(l)):s.tearDown(l),!0};t.exports=p},{"actions/possible-answers-pager":12,"config/consts":24,"config/formbuilder":26,"helpers/utils":37,"template/methods/getPossibleAnswersList":71}],79:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("config/messages"),e("config/formbuilder")),o=e("helpers/ui"),s=(e("config/toast"),e("helpers/utils")),a=function(t){var r=(e("actions/undo"),n.project_definition.data.project.forms[n.current_form_index].inputs);n.dom.overlay.fadeIn(i.ANIMATION_FAST),$(r).each(function(e,t){n.dom.input_properties.find('div.panel-body form[data-input-ref="'+t.ref+'"]').fadeOut(i.ANIMATION_FAST).remove(),n.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+t.ref+'"]').fadeOut(i.ANIMATION_FAST).remove()}),n.project_definition.data.project.forms[n.current_form_index].inputs=[],n.dom.input_properties_no_input_selected.fadeIn(i.ANIMATION_FAST),n.dom.input_properties_buttons.fadeOut(i.ANIMATION_FAST),n.current_input_ref=void 0,s.getSearchInputsTotal()<=i.LIMITS.search_inputs_max-1&&o.input_tools.showSearchInput(),o.inputs_collection.toggleTitleWarning(1,!1),o.forms_tabs.showFormInvalidIcon(n.current_form_index),o.navbar.toggleSaveProjectBtn(i.BTN_DISABLED),n.dom.inputs_collection.find(".input-properties__no-questions-message").removeClass("hidden"),o.navbar.toggleUndoBtn(i.BTN_ENABLED),window.setTimeout(function(){n.dom.overlay.fadeOut(i.ANIMATION_FAST)},1e3)};t.exports=a},{"actions/undo":22,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"helpers/ui":36,"helpers/utils":37}],80:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/messages"),o=e("config/formbuilder"),s=e("helpers/ui"),a=e("helpers/utils"),p=e("actions/validation"),c=function(t){var r=e("actions/undo"),c=e("factory/form-factory"),l=o.current_form_ref,_=o.dom.forms_tabs.find(".active"),u=_.prev().find("a"),d=u.attr("href"),f=o.project_definition.data.project.forms;return 0===o.current_form_index?void toastr.error(n.error.FORM_CANNOT_BE_DELETED):o.current_form_index!==f.length-1?void toastr.error(n.error.FORM_CANNOT_BE_DELETED):(d=d.substring(1,d.length-9),u.on("shown.bs.tab",function(e){c.removeForm(d,l,_),toastr.warning(n.warning.FORM_DELETED),r.pushState(),u.off(),p.areAllInputsValid(o.project_definition)&&s.navbar.toggleSaveProjectBtn(i.BTN_ENABLED),a.getSearchInputsTotal()<=i.LIMITS.search_inputs_max&&s.input_tools.showSearchInput()}),c.unbindFormPanelsEvents(),c.updateFormbuilderDomReferences(d),c.bindFormPanelsEvents(),void _.prev().find("a").tab("show"))};t.exports=c},{"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"factory/form-factory":30,"helpers/ui":36,"helpers/utils":37}],81:[function(e,t,r){"use strict";var i=(e("config/consts"),e("config/messages")),n=e("config/formbuilder"),o=(e("helpers/ui"),e("helpers/utils")),s=(e("actions/validation"),e("config/toast")),a=function(t){var r=(e("actions/undo"),n.current_form_index),a={data:{id:"",type:"form",form:{}}},p=CircularJSON.parse(CircularJSON.stringify(n.project_definition)),c=!0,l=p.data.project.slug,_=p.data.project.forms[r],u=l+"__"+_.slug+"__form.json";if(0===_.inputs.length)return void s.showError(i.error.FORM_IS_INVALID);
if($(_.inputs).each(function(e,t){var r=o.getJumpAvailableDestinationsAsKeys(e,t,_.inputs,!1);$(t.jumps).each(function(e,t){r[t.to]||(c=!1)}),$(t.branch).each(function(e,i){i.dom.is_valid||(c=!1),delete i.dom,r=o.getJumpAvailableDestinationsAsKeys(e,i,t.branch,!0),$(i.jumps).each(function(e,t){r[t.to]||(c=!1)}),$(i.group).each(function(e,t){t.dom.is_valid||(c=!1),delete t.dom})}),$(t.group).each(function(e,t){t.dom.is_valid||(c=!1),delete t.dom}),t.dom.is_valid||(c=!1),delete t.dom}),a.data.id=_.ref,a.data.form=_,c){var d;try{d=new File([JSON.stringify(a)],u,{type:"text/plain:charset=utf-8"}),saveAs(d)}catch(f){if(void 0,navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([JSON.stringify(a)],{type:"text/plain:charset=utf-8"}),u);s.showError(i.error.BROWSER_NOT_SUPPORTED)}}else s.showError(i.error.FORM_IS_INVALID)};t.exports=a},{"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"helpers/ui":36,"helpers/utils":37}],82:[function(e,t,r){"use strict";var i=(e("config/consts"),e("config/messages"),e("config/formbuilder")),n=e("helpers/ui"),o=e("helpers/utils"),s=e("actions/validation"),a=e("factory/form-factory"),p=function(e){var t,r,p,c=$(this),l=c.attr("href"),_=c.attr("href").substring(1,l.length-9),u=i.project_definition.data.project.forms;if(!c.parent().hasClass("active")){i.current_input_ref&&(p=o.getInputObjectByRef(i.current_input_ref)),p&&s.performValidation(p,!1),a.unbindFormPanelsEvents(),a.updateFormbuilderDomReferences(_),a.bindFormPanelsEvents();var d=i.dom.inputs_collection_sortable.find(".active").attr("data-input-ref");i.current_form_index=parseInt(c.attr("data-form-index"),10),i.current_form_ref=u[i.current_form_index].ref,i.current_input_ref=d,r=i.current_form_index===u.length-1,r?i.dom.inputs_collection.find(".inputs-collection__buttons--remove-form").attr("disabled",!1):i.dom.inputs_collection.find(".inputs-collection__buttons--remove-form").attr("disabled",!0),t=u[i.current_form_index].inputs,0===o.getTitleCount(t)&&t.length>0&&n.inputs_collection.toggleTitleWarning(0,!1),0===t.length?(i.dom.inputs_collection.find(".inputs-collection__export-form").addClass("disabled"),i.dom.inputs_collection.find(".inputs-collection__print-as-pdf").addClass("disabled")):(i.dom.inputs_collection.find(".inputs-collection__export-form").removeClass("disabled"),i.dom.inputs_collection.find(".inputs-collection__print-as-pdf").removeClass("disabled")),s.areFormInputsValid(i.current_form_index)?(n.forms_tabs.showFormValidIcon(i.current_form_index),i.dom.inputs_collection.find(".inputs-collection__export-form").removeClass("disabled"),i.dom.inputs_collection.find(".inputs-collection__print-as-pdf").removeClass("disabled")):(i.dom.inputs_collection.find(".inputs-collection__export-form").addClass("disabled"),i.dom.inputs_collection.find(".inputs-collection__print-as-pdf").addClass("disabled"))}};t.exports=p},{"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"factory/form-factory":30,"helpers/ui":36,"helpers/utils":37}],83:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/messages"),o=e("config/formbuilder"),s=e("helpers/ui"),a=e("config/toast"),p=e("helpers/utils"),c=e("actions/validation"),l={getBranchInputsHTML:e("actions/parse/methods/getBranchInputsHTML"),getGroupInputsHTML:e("actions/parse/methods/getGroupInputsHTML"),renderInputs:e("actions/parse/methods/renderInputs"),renderProject:e("actions/parse/methods/renderProject"),renderChildForms:e("actions/parse/methods/renderChildForms"),initFormbuilder:e("actions/parse/methods/initFormbuilder")},_=e("helpers/import-form-validation"),u=e("ui-handlers/event-handler-callbacks/save-project-click-callback"),d=function(t){var r,d,f=e("actions/undo"),m=t[0];if(o.dom.overlay.fadeIn(i.ANIMATION_FAST),!m)return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID);if(r=m.name.split("."),d=r[r.length-1],void 0,d!==i.FORM_FILE_EXTENSION)return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID);var h=new FileReader;h.onload=function(e){var t,r,d,m,h,b=e.target.result;try{t=JSON.parse(b)}catch(g){return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID)}if(!_.hasValidFormStructure(t))return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID);if(h=t.data.form.inputs,0===h.length)return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID);if(!$.isArray(h))return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID);var v=!0;if($(h).each(function(e,r){if(!_.isValidInput(t.data.form.ref,r,!1,!1))return void 0,void 0,v=!1,!1}),!v)return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID);if(p.getInputsTotal(h)>i.INPUTS_MAX_ALLOWED)return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID);if(p.isMaxTitleLimitExceeded(h))return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID);var E=!0;if($(h).each(function(e,t){if(p.isMaxTitleLimitExceeded(t.branch))return E=!1,!1}),!E)return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID);if(!_.areJumpsDestinationsValid(h))return o.dom.overlay.fadeOut(i.ANIMATION_FAST),void toastr.error(n.error.FORM_FILE_INVALID);r=o.current_form_ref,d=t.data.form.ref,m=new RegExp(d,"g"),b=b.replace(m,r),t=JSON.parse(b),o.project_definition.data.project.forms[o.current_form_index].inputs=t.data.form.inputs.slice();var I=l.renderInputs(t.data.form.inputs);I.length>0&&o.dom.inputs_collection.find(".input-properties__no-questions-message").addClass("hidden"),0===p.getTitleCount(I)&&s.inputs_collection.toggleTitleWarning(0,!1),c.areFormInputsValid(o.current_form_index)&&(s.forms_tabs.showFormValidIcon(o.current_form_index),o.dom.inputs_collection.find(".inputs-collection__export-form").removeClass("disabled"),o.dom.inputs_collection.find(".inputs-collection__print-as-pdf").removeClass("disabled")),o.project_definition.data.project.forms[o.current_form_index].inputs=I.slice(),c.areAllInputsValid(o.project_definition)&&(s.navbar.toggleSaveProjectBtn(i.BTN_ENABLED),o.current_input_ref=null,o.dom.save_project_btn.off().on("click",u)),p.getSearchInputsTotal()>=i.LIMITS.search_inputs_max&&(s.input_tools.hideSearchInput(),a.showWarning(n.warning.SEARCH_INPUTS_LIMIT_REACHED+"("+i.LIMITS.search_inputs_max+")")),window.setTimeout(function(){o.dom.overlay.fadeOut(i.ANIMATION_SLOW),toastr.success(n.success.FORM_IMPORTED),f.pushState()},i.ANIMATION_SLOW)},h.readAsText(m)};t.exports=d},{"actions/parse/methods/getBranchInputsHTML":6,"actions/parse/methods/getGroupInputsHTML":7,"actions/parse/methods/initFormbuilder":8,"actions/parse/methods/renderChildForms":9,"actions/parse/methods/renderInputs":10,"actions/parse/methods/renderProject":11,"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"helpers/import-form-validation":35,"helpers/ui":36,"helpers/utils":37,"ui-handlers/event-handler-callbacks/save-project-click-callback":97}],84:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("helpers/ui"),o=e("helpers/utils"),s=e("config/messages"),a=e("config/formbuilder"),p=(e("actions/save"),e("actions/validation")),c=e("ui-handlers/possible-answers-sortable"),l=e("actions/possible-answers-pager"),_=function(e){void 0;var t,r=$(this),_=r.attr("data-input-ref"),u=o.getBranchInputObjectByRef(_),d=o.getBranchInputObjectByRef(a.branch.current_input_ref),f=o.getInputObjectByRef(a.current_input_ref).branch;if(a.is_editing_branch&&a.is_editing_group){if(!r.hasClass("fa-chevron-left"))return!1;var m=o.getBranchInputObjectByRef(a.branch.current_input_ref);m.exitNestedGroupSortable()}else a.dom.inputs_collection_sortable.find(".active-branch .branch-sortable").find(".active").removeClass("active"),r.addClass("active"),d&&p.performValidation(d,!1),u.question?u.type===i.README_TYPE?(t=o.decodeHtml(u.question),t=t.replace(/(<([^>]+)>)/gi," "),a.dom.input_properties.find(".panel-title span.question-preview").text(t.trunc(20))):a.dom.input_properties.find(".panel-title span.question-preview").text(u.question.trunc(20)):a.dom.input_properties.find(".panel-title span.question-preview").text(s.error.NO_QUESTION_TEXT_YET),o.isMaxTitleLimitReached(f)?u.is_title||n.input_properties_panel.toggleTitleCheckbox(i.DISABLED_STATE,_):n.input_properties_panel.toggleTitleCheckbox(i.ENABLED_STATE,_),a.dom.input_properties.find(".panel-body form").hide(),a.dom.input_properties.find('.panel-body form[data-input-ref="'+_+'"]').removeClass("hidden").fadeIn(i.ANIMATION_NORMAL),a.dom.input_properties_forms_wrapper.find(".input-properties__no-input-selected").hide(),$.inArray(u.type,i.MULTIPLE_ANSWER_TYPES)>-1&&(u.possible_answers.length>i.LIMITS.possible_answers_per_page?l.init(u):l.tearDown(u)),a.dom.input_properties_buttons.fadeIn(i.ANIMATION_FAST),a.branch.current_input_ref=_,c(u);u.type===i.README_TYPE&&$(".summernote").summernote(i.SUMMERNOTE_OPTIONS)};t.exports=_},{"actions/possible-answers-pager":12,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/ui":36,"helpers/utils":37,"ui-handlers/possible-answers-sortable":99}],85:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("helpers/ui"),o=e("helpers/utils"),s=e("config/messages"),a=e("config/formbuilder"),p=(e("actions/save"),e("actions/validation")),c=e("ui-handlers/possible-answers-sortable"),l=e("actions/possible-answers-pager"),_=function(e){void 0;var t,r=$(this),_=r.attr("data-input-ref"),u=o.getGroupInputObjectByRef(_),d=o.getGroupInputObjectByRef(a.group.current_input_ref),f=a.project_definition.data.project.forms[a.current_form_index].inputs;a.dom.inputs_collection_sortable.find(".active-group .group-sortable").find(".active").removeClass("active"),r.addClass("active"),d&&p.performValidation(d,!1),u.question?u.type===i.README_TYPE?(t=o.decodeHtml(u.question),t=t.replace(/(<([^>]+)>)/gi," "),a.dom.input_properties.find(".panel-title span.question-preview").text(t.trunc(20))):a.dom.input_properties.find(".panel-title span.question-preview").text(u.question.trunc(20)):a.dom.input_properties.find(".panel-title span.question-preview").text(s.error.NO_QUESTION_TEXT_YET),o.isMaxTitleLimitReached(f)?u.is_title||n.input_properties_panel.toggleTitleCheckbox(i.DISABLED_STATE,_):n.input_properties_panel.toggleTitleCheckbox(i.ENABLED_STATE,_),a.dom.input_properties.find(".panel-body form").hide(),a.dom.input_properties.find('.panel-body form[data-input-ref="'+_+'"]').removeClass("hidden").fadeIn(i.ANIMATION_NORMAL),a.dom.input_properties_forms_wrapper.find(".input-properties__no-input-selected").hide(),$.inArray(u.type,i.MULTIPLE_ANSWER_TYPES)>-1&&(u.possible_answers.length>i.LIMITS.possible_answers_per_page?l.init(u):l.tearDown(u)),a.dom.input_properties_buttons.fadeIn(i.ANIMATION_FAST),a.group.current_input_ref=_,u.type===i.README_TYPE&&$(".summernote").summernote(i.SUMMERNOTE_OPTIONS),c(u)};t.exports=_},{"actions/possible-answers-pager":12,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/ui":36,"helpers/utils":37,"ui-handlers/possible-answers-sortable":99}],86:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("helpers/ui"),o=e("helpers/utils"),s=e("config/messages"),a=e("config/formbuilder"),p=e("actions/validation"),c=e("ui-handlers/possible-answers-sortable"),l=e("actions/possible-answers-pager"),_=function(e){var t,r=$(this),_=r.attr("data-input-ref"),u=o.getInputObjectByRef(a.branch.active_branch_ref),d=o.getNestedGroupInputObjectByRef(u,_),f=o.getNestedGroupInputObjectByRef(u,a.group.current_input_ref),m=o.getInputObjectByRef(a.current_input_ref).branch;a.dom.inputs_collection_sortable.find(".active-group .group-sortable").find(".active").removeClass("active"),r.addClass("active"),f&&p.performValidation(f,!1),d.question?d.type===i.README_TYPE?(t=o.decodeHtml(d.question),t=t.replace(/(<([^>]+)>)/gi," "),a.dom.input_properties.find(".panel-title span.question-preview").text(t.trunc(20))):a.dom.input_properties.find(".panel-title span.question-preview").text(d.question.trunc(20)):a.dom.input_properties.find(".panel-title span.question-preview").text(s.error.NO_QUESTION_TEXT_YET),o.isMaxTitleLimitReached(m)?d.is_title||n.input_properties_panel.toggleTitleCheckbox(i.DISABLED_STATE,_):n.input_properties_panel.toggleTitleCheckbox(i.ENABLED_STATE,_),a.dom.input_properties.find(".panel-body form").hide(),a.dom.input_properties.find('.panel-body form[data-input-ref="'+_+'"]').removeClass("hidden").fadeIn(i.ANIMATION_NORMAL),a.dom.input_properties_forms_wrapper.find(".input-properties__no-input-selected").hide(),$.inArray(d.type,i.MULTIPLE_ANSWER_TYPES)>-1&&(d.possible_answers.length>i.LIMITS.possible_answers_per_page?l.init(d):l.tearDown(d)),a.dom.input_properties_buttons.fadeIn(i.ANIMATION_FAST),a.group.current_input_ref=_,d.type===i.README_TYPE&&$(".summernote").summernote(i.SUMMERNOTE_OPTIONS),c(d)};t.exports=_},{"actions/possible-answers-pager":12,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/ui":36,"helpers/utils":37,"ui-handlers/possible-answers-sortable":99}],87:[function(e,t,r){"use strict";function i(e){var t,r=e;c.branch.current_input_ref&&(t=a.getBranchInputObjectByRef(c.branch.current_input_ref),l.performValidation(t,!1)),r.exitBranchSortable()}function n(e){var t,r=e;c.group.current_input_ref&&(t=a.getGroupInputObjectByRef(c.group.current_input_ref),l.performValidation(t,!1),r.validateGroupInputs()),r.exitGroupSortable()}var o=e("config/consts"),s=e("helpers/ui"),a=e("helpers/utils"),p=e("config/messages"),c=e("config/formbuilder"),l=(e("actions/save"),e("actions/validation")),_=(e("ui-handlers/event-handler-callbacks/input-properties-keyup-callback"),e("actions/jumps")),u=e("actions/possible-answers-pager"),d=e("ui-handlers/possible-answers-sortable"),f=function(e){var t=$(":focus"),r=t.attr("data-jump-logic");"goto"===r&&t.blur();var f,m,h,b,g,v=$(this),E=c.project_definition.data.project.forms[c.current_form_index].inputs;if(c.is_editing_branch||c.is_editing_group){if(!v.hasClass("chevron-left"))return!1;m=v.parents().eq(1).attr("data-input-ref"),h=a.getInputObjectByRef(m),c.is_editing_branch?i(h):n(h)}else f=a.getInputObjectByRef(c.current_input_ref),m=v.attr("data-input-ref"),h=a.getInputObjectByRef(m),d(h),f&&l.performValidation(f,!1),c.dom.inputs_collection_sortable.find(".active").removeClass("active"),v.addClass("active"),h.question?h.type===o.README_TYPE?(b=a.decodeHtml(h.question),b=b.replace(/(<([^>]+)>)/gi," "),c.dom.input_properties.find(".panel-title span.question-preview").text(b.trunc(20))):c.dom.input_properties.find(".panel-title span.question-preview").text(h.question.trunc(20)):c.dom.input_properties.find(".panel-title span.question-preview").text(p.error.NO_QUESTION_TEXT_YET);c.current_form_index>0&&(c.is_editing_branch||(h.dom.advanced_properties_wrapper=c.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+h.ref+'"]').find(".input-properties__form__advanced-properties"),h.dom.advanced_properties_wrapper.find(".input-properties__form__advanced-properties__uniqueness input").off().on("change",function(){var e=$(this).prop("checked");$(this).parents(".input-properties__form__advanced-properties__uniqueness").find('input[type="checkbox"]').prop("checked",!1),$(this).prop("checked",e)}))),a.isMaxTitleLimitReached(E)?h.is_title||s.input_properties_panel.toggleTitleCheckbox(o.DISABLED_STATE,m):s.input_properties_panel.toggleTitleCheckbox(o.ENABLED_STATE,m),h.jumps.length>0&&_.refreshInputJumpsDom(h,E),c.dom.input_properties.find(".panel-body form").css("display","none"),c.dom.input_properties.find('.panel-body form[data-input-ref="'+m+'"]').removeClass("hidden").fadeIn(o.ANIMATION_NORMAL),$.inArray(h.type,o.MULTIPLE_ANSWER_TYPES)>-1&&(h.possible_answers.length>o.LIMITS.possible_answers_per_page?u.init(h):u.tearDown(h)),c.dom.input_properties_buttons.fadeIn(o.ANIMATION_FAST),c.dom.input_properties_no_input_selected.hide(),c.current_input_ref=m,h.type===o.README_TYPE&&$(".summernote").summernote(o.SUMMERNOTE_OPTIONS),g=h.dom.is_valid?o.BTN_ENABLED:o.BTN_DISABLED,s.input_properties_panel.toggleCopyInputButton(h.ref,g)};t.exports=f},{"actions/jumps":4,"actions/possible-answers-pager":12,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/ui":36,"helpers/utils":37,"ui-handlers/event-handler-callbacks/input-properties-keyup-callback":92,"ui-handlers/possible-answers-sortable":99}],88:[function(e,t,r){"use strict";var i=(e("config/consts"),e("config/messages"),e("config/formbuilder")),n=e("helpers/utils"),o=function(e){var t=n.getInputObjectByRef(i.current_input_ref);void 0,void 0,t.dom.properties_panel=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+t.ref+'"]');var r=t.dom.properties_panel.find(".input-properties__form__advanced-properties").find(".input-properties__form__advanced-properties__default").find("select").find(":selected");void 0,r.val()===t["default"]&&""!==t["default"]&&r.text(n.getPossibleAnswerLabel(t)),void 0,void 0};t.exports=o},{"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/utils":37}],89:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=(e("helpers/ui"),e("helpers/utils")),o=function(){var e,t=n.getInputObjectByRef(i.current_input_ref);i.is_editing_branch?(t=n.getBranchInputObjectByRef(i.branch.current_input_ref),i.is_editing_group&&(e=n.getInputObjectByRef(i.branch.active_branch_ref),t=n.getNestedGroupInputObjectByRef(e,i.group.current_input_ref))):i.is_editing_group&&(t=n.getGroupInputObjectByRef(i.group.current_input_ref)),$(this).attr("data-jump-logic")&&void 0,$(this).attr("data-initial-answer")&&(void 0,t.updatePossibleInitialAnswers())};t.exports=o},{"config/formbuilder":26,"helpers/ui":36,"helpers/utils":37}],90:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("helpers/ui"),o=e("helpers/utils"),s=e("config/messages"),a=e("config/formbuilder"),p=e("actions/validation"),c=e("actions/input-duplicator"),l=e("config/toast"),_=function(t){function r(){return a.is_editing_branch&&a.is_editing_group?(m=o.getInputObjectByRef(a.branch.active_branch_ref),E=o.getNestedGroupInputObjectByRef(m,a.group.current_input_ref)):(a.is_editing_branch&&(E=o.getBranchInputObjectByRef(a.branch.current_input_ref)),a.is_editing_group&&(E=o.getGroupInputObjectByRef(a.group.current_input_ref))),E}function _(){var e=o.getInputObjectByRef(a.branch.active_branch_ref);e.branch.length>0?p.performValidation(e.branch[0],!1):(n.forms_tabs.showFormInvalidIcon(a.current_form_index),n.navbar.toggleSaveProjectBtn(i.BTN_DISABLED),a.dom.save_project_btn.off("click"))}function u(){var e=a.current_form_index;a.project_definition.data.project.forms[e].inputs.length>0?(d=a.project_definition.data.project.forms[e].inputs[0].ref,d&&p.performValidation(o.getInputObjectByRef(d),!1)):(n.forms_tabs.showFormInvalidIcon(a.current_form_index),n.navbar.toggleSaveProjectBtn(i.BTN_DISABLED),a.dom.save_project_btn.off("click"),a.dom.inputs_collection.find(".input-properties__no-questions-message").removeClass("hidden"))}void 0;var d,f,m,h,b=e("actions/undo"),g=e("actions/possible-answers"),v=e("factory/input-factory"),E=o.getInputObjectByRef(a.current_input_ref),I=$(this),T=a.current_form_index,A=a.project_definition.data.project.forms[T].inputs;if(a.render_action=i.RENDER_ACTION_DO,E.dom.advanced_properties_wrapper=a.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+E.ref+'"]').find(".input-properties__form__advanced-properties"),I.hasClass("input-properties__buttons--remove-input")){if($("ul#inputs-tools-list li div.input").hasClass("dragging-disabled")&&n.input_tools.enable(),n.navbar.toggleSaveProjectBtn(i.BTN_ENABLED),a.is_editing_branch&&a.is_editing_group)return v.removeNestedGroupInput(a.branch.active_branch_ref,a.group.current_input_ref),toastr.warning(s.warning.INPUT_DELETED),u(),void b.pushState();if(a.is_editing_branch&&a.is_editing_group);else{if(a.is_editing_branch)return v.removeBranchInput(E.ref,a.branch.current_input_ref),toastr.warning(s.warning.INPUT_DELETED),_(),void b.pushState();if(a.is_editing_group)return v.removeGroupInput(E.ref,a.group.current_input_ref),toastr.warning(s.warning.INPUT_DELETED),void b.pushState()}return v.removeInput(E.ref),toastr.warning(s.warning.INPUT_DELETED),u(),b.pushState(),void(0===A.length&&(a.dom.inputs_collection.find(".input-properties__no-questions-message").hide().removeClass("hidden").fadeIn(),n.inputs_collection.toggleTitleWarning(1,!1),a.dom.inputs_collection.find(".inputs-collection__export-form").addClass("disabled"),a.dom.inputs_collection.find(".inputs-collection__print-as-pdf").addClass("disabled")))}if(I.hasClass("input-properties__buttons--copy-input")){void 0;var w,P=o.getSearchInputsTotal();if(E=r(),!E.dom.is_valid)return void l.showError(s.error.INPUT_NOT_VALID);if(o.getInputsTotal(A)>=i.INPUTS_MAX_ALLOWED)return l.showError(s.error.MAX_QUESTIONS_LIMIT_REACHED+" ("+i.INPUTS_MAX_ALLOWED+")"),void n.input_tools.disable();if(E.type===i.SEARCH_SINGLE_TYPE||E.type===i.SEARCH_MULTIPLE_TYPE){if(P===i.LIMITS.search_inputs_max)return void l.showError(s.warning.SEARCH_INPUTS_LIMIT_REACHED+"("+i.LIMITS.search_inputs_max+")");P===i.LIMITS.search_inputs_max-1&&n.input_tools.hideSearchInput()}a.dom.overlay.fadeIn(),w=c.createInputCopy(E),c.pushInput(w),c.appendInputToDom(w),window.setTimeout(function(){a.dom.overlay.fadeOut(i.ANIMATION_FAST,function(){l.showSuccess(s.success.INPUT_COPIED)})},i.ANIMATION_SLOW)}if(I.hasClass("input-properties__buttons--validate-input")&&p.performValidation(r(),!0),I.hasClass("input-properties__form__possible-answers__add-answer")){var N=i.LIMITS.possible_answers_max;E=r(),E.type!==i.SEARCH_SINGLE_TYPE&&E.type!==i.SEARCH_MULTIPLE_TYPE||(N=i.LIMITS.possible_answers_max_search),E.possible_answers.length<N&&(E.addPossibleAnswer(),b.pushState())}if(I.hasClass("input-properties__form__possible-answers__list__remove-answer")&&(E=r(),E.possible_answers.length>=2&&(E.removePossibleAnswer(I.closest("li").index()),b.pushState())),I.hasClass("input-properties__form__jumps__add-jump")&&(E=r(),n.navbar.toggleSaveProjectBtn(i.BTN_DISABLED),E.dom.is_valid=!1,n.inputs_collection.showInputInvalidIcon(E.ref),n.forms_tabs.showFormInvalidIcon(a.current_form_index),E.addJump(),b.pushState()),I.hasClass("input-properties__form__jumps__remove-jump")&&(E=r(),E.removeJump(I),p.performValidation(E,!1),b.pushState()),I.hasClass("input-properties__form__edit-branch")&&(I.attr("disabled",!0),E.enterBranchSortable()),I.hasClass("input-properties__form__exit-branch-editing")&&(I.attr("disabled",!0),I.prev(".input-properties__form__edit-branch").attr("disabled",!1),E.exitBranchSortable()),I.hasClass("input-properties__form__edit-group")&&(I.attr("disabled",!0),a.is_editing_branch?(f=o.getBranchInputObjectByRef(a.branch.current_input_ref),f&&(E=f,E.enterGroupSortable(!0))):E.enterGroupSortable(!1)),I.hasClass("input-properties__form__exit-group-editing")&&(I.attr("disabled",!0),I.prev(".input-properties__form__edit-branch").attr("disabled",!1),a.is_editing_branch?(f=o.getBranchInputObjectByRef(a.branch.current_input_ref),f&&(E=f,E.exitGroupSortable(!0))):E.exitGroupSortable(!1)),I.hasClass("possible_answers__export-csv")&&(a.dom.overlay.fadeIn(0),h=g.exportPossibleAnswersCSV(),window.setTimeout(function(){if(a.dom.overlay.fadeOut(i.ANIMATION_FAST),h){var e;try{e=new File([h.data],h.filename,{type:"text/plain:charset=utf-8"}),saveAs(e)}catch(t){if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([h.data],{type:"text/plain:charset=utf-8"}),h.filename);l.showError(s.error.BROWSER_NOT_SUPPORTED)}}else l.showError(s.error.POSSIBLE_ANSWERS_INVALID)},i.ANIMATION_SUPER_SLOW)),I.hasClass("possible_answers__import-csv")){if(!a.isOpeningFileBrowser){var O=I.find(".possible_answers__import-csv-input-file");a.isOpeningFileBrowser=!0,O.off("change").on("change",function(){g.importCSVFile(this.files),$(this).val(null)}),I.find(".possible_answers__import-csv-input-file").trigger("click")}window.setTimeout(function(){a.isOpeningFileBrowser=!1},3e3)}I.hasClass("possible_answers__delete-all")&&g.deleteAllAnswers(),I.hasClass("possible_answers__order-az")&&g.orderPossibleAnswers(i.POSSIBLE_ANSWERS_ORDER.AZ),I.hasClass("possible_answers__order-za")&&g.orderPossibleAnswers(i.POSSIBLE_ANSWERS_ORDER.ZA),I.hasClass("possible_answers__order-shuffle")&&g.orderPossibleAnswers(i.POSSIBLE_ANSWERS_ORDER.SHUFFLE)};t.exports=_},{"actions/input-duplicator":3,"actions/possible-answers":13,"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"factory/input-factory":31,"helpers/ui":36,"helpers/utils":37}],91:[function(e,t,r){"use strict";var i=(e("config/consts"),e("helpers/ui"),e("helpers/utils")),n=e("actions/jumps"),o=(e("config/messages"),e("config/formbuilder")),s=function(e){var t,r,s=i.getInputObjectByRef(o.current_input_ref),a=o.project_definition.data.project.forms[o.current_form_index].inputs;if(o.is_editing_branch?(a=s.branch,s=i.getBranchInputObjectByRef(o.branch.current_input_ref),o.is_editing_group&&(a=s.group,r=i.getInputObjectByRef(o.branch.active_branch_ref),s=i.getNestedGroupInputObjectByRef(r,o.group.current_input_ref))):o.is_editing_group&&(a=s.group,s=i.getGroupInputObjectByRef(o.group.current_input_ref)),t=i.getJumpAvailableDestinations(s,a),$(this).attr("data-jump-logic")){var p=$(this),c=p.attr("id"),l=c.split("-");switch(l.shift(),c=l.join("-")){case s.ref+"-logic-when":n.listJumpConditions(p);break;case s.ref+"-logic-answer":n.listJumpPossibleAnswers(p,s);break;case s.ref+"-logic-goto":n.listJumpDestinations(p,t)}}else s.listPossibleInitialAnswers()};t.exports=s},{"actions/jumps":4,"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/ui":36,"helpers/utils":37}],92:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("helpers/ui"),e("helpers/utils")),o=(e("actions/jumps"),e("config/messages"),e("config/formbuilder")),s=e("actions/validation"),a=function(t){function r(){p.dom.is_valid=!0,s.performValidation(p,!1),_[0].selectionEnd=d}function a(){var e,t=n.getInputObjectByRef(o.current_input_ref);return o.is_editing_branch&&o.is_editing_group?(e=n.getInputObjectByRef(o.branch.active_branch_ref),t=n.getNestedGroupInputObjectByRef(e,o.group.current_input_ref)):(o.is_editing_branch&&(t=n.getBranchInputObjectByRef(o.branch.current_input_ref)),o.is_editing_group&&(t=n.getGroupInputObjectByRef(o.group.current_input_ref))),t}if(37!==t.which&&39!==t.which){var p,c,l,_=$(this),u=e("actions/undo"),d=_[0].selectionStart;p=a(),p.dom.properties_panel=o.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+p.ref+'"]'),p.hideQuestionErrors(),_.parent().hasClass("input-properties__form__question")&&(p.question=$(this).val(),c=p.type===i.BRANCH_TYPE||p.type===i.GROUP_TYPE?p.isHeaderTextValid():p.isQuestionTextValid(),c.is_valid?p.type===i.BRANCH_TYPE||p.type===i.GROUP_TYPE?(p.toggleEditButton(!0),p.type===i.BRANCH_TYPE&&0===p.branch.length&&(p.dom.is_valid=!1),p.type===i.GROUP_TYPE&&0===p.group.length&&(p.dom.is_valid=!1),p.dom.is_valid&&r()):r():(p.dom.is_valid=!1,p.showQuestionErrors(c.error.message),p.type!==i.BRANCH_TYPE&&p.type!==i.GROUP_TYPE||p.toggleEditButton(!1),s.performValidation(p,!1),_[0].selectionEnd=d)),_.parent().hasClass("input-properties__form__possible-answers__list__possible_answer_item")&&(l=s.isPossibleAnswerValid(_.val()),l.is_valid?r():(p.dom.is_valid=!1,p.showPossibleAnswerErrors(_.parent().parent(),l.error.message),s.performValidation(p,!1),_[0].selectionEnd=d)),u.pushState(!0)}};t.exports=a},{"actions/jumps":4,"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"helpers/ui":36,"helpers/utils":37}],93:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("helpers/ui"),o=e("helpers/utils"),s=e("actions/save"),a=function(){var e,t,r,a=[];i.is_editing_branch?(r=o.getInputObjectByRef(i.branch.active_branch_ref),t=i.is_editing_group?o.getNestedGroupInputObjectByRef(r,i.group.current_input_ref):o.getBranchInputObjectByRef(i.branch.current_input_ref),s.saveProperties(t),a=r.branch,e=o.getTitleCount(a),n.inputs_collection.toggleTitleWarning(e,!0)):(t=i.is_editing_group?o.getGroupInputObjectByRef(i.group.current_input_ref):o.getInputObjectByRef(i.current_input_ref),s.saveProperties(t),a=i.project_definition.data.project.forms[i.current_form_index].inputs,e=o.getTitleCount(a),n.inputs_collection.toggleTitleWarning(e,!1))};t.exports=a},{"actions/save":14,"config/formbuilder":26,"helpers/ui":36,"helpers/utils":37}],94:[function(e,t,r){"use strict";var i=(e("config/messages"),e("actions/validation")),n=e("actions/errors"),o=e("config/formbuilder"),s=e("config/consts"),a=e("helpers/ui"),p=e("helpers/utils"),c=e("factory/form-factory"),l=e("ui-handlers/event-handler-callbacks/save-project-click-callback"),_=e("actions/undo"),u=function(e){var t,r,u,d=$(e.relatedTarget),f=$(this),m=!1;f.html(o.dom.partials.modal_edit_form_name),t=f.find(".modal-body input"),t.on("keyup",function(){void 0}),d.hasClass("main__tabs_add-form")?(void 0,m=!0,r=p.generateFormRef(),u=o.project_definition.data.project.forms.length):(t.val(o.project_definition.data.project.forms[o.current_form_index].name),r=o.current_form_ref),$(".main__modal--edit-form-name__save-btn").off().on("click",function(){var e,d=t.val(),h=o.current_form_index,b=o.project_definition.data.project.forms;n.hideFormNameErrors(f),e=i.isFormNameValid(d,m),e.is_valid?($(this).off().attr("disabled",!0),m?(c.createChildForm(d,r,u,!0),a.navbar.toggleSaveProjectBtn(s.BTN_DISABLED),_.pushState()):(o.project_definition.data.project.forms[h].name=d,o.project_definition.data.project.forms[h].slug=p.slugify(d),o.dom.inputs_collection.find(".inputs-collection__header__element-name").text(d.trunc(s.TAB_FORM_NAME_MAX_DISPLAY_LENGHT-2*b.length)),o.dom.forms_tabs.find(".active a").text(d.trunc(s.TAB_FORM_NAME_MAX_DISPLAY_LENGHT-2*b.length)).append('&nbsp;<i class="form-state fa fa-check"></i>'),a.navbar.toggleSaveProjectBtn(s.BTN_ENABLED),o.dom.save_project_btn.off().on("click",l)),o.project_definition.data.project.forms.length===s.MAX_NUMBER_OF_NESTED_CHILD_FORMS&&o.dom.forms_tabs.find(".main__tabs_add-form").parent().hide(),a.forms_tabs.resizeFormTabs(),window.setTimeout(function(){f.modal("hide"),$(".modal-backdrop").remove()},100)):n.showFormNameErrors(f,e.error.message)})};t.exports=u},{"actions/errors":2,"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"factory/form-factory":30,"helpers/ui":36,"helpers/utils":37,"ui-handlers/event-handler-callbacks/save-project-click-callback":97}],95:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/consts"),o=function(){var e=$(this);e.find(".table").off().on("click",".btn",function(){var t,r=$(this);t=i.is_editing_group?i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+i.group.current_input_ref+'"]').find(".input-properties__form__advanced-properties__regex input"):i.is_editing_branch?i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+i.branch.current_input_ref+'"]').find(".input-properties__form__advanced-properties__regex input"):i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+i.current_input_ref+'"]').find(".input-properties__form__advanced-properties__regex input"),
t.val(n.REGEX[r.attr("data-apply-regex")]),e.modal("hide")})};t.exports=o},{"config/consts":24,"config/formbuilder":26}],96:[function(e,t,r){"use strict";var i=e("config/consts"),n=e("config/messages"),o=e("config/formbuilder"),s=(e("helpers/ui"),e("helpers/utils")),a=(e("actions/validation"),e("config/toast")),p=function(e){function t(e){e.type===i.README_TYPE&&(e.question=s.decodeHtml(e.question),e.question=e.question.replace(/(<([^>]+)>)/gi," "),p+="<hr/>"),p+='<h4 class="question">'+e.question+"</h4>",e.type===i.TEXTAREA_TYPE?(p+='<table border="1" width="100%">',p+="<tr><td></td></td></tr>",p+="<tr><td></td></td></tr>",p+="<tr><td></td></td></tr>",p+="<tr><td></td></td></tr>",p+="</table>"):e.type!==i.README_TYPE?(p+='<table border="1" width="100%">',p+="<tr><td></td></td></tr>",p+="</table>"):p+="<hr/>"}function r(e){$.each(e.possible_answers,function(t,r){switch(e.type){case i.SEARCH_SINGLE_TYPE:case i.SEARCH_MULTIPLE_TYPE:0===t&&(p+='<ul class="possible-answers-list">'),p+="<li><h5>"+r.answer+"</h5></li>",t===e.possible_answers.length-1&&(p+="</ul>");break;case i.DROPDOWN_TYPE:case i.RADIO_TYPE:p+='<div class="radio-type"><h5>',p+='<input type="radio"  value="'+r.answer+'">',p+='<label for="'+r.answer+'">'+r.answer+"</label>",p+="</h5></div>";break;case i.CHECKBOX_TYPE:p+='<div class="checkbox-type"><h5>',p+='<input type="checkbox"  value="'+r.answer+'">',p+='<label for="'+r.answer+'">'+r.answer+"</label>",p+="</h5></div>"}})}var p="";p+="";var c=o.current_form_index,l=CircularJSON.parse(CircularJSON.stringify(o.project_definition)),_=!0,u=(l.data.project.slug,l.data.project.forms[c]);return 0===u.inputs.length?void a.showError(n.error.FORM_IS_INVALID):(p+="<h2>"+l.data.project.name+"</h2>",p+="<h3>"+u.name+"</h3>",$(u.inputs).each(function(e,n){var o=s.getJumpAvailableDestinationsAsKeys(e,n,u.inputs,!1);switch($(n.jumps).each(function(e,t){o[t.to]||(_=!1)}),n.type){case i.BRANCH_TYPE:p+='<h4 class="branch-header">'+n.question+"</h4>",p+='<table border="1" cellpadding="10" cellspacing="10">',p+="<tr>",p+="<td>",$(n.branch).each(function(e,a){a.dom.is_valid||(_=!1),delete a.dom,o=s.getJumpAvailableDestinationsAsKeys(e,a,n.branch,!0),$(a.jumps).each(function(e,t){o[t.to]||(_=!1)}),$.inArray(a.type,i.MULTIPLE_ANSWER_TYPES)!==-1?(p+='<h4 class="question">'+a.question+"</h4>",r(a)):t(a),$(a.group).each(function(e,n){n.dom.is_valid||(_=!1),delete n.dom,$.inArray(n.type,i.MULTIPLE_ANSWER_TYPES)!==-1?(p+='<h4 class="question">'+n.question+"</h4>",r(n)):t(n)})}),p+="</td>",p+="</tr>",p+="</table>";break;case i.GROUP_TYPE:p+='<h4 class="group-header">'+n.question+"</h4>",p+='<table border="1" cellpadding="10" cellspacing="10">',p+="<tr>",p+="<td>",$(n.group).each(function(e,n){n.dom.is_valid||(_=!1),delete n.dom,$.inArray(n.type,i.MULTIPLE_ANSWER_TYPES)!==-1?(p+='<h4 class="question">'+n.question+"</h4>",r(n)):t(n)}),p+="</td>",p+="</tr>",p+="</table>";break;default:$.inArray(n.type,i.MULTIPLE_ANSWER_TYPES)!==-1?(p+='<h4 class="question">'+n.question+"</h4>",r(n)):t(n)}n.dom.is_valid||(_=!1),delete n.dom}),void(_?($(".print-preview-wrapper").empty().append(p),window.print()):a.showError(n.error.FORM_IS_INVALID)))};t.exports=p},{"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"helpers/ui":36,"helpers/utils":37}],97:[function(e,t,r){"use strict";var i=e("config/consts"),n=(e("helpers/ui"),e("helpers/utils")),o=e("config/messages"),s=e("config/formbuilder"),a=(e("actions/jumps"),e("actions/save")),p=e("config/toast"),c=function(t){var r="../postdump/index.php",c=e("actions/validation"),l=n.getCurrentlySelectedInput();l&&c.performValidation(n.getCurrentlySelectedInput(),!1);var _=Flatted.parse(Flatted.stringify(s.project_definition)),u=a.doCleaningBeforeSaving(_.data.project.forms);if(u.all_jumps_valid&&""===u.invalid_jumps_question){var d={is_valid:!0,error:{message:null}};if($(_.data.project.forms).each(function(t,r){var i=e("actions/validation").validateBeforeSaving;if(d=i(r.ref,r.inputs),!d.is_valid)return!1}),!d.is_valid)return p.showError(d.error.message),!1;s.dom.overlay.fadeIn(i.ANIMATION_FAST),window.location.href.indexOf("localhost/")!==-1&&window.location.href.indexOf("epicollect5-formbuilder/")!==-1&&(i.PROJECT_URL=r),$.ajax({url:i.PROJECT_URL,data:window.btoa(pako.gzip(JSON.stringify(_),{to:"string"})),method:"POST",crossDomain:!0,success:function(e){window.setTimeout(function(){s.dom.overlay.fadeOut(i.ANIMATION_FAST,function(){p.showSuccess(o.success.PROJECT_SAVED)})},i.ANIMATION_SLOW),void 0,void 0},error:function(e,t,r){var n,a="";try{n=JSON.parse(e.responseText),void 0,void 0,$(n.errors).each(function(e,t){a+="<br/>"+t.title})}catch(t){void 0}s.dom.overlay.fadeOut(i.ANIMATION_FAST),p.showError(o.error.PROJECT_NOT_SAVED+a,3e3)}})}else p.showError(o.error.JUMP_INVALID+u.invalid_jumps_question)};t.exports=c},{"actions/jumps":4,"actions/save":14,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"helpers/ui":36,"helpers/utils":37}],98:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/messages"),o=e("actions/validation"),s=e("helpers/ui"),a=e("helpers/utils"),p=e("config/consts"),c=e("ui-handlers/event-handler-callbacks/input-properties-keyup-callback"),l=e("template"),_=e("config/toast"),u=e("ui-handlers/possible-answers-sortable"),d=function(){var t;return{cursor:"move",items:".input",revert:100,containment:"parent",tolerance:"pointer",placeholder:"input-collection-drop-placeholder",receive:function(r,n){var c,l,_=(i.current_form_index,i.group.current_input_ref),u=a.getInputObjectByRef(i.current_input_ref).group,d=a.generateBranchGroupInputRef(i.current_input_ref),f=u.length,m=n.item.attr("data-type"),h=e("factory/input-factory");return i.is_editing_branch&&(void 0,u=a.getBranchInputObjectByRef(i.branch.current_input_ref).group,d=a.generateBranchGroupInputRef(i.branch.current_input_ref),f=u.length),m!==p.BRANCH_TYPE&&m!==p.GROUP_TYPE&&(i.group.current_input_ref=d,_&&(i.is_editing_branch?(l=a.getInputObjectByRef(i.branch.active_branch_ref),o.performValidation(a.getNestedGroupInputObjectByRef(l,_),!1)):o.performValidation(a.getGroupInputObjectByRef(_),!1)),void 0,i.group.collection_is_being_sorted=!1,t=h.createInput(m,d),void 0,c=i.dom.inputs_collection_sortable.find(".active"),c.removeClass("active"),u.push(t),void s.navbar.toggleSaveProjectBtn(p.BTN_DISABLED))},stop:function(r,d){var f,m=e("actions/undo"),h=i.current_form_index,b=i.group.current_input_ref,g=i.current_input_ref,v=a.getInputCurrentIndexByRef(g),E=i.project_definition.data.project.forms[h].inputs,I=E[v].group,T=n.error.NO_QUESTION_TEXT_YET,A=d.item.attr("data-type");a.getInputsTotal(E)>=p.INPUTS_MAX_ALLOWED&&s.input_tools.disable(),A===p.BRANCH_TYPE||A===p.GROUP_TYPE?d.item.remove():(A!==p.SEARCH_SINGLE_TYPE||i.group.collection_is_being_sorted||a.getSearchInputsTotal()>=p.LIMITS.search_inputs_max&&(s.input_tools.hideSearchInput(),_.showWarning(n.warning.SEARCH_INPUTS_LIMIT_REACHED+"("+p.LIMITS.search_inputs_max+")")),i.is_editing_branch&&(void 0,g=i.branch.current_input_ref,I=a.getBranchInputObjectByRef(g).group),d.item.removeAttr("style"),i.group.to_index=0===d.item.index()?d.item.index():d.item.index()-1,i.dom.input_properties_no_input_selected.hide(),i.group.collection_is_being_sorted?(I.move(i.group.from_index,i.group.to_index),o.validateJumpsAfterSorting(I),d.item.addClass("active")):(i.group.from_index=I.length-1,I.move(i.group.from_index,i.group.to_index),d.item.addClass("active"),d.item.attr("data-input-ref",b),d.item.find(".input-inner").append(s.inputs_collection.getInputStateIconsHTML()),d.item.find("span.question-preview").text(T),i.dom.input_properties.find(".panel-body form").hide(),i.dom.input_properties.find(".panel-title span").text(T),f=l.getInputPropertiesPanelHTML(t),i.dom.input_properties_forms_wrapper.hide(),$(f).removeClass("hidden").appendTo(i.dom.input_properties_forms_wrapper),i.dom.input_properties_forms_wrapper.fadeIn(p.ANIMATION_FAST),i.dom.input_properties_buttons.fadeIn(p.ANIMATION_FAST),i.is_editing_branch||t.type===p.GROUP_TYPE&&i.dom.input_properties.on("keyup","input",c),u(t))),i.render_action=p.RENDER_ACTION_DO,m.pushState(),A===p.README_TYPE&&$(".summernote").summernote(p.SUMMERNOTE_OPTIONS)},start:function(e,t){i.group.collection_is_being_sorted=!0,i.group.from_index=0===t.item.index()?0:t.item.index()-1,i.dom.inputs_collection_sortable.removeClass("active")},scroll:!0,snap:!1,over:function(e,t){var r=i.group.active_group_ref,n=a.getInputObjectByRef(r);i.is_editing_branch&&(n=a.getBranchInputObjectByRef(r)),0===n.group.length&&i.dom.inputs_collection_sortable.find('div.input[data-input-ref="'+r+'"]').find(".input-properties__no-group-questions-message").hide()}}};t.exports=d()},{"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"factory/input-factory":31,"helpers/ui":36,"helpers/utils":37,template:62,"ui-handlers/event-handler-callbacks/input-properties-keyup-callback":92,"ui-handlers/possible-answers-sortable":99}],99:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=e("config/consts"),o=e("helpers/ui"),s=e("ui-handlers/event-handler-callbacks/save-project-click-callback"),a=function(t){var r=e("actions/validation");return $.inArray(t.type,n.MULTIPLE_ANSWER_TYPES)!==-1&&void($.inArray(t.ref,i.possible_answers.enabled_sortable)===-1&&(i.dom.input_properties_forms_wrapper.find(".input-properties__form__possible-answers__list").sortable({axis:"y",containment:"parent",handle:".input-properties__form__possible-answers__list__drag-answer",cancel:"",helper:"clone",tolerance:"pointer",placeholder:"possible-answers-drop-placeholder",stop:function(e,a){i.possible_answers.to_index=0===a.item.index("")?a.item.index():a.item.index(),t.possible_answers.move(i.possible_answers.from_index,i.possible_answers.to_index),t.savePossibleAnswers(),r.performValidation(t,!1),r.areAllInputsValid(i.project_definition)&&(o.navbar.toggleSaveProjectBtn(n.BTN_ENABLED),i.dom.save_project_btn.off().on("click",s))},start:function(e,t){i.possible_answers.from_index=0===t.item.index()?0:t.item.index()}}).disableSelection(),i.possible_answers.enabled_sortable.push(t.ref)))};t.exports=a},{"actions/validation":23,"config/consts":24,"config/formbuilder":26,"helpers/ui":36,"ui-handlers/event-handler-callbacks/save-project-click-callback":97}],100:[function(e,t,r){"use strict";var i=e("config/formbuilder"),n=(e("factory/input-factory"),e("helpers/ui")),o=e("helpers/utils"),s=e("config/consts"),a=e("config/messages"),p=e("actions/validation"),c=e("template"),l=e("actions/undo"),_=e("config/toast"),u=e("ui-handlers/possible-answers-sortable"),d=function(){var t;i.dom.inputs_collection_sortable.sortable({zIndex:9999,cursor:"move",items:"> div.input",revert:100,containment:"parent",tolerance:"pointer",placeholder:"input-collection-drop-placeholder",receive:function(r,a){var c=e("factory/input-factory"),l=i.current_form_index,_=i.current_form_ref,u=i.project_definition.data.project.forms[l].inputs,d=i.current_input_ref,f=a.item.attr("data-type"),m=u.length,h=o.generateInputRef(_);d&&m>0&&p.performValidation(o.getInputObjectByRef(d),!1),a.item.removeAttr("style"),i.collection_is_being_sorted=!1,t=c.createInput(f,h),i.current_input_ref=t.ref;var b=i.dom.inputs_collection_sortable.find(".active");b.removeClass("active"),u.push(t),i.dom.input_properties_no_input_selected.hide(),t.dom.advanced_properties_wrapper=i.dom.input_properties_forms_wrapper.find('form[data-input-ref="'+t.ref+'"]').find(".input-properties__form__advanced-properties"),n.navbar.toggleSaveProjectBtn(s.BTN_DISABLED),n.forms_tabs.showFormInvalidIcon(i.current_form_index)},stop:function(e,r){var d,f=i.current_form_index,m=i.project_definition.data.project.forms[f].inputs,h=a.error.NO_QUESTION_TEXT_YET,b=r.item.attr("data-type");o.getInputsTotal(m)>=s.INPUTS_MAX_ALLOWED&&n.input_tools.disable(),b!==s.SEARCH_SINGLE_TYPE||i.collection_is_being_sorted||o.getSearchInputsTotal()>=s.LIMITS.search_inputs_max&&(n.input_tools.hideSearchInput(),void 0,_.showWarning(a.warning.SEARCH_INPUTS_LIMIT_REACHED+"("+s.LIMITS.search_inputs_max+")")),r.item.removeAttr("style");var g=i.current_input_ref;void 0,i.to_index=0===r.item.index("")?r.item.index():r.item.index()-2,i.collection_is_being_sorted?(m.move(i.from_index,i.to_index),p.validateJumpsAfterSorting(m),r.item.addClass("active")):(i.from_index=m.length-1,m.move(i.from_index,i.to_index),r.item.addClass("active"),r.item.attr("data-input-ref",g),r.item.find(".input-inner").append(n.inputs_collection.getInputStateIconsHTML()),b===s.BRANCH_TYPE&&(h=a.error.NO_BRANCH_HEADER_YET),b===s.GROUP_TYPE&&(h=a.error.NO_GROUP_HEADER_YET),r.item.find("span.question-preview").text(h),i.dom.input_properties.find(".panel-body form").hide(),i.dom.input_properties.find(".panel-title span").text(h),d=c.getInputPropertiesPanelHTML(t),i.dom.input_properties_forms_wrapper.hide(),$(d).removeClass("hidden").appendTo(i.dom.input_properties_forms_wrapper),i.dom.input_properties_forms_wrapper.fadeIn(s.ANIMATION_FAST),i.dom.input_properties_buttons.fadeIn(s.ANIMATION_FAST),t.type===s.BRANCH_TYPE||t.type===s.GROUP_TYPE,u(t)),i.render_action=s.RENDER_ACTION_DO,l.pushState(),b===s.README_TYPE&&$(".summernote").summernote(s.SUMMERNOTE_OPTIONS),m.length>0?n.inputs_collection.toggleTitleWarning(o.getTitleCount(m),!1):(n.inputs_collection.toggleTitleWarning(1,!1),i.dom.inputs_collection.find(".inputs-collection__export-form").addClass("disabled"),i.dom.inputs_collection.find(".inputs-collection__print-as-pdf").addClass("disabled"))},start:function(e,t){i.collection_is_being_sorted=!0,i.from_index=0===t.item.index()?0:t.item.index()-2,i.dom.inputs_collection_sortable.removeClass("active")},over:function(){var e=i.current_form_index,t=i.project_definition.data.project.forms[e].inputs;0===t.length&&i.dom.inputs_collection.find(".input-properties__no-questions-message").addClass("hidden")},out:function(){var e=i.current_form_index,t=i.project_definition.data.project.forms[e].inputs;0===t.length&&i.dom.inputs_collection.find(".input-properties__no-questions-message").hide().removeClass("hidden").fadeIn(s.ANIMATION_FAST)},scroll:!0}).disableSelection()};t.exports=d},{"actions/undo":22,"actions/validation":23,"config/consts":24,"config/formbuilder":26,"config/messages":28,"config/toast":29,"factory/input-factory":31,"helpers/ui":36,"helpers/utils":37,template:62,"ui-handlers/possible-answers-sortable":99}]},{},[1]);