"use strict";window.EC5=window.EC5||{},window.EC5.projects=window.EC5.projects||{},function(e){function t(){e.domElements.projects_item_class&&e.domElements.grid_view_class&&e.domElements.list_view_class&&($(e.domElements.grid_view_class).addClass("hidden"),$(e.domElements.list_view_class).removeClass("hidden").hide().fadeIn(),$(e.domElements.projects_item_class).removeClass("grid-group-item").addClass("list-group-item"))}function o(){e.domElements.projects_item_class&&e.domElements.grid_view_class&&e.domElements.list_view_class&&($(e.domElements.projects_item_class).removeClass("list-group-item").addClass("grid-group-item hidden"),$(e.domElements.list_view_class).addClass("hidden"),$(e.domElements.grid_view_class).removeClass("hidden"),$(e.domElements.projects_item_class).removeClass("hidden").hide().fadeIn())}e.loader=$(".loader"),e.defaultOrdering={field:"created_at",type:"asc",label:"Date Asc"},e.options={page:1,search:"",filter_type:"",filter_value:"",access:"",visibility:"",order:e.defaultOrdering},e.domElements={},e.init=function(s,r,i,a,n){window.EC5.overlay.fadeIn(),e.url=s,e.domElements=r,e.options=i?i:e.options,e.successCallback=a?a:function(s){if(e.domElements.projects_div){var r=e.getDefaultView();switch(e.domElements.projects_div.html(s),r){case"list":t();break;default:o()}e.domElements.projects_div.removeClass("hidden"),window.scrollTo({top:0,behavior:"auto"}),e.loader.addClass("hidden"),window.setTimeout(function(){window.EC5.overlay.fadeOut()},500)}},e.errorCallback=n?n:function(t){if(t.responseJSON.errors&&t.responseJSON.errors.length>0){var o;for(o=0;o<t.responseJSON.errors.length;o++)window.EC5.toast.showError(t.responseJSON.errors[o].title)}e.loader.addClass("hidden"),window.setTimeout(function(){window.EC5.overlay.fadeOut()},500)}},e.getProjects=function(){e.domElements.projects_div.addClass("hidden"),e.loader.removeClass("hidden"),$.ajax({url:e.options.url,type:"GET",dataType:"json",data:{page:e.options.page,search:e.options.search,filter_type:e.options.filter_type,filter_value:e.options.filter_value}}).done(e.successCallback).fail(e.errorCallback)},e.getDefaultView=function(){return"1"===localStorage.getItem("ec5-projects-list-view")?"list":"grid"},e.setUpListeners=function(){if(e.domElements.projects_div&&(e.domElements.pagination_class&&e.domElements.projects_div.on("click",e.domElements.pagination_class,function(t){t.preventDefault(),e.options.page=$(this).attr("href").split("page=")[1],e.getProjects(),window.EC5.overlay.fadeIn()}),e.domElements.list&&e.domElements.list.click(function(e){e.preventDefault(),localStorage.setItem("ec5-projects-list-view",1),t()}),e.domElements.grid&&e.domElements.grid.click(function(e){e.preventDefault(),window.localStorage.removeItem("ec5-projects-list-view"),o()}),e.domElements.filter_controls)){if(e.domElements.search_input_class){var s;e.domElements.filter_controls.on("keyup",e.domElements.search_input_class,function(t){if(this.value.length>=0||13===t.keyCode){e.options.search=$(this).val(),e.options.page=1;var o=300;clearTimeout(s),s=setTimeout(function(){e.getProjects()},o)}})}e.domElements.filter_dropdown_class&&e.domElements.filter_dropdown&&e.domElements.filter_controls.on("click",e.domElements.filter_dropdown_class,function(t){t.preventDefault(),window.EC5.overlay.fadeIn(),$(this).data("filterValue").toLowerCase().trim()!==e.domElements.filter_dropdown.text().toLowerCase().trim()?(e.options.filter_type=$(this).data("filterType")?$(this).data("filterType"):"",e.options.filter_value=$(this).data("filterValue")?$(this).data("filterValue"):"",e.options.page=1,e.getProjects(),e.domElements.filter_dropdown.html(e.options.filter_value+'&nbsp;<span class="caret"></span>')):window.EC5.overlay.fadeOut()}),e.domElements.filter_reset_class&&e.domElements.filter_controls.on("click",e.domElements.filter_reset_class,function(t){t.preventDefault(),e.defaultOrdering={field:"created_at",type:"asc",label:"Date Asc"},e.options={page:1,search:"",filter_type:"",filter_value:"",order:e.defaultOrdering},e.domElements.filter_controls.find('input[type="text"]').val(""),e.getProjects()})}}}(window.EC5.projects),$(".page-search-projects").length>0&&(window.EC5=window.EC5||{},window.EC5.projectsSearch=window.EC5.projectsSearch||{},$(document).ready(function(){function e(e){e.preventDefault(),i=$(e.target).attr("href").split("page=")[1],r=p.val().trim(),s=d.data("order-selected-value"),console.log("page:",i),console.log("projectName:",r),console.log("selectedOption:",s),window.EC5.projectsSearch.getProjects({projectName:r,order:s,page:i})}var t=function(){var e=0;return function(t,o){clearTimeout(e),e=setTimeout(t,o)}}(),o=$(".endpoint").data("route"),s="entries-high-low",r="",i=1,a={"entries-high-low":"Entries high - low","entries-low-high":"Entries low - high",newest:"Newest",oldest:"Oldest","a-z":"A - Z","z-a":"Z - A"},n=$(".page-search-projects .page-search-projects__filter-controls "),l=$(".project_search_cards"),d=n.find(".dropdown-toggle"),c=d.find(".dropdown-text"),m=n.find(".dropdown-menu"),p=n.find(".projects-list__project-filter"),f=$(".loader");p.keyup(function(){r=$(this).val().trim(),r.length>=1?t(function(){window.EC5.projectsSearch.getProjects({projectName:r,order:s,page:1}),console.log(r)},500):""===r.trim()&&t(function(){window.EC5.projectsSearch.getProjects({projectName:"",order:s,page:1}),console.log(r)},500)}),m.on("click","li",function(){s=$(this).data("order-value"),r=p.val().trim(),c.text(a[s]),d.data("order-selected-value",s),window.EC5.projectsSearch.getProjects({projectName:r,order:s,page:1})}),$(".pagination").on("click","a",e),function(t){t.getProjects=function(t){var s={};switch(l.empty(),f.removeClass("hidden"),t.order){case"entries-high-low":s.sort_by="total_entries",s.sort_order="desc";break;case"entries-low-high":s.sort_by="total_entries",s.sort_order="asc";break;case"newest":s.sort_by="created_at",s.sort_order="desc";break;case"oldest":s.sort_by="created_at",s.sort_order="asc";break;case"a-z":s.sort_by="name",s.sort_order="asc";break;case"z-a":s.sort_by="name",s.sort_order="desc"}s.name=t.projectName,s.page=t.page,$.ajax({url:o,type:"GET",data:s,success:function(t){f.addClass("hidden"),l.hide().append(t).fadeIn(1e3),$(".pagination").on("click","a",e),window.scrollTo(0,0)},error:function(e){console.log(e)}})}}(window.EC5.projectsSearch)}));