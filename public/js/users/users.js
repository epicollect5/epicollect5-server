"use strict";window.EC5=window.EC5||{},$(document).ready(function(){var t=$(".page-forgot");if(0===t.length)return!1;var e=$(".gcaptcha"),n=e.text();e.remove(),grecaptcha.ready(function(){var e,o=function(o){function i(){window.EC5.overlay.fadeIn(),grecaptcha.execute(n,{action:"forgot"}).then(function(t){a.prepend('<input type="hidden" name="g-recaptcha-response" value="'+t+'">').submit(),window.setTimeout(window.EC5.overlay.fadeOut(),1e4)})}var a=t.find("form#page-forgot__form");o.preventDefault(),"function"==typeof a.get(0).reportValidity?a.get(0).reportValidity()&&i():i(),window.clearTimeout(e)};$("#send").on("click",function(t){e||(e=window.setTimeout(o(t),1e3))})})}),window.EC5=window.EC5||{},$(document).ready(function(){var t=$(".page-login");if(0===t.length)return!1;var e=t.find(".btn-login-apple"),n=$(".gcaptcha");if(n.length>0){var o=n.text().trim();n.remove(),window.grecaptcha.ready(function(){var e,n=function(e){function n(){window.EC5.overlay.fadeIn();try{window.grecaptcha.execute(o,{action:"passwordless"}).then(function(t){i.prepend('<input type="hidden" name="g-recaptcha-response" value="'+t+'">').submit(),window.setTimeout(window.EC5.overlay.fadeOut(),1e4)})}catch(t){window.setTimeout(window.EC5.overlay.fadeOut(),500),window.EC5.toast.showError("Google ReCaptcha "+t)}}var i=t.find("form#page-login__passwordless");e.preventDefault(),"function"==typeof i.get(0).reportValidity?i.get(0).reportValidity()&&n():n()};$("#passwordless").on("click",function(t){window.clearTimeout(e),e=window.setTimeout(n(t),1e3)})}),t.find(".show-password-control").on("click",function(){$(this).prop("checked")?t.find("input.password-input").each(function(){$(this).attr("type","text")}):t.find("input.password-input").each(function(t){$(this).attr("type","password")})})}e.on("click",function(t){var e=$("meta[name=appleid-signin-client-id]").attr("content"),n=$("meta[name=appleid-signin-scope]").attr("content"),o=$("meta[name=appleid-signin-redirect-uri]").attr("content"),i=$("meta[name=appleid-signin-nonce]").attr("content");window.AppleID.auth.init({clientId:e,scope:n,redirectURI:o,nonce:i,usePopup:!1}),window.AppleID.auth.signIn()})}),window.EC5=window.EC5||{},$(document).ready(function(){var t=$(".page-profile");if(0===t.length)return!1;var e=t.find(".btn-connect-apple"),n=t.find(".btn-confirm-account-deletion"),o=t.find(".checkbox-confirm-account-deletion"),i=t.find("#modal__account-deletion");i.on("show.bs.modal",function(){n.attr("disabled",!0),o.prop("checked",!1)}),o.on("change",function(){$(this).is(":checked")?n.attr("disabled",!1):n.attr("disabled",!0)}),n.on("click",function(t){if(!o.prop("checked"))return!1;window.EC5.overlay.fadeIn();var e=window.EC5.SITE_URL+"/api/internal/profile/account-deletion-request";$.ajax({url:e,type:"POST"}).done(function(t){return console.log(t),t.data.accepted===!0?void window.EC5.toast.showSuccess("Account deletion request sent."):t.data.deleted===!0?(window.EC5.toast.showSuccess("Account deleted."),void window.setTimeout(function(){window.location.reload()},100)):void window.EC5.toast.showError("Something went wrong")}).fail(function(t){if(t.responseJSON.errors&&t.responseJSON.errors.length>0)for(var e=0;e<t.responseJSON.errors.length;e++)window.EC5.toast.showError(t.responseJSON.errors[e].title)}).always(function(){window.EC5.overlay.fadeOut(),i.modal("hide")})}),e.on("click",function(t){var e=$("meta[name=appleid-signin-client-id]").attr("content"),n=$("meta[name=appleid-signin-scope]").attr("content"),o=$("meta[name=appleid-signin-redirect-uri]").attr("content"),i=$("meta[name=appleid-signin-nonce]").attr("content");AppleID.auth.init({clientId:e,scope:n,redirectURI:o,nonce:i,usePopup:!1}),AppleID.auth.signIn();try{window.EC5.overlay.fadeIn(),AppleID.auth.signIn().then(function(t){t.authorization.state===state?$.ajax({url:o,type:"POST",dataType:"json",data:t,success:function(t){t.data.authorized?window.location.href=window.EC5.SITE_URL+"/myprojects":(window.EC5.toast.showError("User not authorized"),window.EC5.overlay.fadeOut())},error:function(t){window.EC5.overlay.fadeOut(),window.EC5.toast.showError(t.errors[0].title)}}):(window.EC5.overlay.fadeOut(),window.EC5.toast.showError("Invalid state"))},function(t){window.EC5.overlay.fadeOut(),t.error&&window.EC5.toast.showError(t.error)})}catch(a){window.EC5.overlay.fadeOut(),a.error&&window.EC5.toast.showError(a.error)}})}),window.EC5=window.EC5||{},$(document).ready(function(){var t=$(".page-staff-reset");return 0!==t.length&&void t.find(".show-password-control").on("click",function(){$(this).prop("checked")?t.find("input.password-input").each(function(){$(this).attr("type","text")}):t.find("input.password-input").each(function(t){$(this).attr("type","password")})})}),window.EC5=window.EC5||{},$(document).ready(function(){var t=$(".page-signup");if(0===t.length)return!1;var e=$(".gcaptcha"),n=e.text();e.remove(),grecaptcha.ready(function(){var e,o=function(e){function o(){window.EC5.overlay.fadeIn(),grecaptcha.execute(n,{action:"signup"}).then(function(t){i.prepend('<input type="hidden" name="g-recaptcha-response" value="'+t+'">').submit(),window.setTimeout(window.EC5.overlay.fadeOut(),1e4)})}var i=t.find("form#page-signup__form");e.preventDefault(),"function"==typeof i.get(0).reportValidity?i.get(0).reportValidity()&&o():o()};$("#signup").on("click",function(t){window.clearTimeout(e),e=window.setTimeout(o(t),1e3)})}),t.find(".show-password-control").on("click",function(){$(this).prop("checked")?t.find("input.password-input").each(function(){$(this).attr("type","text")}):t.find("input.password-input").each(function(t){$(this).attr("type","password")})})});